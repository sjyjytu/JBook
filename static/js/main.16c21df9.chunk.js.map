{"version":3,"sources":["img/signin4.jpg","agent.js","components/Login.js","components/Header.js","components/Main/SearchBar.js","components/Main/ChoosePage.js","components/Main/HomePage.js","components/Book/BookCard.js","components/Main/Catalog.js","components/Book/Pagination.js","components/Book/BooksPage.js","components/Book/BookDetail.js","components/Shopping/ShoppingCart.js","theme.js","components/SignUp.js","components/Book/AddNewBook.js","components/Book/UpdateBook.js","components/Manage/ManageUser.js","components/Shopping/Chart.js","components/Shopping/ShowStatistics.js","components/Shopping/ShowOrder.js","Routers.js","reducers.js","configureStore.js","index.js"],"names":["module","exports","__webpack_require__","p","superagent","require","RootUrl","resBody","res","body","request","url","get","set","then","query","post","send","Book","showBooks","start","num","parseInt","addToCart","_id","bookname","isbn","removeFromCart","delete","showCart","getBookByisbn","getBookByName","Manage","addABook","book","deleteABook","updateABook","put","banAUser","showUsers","Order","showOrder","generateAnOrder","booksArr","mode","books","showStatistics","startTime","endTime","User","login","username","password","signup","email","Login","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","handleInputChange","field","e","newState","assign","defineProperty","target","value","setState","nextProps","redirectTo","history","push","onRedirect","_this2","classes","react_default","a","createElement","src","bgImg","Dialog_default","open","aria-labelledby","DialogTitle_default","id","DialogContent_default","onSubmit","event","preventDefault","checkAccount","FormControl_default","margin","required","fullWidth","InputLabel_default","htmlFor","Input_default","name","onChange","autoFocus","autoComplete","type","Button_default","variant","color","className","submit","React","Component","connect","Redirect","dispatch","result","catch","error","alert","response","msg","withStyles","theme","marginTop","spacing","unit","Header","anchorEl","handleClose","handleClick","currentTarget","handleClickLogin","handleCloseLogin","_this$props","root","AppBar_default","position","Toolbar_default","Typography_default","grow","button","href","Home_default","buttonIcon","Comment_default","isManager","AccountCircle_default","ShoppingCart_default","aria-owns","undefined","aria-haspopup","onClick","Menu_default","Boolean","onClose","MenuItem_default","flexGrow","marginLeft","marginRight","menuButton","hidden","display","SearchBar","key","handleRadioChange","bind","assertThisInitialized","by","setKey","location","pathname","searchBtnClick","test","curPage","perPageNum","searchBooks","err","window","switchBy","_this3","toolbar","Grid_default","container","alignItems","item","xs","title","noWrap","Fragment","index_es","checked","aria-label","checkedIcon","search","searchIcon","searchOnClick","Search_default","InputBase_default","placeholder","inputRoot","input","inputInput","clearBtn","clearAndReset","withRouter","Page","keyWord","Search","total","count","_clearAndReset","asyncToGenerator","regenerator_default","mark","_callee2","wrap","_context2","prev","next","stop","apply","arguments","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","width","breakpoints","up","height","justifyContent","borderRadius","shape","backgroundColor","fade","palette","common","white","&:hover","float","down","primary","elight","overflow","radio","ChoosePage","update","disabled","Divider_default","padding","textAlign","text","secondary","fontSize","HomePage","components_Header","Main_SearchBar","Main_ChoosePage","main","BookCard","deleteBook","Card_default","card","CardActionArea_default","CardMedia_default","media","image","pictureUrl","CardContent_default","gutterBottom","component","author","CardActions_default","size","price","Link","to","deleteButton","icons_index_es","maxWidth","Catalog","List_default","subheader","ListSubheader_default","ListItem_default","ListItemIcon_default","Send_default","ListItemText_default","inset","Drafts_default","MoveToInbox_default","ExpandLess_default","ExpandMore_default","Collapse_default","in","timeout","unmountOnExit","disablePadding","nested","StarBorder_default","Pagination","allPage","Math","ceil","concat","style","label","lastPage","ChevronLeft_default","nextPage","labelPosition","ChevronRight_default","BooksPage","bookPageOnChange","setTotal","storePageBooks","nextContext","console","log","page","forceUpdate","_this4","superRoot","Main_Catalog","map","bookCard","Book_BookCard","Book_Pagination","BookDetail","minWidth","paper","marginBottom","handleChange","numValue","targetisbn","match","params","_books$filter","filter","slicedToArray","left","alt","middle","stockNum","summary","summarySpan","min","max","inputNum","ref","addBtn","buyBtn","buyNow","right","BottomNavigation_default","showLabels","BottomNavigationAction_default","icon","Restore_default","Favorite_default","LocationOn_default","whiteSpace","border","lineHeight","wordWrap","wordBreak","fontWeight","ShoppingCart","removeButtonClick","oldCart","cart","newCart","Avatar_default","avatar","children","link","Delete_default","rightIcon","divider","date","dark","createMuiTheme","pink","light","lightBlue","typography","fontFamily","SignUp","confirmPass","core_styles","Paper_default","flexDirection","NumberFormatCustom","inputRef","other","objectWithoutProperties","number_format_default","getInputRef","onValueChange","values","thousandSeparator","prefix","NumberFormatCustom2","AddNewBook","uploadImgUrl","onImageDrop","handleImageUpload","files","file","end","secure_url","supermain","addNewBook","parseFloat","head","pan","TextField_default","InputProps","inputComponent","cover","accept","length","imgButton","click","img","multiline","rows","submitButton","outline","borderWidth","formControl","UpdateBook","_booksArr$filter","uploadedFile","updateBook","ManageUser","banButtonClick","newUsers","users","user","isBanned","Chart","initEchart","echarts","init","document","getElementById","chartId","setOption","tooltip","trigger","legend","data","yname","toolbox","show","feature","dataView","readOnly","magicType","restore","saveAsImage","xAxis","xname","xdata","yAxis","series","ydata","markPoint","markLine","prevProps","prevState","snapshot","ShowStatistics","bookData","totalConsume","userData","handleTextFieldChange","checkBtnClick","replace","bookX","bookY","i","userX","userY","noValidate","textField","InputLabelProps","shrink","defaultValue","Shopping_Chart","flexWrap","ShowOrder","orders","order","orderId","toString","indexOf","createTime","totalPrice","orderFilter","JSON","parse","BasicRoute","HashRouter","Switch","Route","exact","path","combineReducers","action","newState2","splice","newState3","PPN","store","createStore","Reducers","ReactDOM","render","es","Routers"],"mappings":"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","file":"static/js/main.16c21df9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/signin4.d1971858.jpg\";","var superagent = require('superagent');\r\n\r\n// const RootUrl = 'http://localhost:8080';\r\nconst RootUrl = 'http://47.103.0.246:8080';\r\n\r\nfunction resBody(res) {\r\n    return res.body;\r\n}\r\n\r\nconst request = {\r\n    get: (url)=>superagent.get(RootUrl+url).set('Content-Type','application/json').then(resBody),\r\n    getWith:(url,body)=>superagent.get(RootUrl+url).query(body).then(resBody),\r\n    post:(url,body)=>superagent.post(RootUrl+url).set('Content-Type','application/json').send(body).then(resBody)\r\n};\r\n\r\n//show books, add to cart, manage books and remove a book from cart\r\nexport const Book = {\r\n    showBooks: (start,num)=>request.getWith('/api/book/show',{\"num\":parseInt(num),\"start\":parseInt(start)}),\r\n    addToCart: (_id, bookname, num, isbn) => request.post(\"/api/cart/add\",{\"_id\":parseInt(_id),\"bookname\":bookname, \"num\": num, \"isbn\": isbn}),\r\n    removeFromCart: (_id, bookname, isbn) => superagent.delete(RootUrl + \"/api/cart/remove\").set('Content-Type', 'application/json').send({\r\n        \"_id\": parseInt(_id),\r\n        \"bookname\": bookname,\r\n        \"isbn\": isbn\r\n    }).then(resBody),\r\n    showCart: (_id) => request.getWith(\"/api/cart/show\",{\"_id\": _id}),\r\n    getBookByisbn: (isbn,start,num) => request.getWith('/api/book/showBy',{\"isbn\": parseInt(isbn),\"num\":num,\"start\":start}),\r\n    getBookByName: (bookname,start,num) => request.getWith(\"/api/book/showBy\",{\"bookname\": bookname,\"num\":num,\"start\":start, \"isbn\": -1}),\r\n};\r\n\r\n//the action of manager add a book, delete a book, update a book, ban a user\r\nexport const Manage = {\r\n    addABook: (/*bookname, stockNum, summary, pictureUrl, author, price*/book) => request.post(\"/api/book/manage/add\",\r\n        /*{\r\n            \"bookname\": bookname, \"stockNum\": stockNum, \"summary\": summary, \"pictureUrl\": pictureUrl, \"author\": author,\r\n            \"price\": price\r\n        }*/book),\r\n    deleteABook: (_id, bookname, isbn) => superagent.delete(RootUrl + \"/api/book/manage/delete\").set('Content-Type', 'application/json')\r\n        .send({\"bookname\": bookname, \"_id\": _id, \"isbn\": isbn}).then(resBody),\r\n    updateABook: (/*bookname, stockNum, summary, pictureUrl, author, price, isbn*/book) => superagent.put(RootUrl + \"/api/book/manage/update\")\r\n        .set('Content-Type', 'application/json')\r\n        .send(/*{\r\n            \"bookname\": bookname, \"stockNum\": stockNum, \"summary\": summary, \"pictureUrl\": pictureUrl, \"author\": author,\r\n            \"price\": price, \"isbn\": isbn\r\n        }*/book)\r\n        .then(resBody),\r\n    banAUser: _id => superagent.put(RootUrl + \"/api/user/ban\").set('Content-Type', 'application/json')\r\n        .send({\"_id\": _id}).then(resBody),\r\n    showUsers: () => request.get(\"/api/user/show\")\r\n};\r\n\r\nexport const Order = {\r\n    showOrder: _id => {return request.getWith(\"/api/order/show\",{\"_id\": _id})},\r\n    generateAnOrder: (_id, booksArr, mode) => request.post(\"/api/order/generate\", {\"_id\": _id, \"books\": booksArr, \"mode\": mode}),\r\n    showStatistics: (_id, startTime,endTime) => request.getWith(\"/api/order/show/statistics/buy\", {\"_id\":_id,\"startTime\":startTime,\"endTime\":endTime})\r\n};\r\n\r\n//\r\nexport const User = {\r\n    login: (username, password) => request.post('/api/user/login',{\"username\":username, \"password\": password}),\r\n    signup: (username, password, email) => request.post('/api/user/signup',{\"username\":username, \"password\": password,\r\n        \"email\": email})\r\n};","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport {User} from \"../agent\";\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport {connect} from \"react-redux\";\r\nimport bgImg from '../img/signin4.jpg';\r\n\r\nconst styles = theme => ({\r\n    submit:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    /*img:{\r\n        width: '100%',\r\n        height:'400px',\r\n        backgroundImg: `url(${bgImg})`\r\n    }*/\r\n});\r\n\r\nclass Login extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {username:'',password:''};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div>\r\n                <img src={bgImg}/>\r\n                <Dialog\r\n                    open={true}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">Sign in</DialogTitle>\r\n                    <DialogContent>\r\n                        <form onSubmit={event => {\r\n                            event.preventDefault();\r\n                            this.props.checkAccount(this.state.username, this.state.password);\r\n                        }}>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"username\">UserName</InputLabel>\r\n                                <Input\r\n                                    id=\"username\"\r\n                                    name=\"username\"\r\n                                    value={this.state.username}\r\n                                    onChange={this.handleInputChange('username')}\r\n                                    autoFocus\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    value={this.state.password}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('password')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                className={classes.submit}\r\n                            >\r\n                                Sign in\r\n                            </Button>\r\n                        </form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        checkAccount: (username, password) => {\r\n            User.login(username, password).then(res=>dispatch({type: \"LOGIN\",result:res})).catch(error=>alert(error.response.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(Login));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Home from '@material-ui/icons/Home';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Comment from '@material-ui/icons/Comment';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\r\nimport Login from './Login';\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n        marginRight: -theme.spacing.unit,\r\n    },\r\n    grow: {\r\n        flexGrow: theme.spacing.unit * 2,\r\n    },\r\n    button: {\r\n        marginRight: theme.spacing.unit * 5,\r\n    },\r\n    menuButton:{\r\n\r\n    },\r\n    hidden : {\r\n        display: 'none',\r\n    },\r\n    buttonIcon: {\r\n        marginRight: theme.spacing.unit * 0.5,\r\n    },\r\n});\r\n\r\nclass Header extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {anchorEl: null, open: false};\r\n        this.handleClose = () => {\r\n            this.setState({anchorEl: null});\r\n        };\r\n        this.handleClick = event => {\r\n            this.setState({anchorEl: event.currentTarget});\r\n        };\r\n        this.handleClickLogin = () => {\r\n            this.setState({ open: true });\r\n        };\r\n\r\n        this.handleCloseLogin = () => {\r\n            this.setState({ anchorEl: null, open: false });\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { classes,Login } = this.props;\r\n        const { anchorEl } = this.state;\r\n        return (\r\n            <div className={classes.root}>\r\n\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n                            欢迎，{Login.username !== '' ? Login.username : '请登录'}\r\n                        </Typography>\r\n                        <Button color=\"inherit\" className={classes.button} href=\"#\">\r\n                            <Home className={classes.buttonIcon}/>\r\n                            主页\r\n                        </Button>\r\n                        <Button color=\"inherit\" className={classes.button} href=\"http://www.ketianya.xyz/ketianya/#/\">\r\n                            <Comment className={classes.buttonIcon}/>\r\n                            论坛\r\n                        </Button>\r\n                        {Login._id !== \"\" ?\r\n                            <Button color=\"inherit\" className={classes.button} href=\"#/statistics\">\r\n                                <Home className={classes.buttonIcon}/>\r\n                                数据统计\r\n                            </Button>\r\n                            :null\r\n                        }\r\n                        {Login._id !== \"\" ?\r\n                            (\r\n                                Login.isManager ?\r\n                                    <Button color=\"inherit\" className={classes.button} href=\"#/manage-users\">\r\n                                        <AccountCircle className={classes.buttonIcon}/>\r\n                                        管理用户\r\n                                    </Button>\r\n                                    :\r\n                                    <Button color=\"inherit\" className={classes.button} href=\"#/cart\">\r\n                                        <ShoppingCart className={classes.buttonIcon}/>\r\n                                        购物车\r\n                                    </Button>\r\n                            ) : null\r\n                        }\r\n                        <Button\r\n                            aria-owns={anchorEl ? 'simple-menu' : undefined}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={this.handleClick}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <AccountCircle className={classes.buttonIcon}/>\r\n                            注册/登录\r\n                        </Button>\r\n                        <Menu\r\n                            id=\"simple-menu\"\r\n                            anchorEl={anchorEl}\r\n                            open={Boolean(anchorEl)}\r\n                            onClose={this.handleClose}\r\n                        >\r\n                            <MenuItem onClick={this.handleClose}>\r\n                                <Button color=\"inherit\" fullWidth href=\"#/login\">\r\n                                    登录\r\n                                </Button>\r\n                            </MenuItem>\r\n                            <MenuItem onClick={this.handleClose}>\r\n                                <Button color=\"inherit\" fullWidth href=\"#/signup\">\r\n                                    注册\r\n                                </Button>\r\n                            </MenuItem>\r\n                        </Menu>\r\n                    </Toolbar>\r\n                </AppBar>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {Login: state.Login};\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(Header));\r\n//export default withStyles(styles)(Header);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\nimport {connect} from \"react-redux\";\r\nimport {Book} from \"../../agent\";\r\nimport {Radio} from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst styles = theme => ({\r\n    inputInput: {\r\n        paddingTop: theme.spacing.unit,\r\n        paddingRight: theme.spacing.unit,\r\n        paddingBottom: theme.spacing.unit,\r\n        paddingLeft: theme.spacing.unit * 10,\r\n        transition: theme.transitions.create('width'),\r\n        width: '100%',\r\n\r\n        [theme.breakpoints.up('md')]: {\r\n        width: 200,\r\n    },\r\n    },\r\n    inputRoot: {\r\n        color: 'inherit',\r\n        width: '100%',\r\n        display:'inline-block'\r\n\r\n    },\r\n    searchIcon: {\r\n        marginLeft:theme.spacing.unit,\r\n        //width: theme.spacing.unit * 2,\r\n        height: '100%',\r\n        position: 'absolute',\r\n        //pointerEvents: 'none',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'right',\r\n    },\r\n    search: {\r\n        position: 'relative',\r\n        borderRadius: theme.shape.borderRadius,\r\n\r\n        backgroundColor: fade(theme.palette.common.white, 0.35),\r\n        '&:hover': {\r\n            backgroundColor: fade(theme.palette.common.white, 0.55),\r\n        },\r\n        marginRight: theme.spacing.unit * 2,\r\n        float: 'right',\r\n        width: '400px',\r\n        [theme.breakpoints.down('md')]: {\r\n            width: 'auto',\r\n        },\r\n    },\r\n    toolbar: {\r\n        marginLeft: -theme.spacing.unit,\r\n        marginRight: -theme.spacing.unit,\r\n        height: '100px',\r\n        paddingTop: theme.spacing.unit * 3,\r\n        backgroundColor: theme.palette.primary.elight,\r\n    },\r\n    title: {\r\n        overflow: 'visible',\r\n        marginLeft: theme.spacing.unit*3,\r\n    },\r\n    radio:{\r\n        display: 'inline-block',\r\n        width: '10px',\r\n    },\r\n    clearBtn:{\r\n        marginLeft:-8*theme.spacing.unit,\r\n        //width: theme.spacing.unit * 2,\r\n        height: '100%',\r\n        position: 'absolute',\r\n    },\r\n    hidden:{\r\n        display:\"none\"\r\n    }\r\n});\r\n\r\nclass SearchBar extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {key:''};\r\n        this.handleRadioChange = this.handleRadioChange.bind(this);\r\n    }\r\n\r\n    async searchOnClick() {\r\n        const key = this.state.key;\r\n        const by = this.props.by;\r\n        this.props.setKey(key);\r\n        //alert(this.props.location.pathname);\r\n        if (key === ''||key===undefined) {\r\n            alert('关键字不能为空哦~');\r\n        } else {\r\n            //根据当前页面是订单页还是图书页进行不同处理\r\n            if (this.props.location.pathname === \"/order\") {\r\n\r\n            } else {\r\n                await this.props.searchBtnClick();\r\n                if (by === 'isbn') {\r\n                    var regPos = /^\\d+(\\.\\d+)?$/;\r\n                    if (!regPos.test(key)) {\r\n                        alert(\"输入的isbn格式不正确\");\r\n                    } else {\r\n                        Book.getBookByisbn(key,this.props.curPage,this.props.perPageNum)\r\n                            .then(res => this.props.searchBooks(res))\r\n                            .catch(error=>alert(error.response.body.msg));\r\n                    }\r\n                } else {\r\n                    Book.getBookByName(key,this.props.curPage,this.props.perPageNum)\r\n                        .then(res => this.props.searchBooks(res))\r\n                        .catch(err => {alert(err.response.body.msg);window.open('https://www.baidu.com/s?wd=' + key, '_blank')});\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleRadioChange(e) {\r\n        this.props.switchBy();\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div className={classes.toolbar}>\r\n                <Grid container spacing={24} alignItems=\"center\">\r\n                    <Grid item xs={6}>\r\n                        <Typography className={classes.title} variant=\"h2\" color=\"secondary\" noWrap>\r\n                            j-bu ok-y\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                        <React.Fragment>\r\n                            <Typography variant=\"h6\" color=\"inherit\"\r\n                                        className={this.props.location.pathname === \"/order\"?classes.hidden:null}>\r\n                                通过以下方式查找书:\r\n                            </Typography>\r\n                            <Radio\r\n                                checked={this.props.by === 'isbn'}\r\n                                onChange={this.handleRadioChange}\r\n                                value=\"isbn\"\r\n                                name=\"radio-button\"\r\n                                aria-label=\"isbn\"\r\n                                checkedIcon={\"isbn\"}\r\n                                className={this.props.location.pathname === \"/order\"?classes.hidden:null}\r\n                            />\r\n                            <Radio\r\n                                checked={this.props.by === 'bookname'}\r\n                                onChange={this.handleRadioChange}\r\n                                value=\"bookname\"\r\n                                name=\"radio-button\"\r\n                                aria-label=\"bookname\"\r\n                                checkedIcon={\"书名\"}\r\n                                className={this.props.location.pathname === \"/order\"?classes.hidden:null}\r\n                            />\r\n                        </React.Fragment>\r\n                        <div className={classes.search}>\r\n                            <Button className={classes.searchIcon}\r\n                                        onClick={() => this.searchOnClick()}>\r\n                                <SearchIcon/>\r\n                                Go\r\n                            </Button>\r\n                            <InputBase\r\n                                placeholder={\"输入关键字查找...\"}\r\n                                classes={{\r\n                                    root: classes.inputRoot,\r\n                                    input: classes.inputInput,\r\n                                }}\r\n                                value={this.state.key}\r\n                                onChange={e => this.setState({key:e.target.value})}/>\r\n                            <Button className={classes.clearBtn}\r\n                                    onClick={()=>{this.props.clearAndReset();this.setState({key:''})}}\r\n                            >\r\n                                x\r\n                            </Button>\r\n                        </div>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n        keyWord: state.Search.keyWord,\r\n        by: state.Search.by,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        searchBooks: res => {\r\n            dispatch({type:\"SHOW_BOOK\",result:res});\r\n            dispatch({type:\"SET_TOTAL\",total:res.count});\r\n        },\r\n        clearAndReset: async () => {\r\n            await dispatch({type:\"RESET_KEY\"});\r\n            dispatch({type:\"RESET_PAGE\"});\r\n            dispatch({type:\"UPDATE\"});\r\n        },\r\n        switchBy: () => dispatch({type:\"SWITCH_BY\"}),\r\n        setKey: (key) => dispatch({type:\"SET_KEY\", keyWord:key}),\r\n        searchBtnClick: () => {dispatch({type:\"RESET_PAGE\"});}\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SearchBar)));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport {connect} from \"react-redux\";\r\n\r\nconst styles = theme => (\r\n    {\r\n        button:{\r\n            padding: theme.spacing.unit * 2,\r\n            textAlign: 'center',\r\n            color: theme.palette.text.secondary,\r\n            margin: theme.spacing.unit,\r\n            fontSize: '18px',\r\n        },\r\n        root:{\r\n            flexGrow: 1,\r\n        },\r\n    }\r\n);\r\n\r\nclass ChoosePage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const {classes, isManager, _id} = this.props;\r\n        return (\r\n            <div className={classes.root}>\r\n                <Grid container spacing={24} alignItems=\"center\">\r\n                    {isManager?\r\n                        <React.Fragment>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href='#/all-books'>图书管理</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href='#/manage-users'>用户管理</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href=\"#/order\">订单管理</Button>\r\n                            </Grid>\r\n                        </React.Fragment>\r\n                    :\r\n                        <React.Fragment>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} onClick={()=>this.props.update()}>所有图书</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true}>新书推荐</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href=\"#/order\" disabled={_id===''}>我的订单</Button>\r\n                            </Grid>\r\n                        </React.Fragment>}\r\n                </Grid>\r\n                <Divider/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        _id: state.Login._id,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        update: ()=>dispatch({type:\"UPDATE\"})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(ChoosePage));","import React from 'react';\r\nimport Header from '../Header';\r\nimport SearchBar from './SearchBar';\r\nimport ChoosePage from './ChoosePage';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n//import {connect } from \"react-redux\";\r\n\r\nconst styles = theme => ({\r\n    main:{\r\n        backgroundColor:theme.palette.secondary.main,\r\n\r\n    }\r\n\r\n});\r\n\r\n\r\n\r\nclass HomePage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <React.Fragment>\r\n                <Header/>\r\n                <SearchBar/>\r\n                <ChoosePage/>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(HomePage);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {Link} from 'react-router-dom';\r\nimport {Login} from '../../agent';\r\nimport {connect} from \"react-redux\";\r\nimport {IconButton} from \"@material-ui/core\";\r\nimport {Delete} from \"@material-ui/icons\";\r\n\r\nconst styles = {\r\n    card: {\r\n        maxWidth: 170,\r\n    },\r\n    media: {\r\n        height: 250,\r\n    },\r\n    author:{\r\n        color:'gray'\r\n    },\r\n    deleteButton:{\r\n        //position:'absolute',\r\n        //float:'right',\r\n        padding: '6px',\r\n        marginLeft: '10px'\r\n    }\r\n};\r\n\r\nclass BookCard extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const { classes,book, isManager, _id, deleteBook} = this.props;\r\n        return (\r\n            <Card className={classes.card}>\r\n                <CardActionArea>\r\n                    <CardMedia\r\n                        className={classes.media}\r\n                        image={book.pictureUrl}\r\n                        title=\"Contemplative Reptile\"\r\n                    />\r\n\r\n                    <CardContent>\r\n                        <Typography gutterBottom variant=\"h6\" component=\"h4\">\r\n                            {book.bookname}\r\n                        </Typography>\r\n                        <Typography component=\"p\" className={classes.author}>\r\n                            {book.author}\r\n                        </Typography>\r\n                    </CardContent>\r\n                </CardActionArea>\r\n                <CardActions>\r\n                    <Button size=\"small\" color=\"primary\">\r\n                        {book.price}\r\n                    </Button>\r\n                    {!isManager?\r\n                        <Link to={'book/' + book.isbn}>\r\n                            详情\r\n                        </Link>:\r\n                        <Link to={'update/' + book.isbn}>\r\n                            修改\r\n                        </Link>\r\n                    }\r\n                    {\r\n                        isManager?\r\n                            <IconButton className={classes.deleteButton}\r\n                            onClick={()=>deleteBook(_id, book.bookname, book.isbn)}>\r\n                                <Delete/>\r\n                            </IconButton>\r\n                            :null\r\n                    }\r\n                </CardActions>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        _id: state.Login._id\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(BookCard));\r\n\r\n","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport DraftsIcon from '@material-ui/icons/Drafts';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport StarBorder from '@material-ui/icons/StarBorder';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '100%',\r\n        //maxWidth: 200,\r\n        height: '500px',\r\n        marginLeft: theme.spacing.unit * 3,\r\n        backgroundColor: theme.palette.secondary.elight,\r\n        float:'left',\r\n    },\r\n    nested: {\r\n        paddingLeft: theme.spacing.unit * 4,\r\n    },\r\n});\r\n\r\nclass Catalog extends React.Component {\r\n    state = {\r\n        open: true,\r\n    };\r\n\r\n    handleClick = () => {\r\n        this.setState(state => ({ open: !state.open }));\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <List\r\n                component=\"nav\"\r\n                subheader={<ListSubheader component=\"div\">类别</ListSubheader>}\r\n                className={classes.root}\r\n            >\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <SendIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"语文\" />\r\n                </ListItem>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"数学\" />\r\n                </ListItem>\r\n                <ListItem button onClick={this.handleClick}>\r\n                    <ListItemIcon>\r\n                        <InboxIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"英语\" />\r\n                    {this.state.open ? <ExpandLess /> : <ExpandMore />}\r\n                </ListItem>\r\n                <Collapse in={this.state.open} timeout=\"auto\" unmountOnExit>\r\n                    <List component=\"div\" disablePadding>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"小学\" />\r\n                        </ListItem>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"初中\" />\r\n                        </ListItem>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"高中\" />\r\n                        </ListItem>\r\n                    </List>\r\n                </Collapse>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"物理\" />\r\n                </ListItem>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"化学\" />\r\n                </ListItem>\r\n            </List>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(Catalog);","import React from \"react\";\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\nimport {Button,Toolbar} from \"@material-ui/core\";\r\nimport {connect} from \"react-redux\";\r\n\r\nclass Pagination extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const {total,perPageNum,isManager,curPage} = this.props;\r\n        const allPage = Math.ceil(total / perPageNum) || 1;\r\n        return (\r\n            //allPage > 1 &&\r\n            <Toolbar>\r\n                <div>\r\n                    {\r\n                        `${(curPage - 1) * perPageNum + 1}-${curPage * perPageNum<total?curPage * perPageNum:total} of ${allPage} Pages`\r\n                    }\r\n                </div>\r\n                <div style={{marginLeft: '200px'}}>\r\n                    {\r\n                        <Button primary key=\"prev\" label=\"上一页\" disabled={curPage <= 1}\r\n                                onClick={() => this.props.lastPage()}>\r\n                            <ChevronLeft/>\r\n                            上一页\r\n                        </Button>\r\n                    }\r\n                    {\r\n                        `当前页：${curPage}`\r\n                    }\r\n                    {\r\n                        <Button primary key=\"next\" label=\"下一页\" disabled={curPage === allPage}\r\n                                onClick={() => this.props.nextPage()} labelPosition=\"before\">\r\n                            下一页\r\n                            <ChevronRight/>\r\n                        </Button>\r\n                    }\r\n                </div>\r\n                {isManager?\r\n                    <div style={{marginLeft:'400px'}}>\r\n                        <Button size=\"large\" variant=\"outlined\" href=\"#/add-new-book\">\r\n                            新增图书\r\n                        </Button>\r\n                    </div>\r\n                :null}\r\n            </Toolbar>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        total: state.Page.total,\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n    }\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        nextPage: ()=>dispatch({type: \"NEXT_PAGE\"}),\r\n        lastPage: ()=>dispatch({type: \"LAST_PAGE\"}),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pagination);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport ChoosePage from '../Main/ChoosePage';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport BookCard from './BookCard';\r\nimport Catalog from '../Main/Catalog';\r\nimport Pagination from './Pagination';\r\nimport {connect} from \"react-redux\";\r\nimport {Book, Manage} from \"../../agent\";\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n      minWidth:'900px'\r\n    },\r\n    root: {\r\n        position: 'relative',\r\n        paddingTop: theme.spacing.unit,\r\n        paddingLeft: theme.spacing.unit * 5,\r\n        backgroundColor: theme.palette.common.paper,\r\n    },\r\n    bookCard:{\r\n        marginLeft: theme.spacing.unit * 4,\r\n        position: 'relative',\r\n        display: 'inline-block',\r\n        width:'200px',\r\n        height: '250px',\r\n        marginBottom: theme.spacing.unit * 15,\r\n    },\r\n\r\n});\r\n\r\nclass BooksPage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.bookPageOnChange = this.bookPageOnChange.bind(this);\r\n        this.deleteBook = this.deleteBook.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Book.showBooks(this.props.curPage,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);\r\n        return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n    }\r\n    componentWillReceiveProps(nextProps, nextContext) {\r\n        if (this.props.curPage!==nextProps.curPage || this.props.update!==nextProps.update)\r\n        {\r\n            this.bookPageOnChange(nextProps.curPage);\r\n            console.log(this.props.update!==nextProps.update);\r\n            console.log(this.props.keyWord);\r\n        }\r\n    }\r\n\r\n    bookPageOnChange(page){\r\n        if (this.props.keyWord===\"\" || this.props.keyWord===undefined)\r\n        {\r\n            Book.showBooks(page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n        }\r\n        else\r\n        {\r\n            if (this.props.by === 'isbn') {\r\n                Book.getBookByisbn(this.props.keyWord,page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n            } else {\r\n                Book.getBookByName(this.props.keyWord,page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteBook(_id, bookname, isbn) {\r\n        Manage.deleteABook(_id, bookname, isbn).then(this, this.props.deleteBook(isbn)).catch(error=>alert(error.response.body.msg));\r\n        this.forceUpdate();\r\n    }\r\n        render() {\r\n        const {classes,books} = this.props;\r\n            return (\r\n                <div className={classes.superRoot}>\r\n                    <Header/>\r\n                    <SearchBar/>\r\n                    <ChoosePage/>\r\n                    <Grid container spacing={0}>\r\n                        <Grid item xs={2}>\r\n                            <Catalog/>\r\n                        </Grid>\r\n                        <Grid item xs={9} wrap=\"wrap\">\r\n                            {\r\n                                books!==undefined?\r\n                                    <div className={classes.root}>\r\n                                        {\r\n                                            books.map((book) => (\r\n                                                <div className={classes.bookCard}>\r\n                                                    <BookCard book={book} deleteBook={this.deleteBook}/>\r\n                                                </div>\r\n                                            ))\r\n                                        }\r\n                                    </div>:\r\n                                    <p className={classes.root}>没有符合条件的书籍</p>\r\n                            }\r\n\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Pagination/>\r\n                </div>\r\n            );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        books: state.BookDetail.books,\r\n        update: state.BookDetail.update,\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n        keyWord: state.Search.keyWord,\r\n        by: state.Search.by,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        storePageBooks: res => dispatch({type:\"SHOW_BOOK\",result:res}),\r\n        deleteBook: isbn=>dispatch({type:\"DELETE_BOOK\",isbn:isbn}),\r\n        setTotal: total=>dispatch({type:\"SET_TOTAL\",total:total})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(BooksPage));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {Button} from \"@material-ui/core\";\r\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\r\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\r\nimport RestoreIcon from '@material-ui/icons/Restore';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport {connect} from \"react-redux\";\r\nimport {Book,Order} from '../../agent';\r\n\r\nconst styles = theme => ({\r\n    superRoot: {\r\n        minWidth: '800px',\r\n    },\r\n    root: {\r\n        position: 'relative',\r\n        paddingTop: theme.spacing.unit * 3,\r\n        paddingLeft: '8%',\r\n        paddingRight: '3%',\r\n        height: '350px',\r\n        backgroundColor: theme.palette.common.paper,\r\n    },\r\n    left: {\r\n        height: '250px',\r\n        padding: theme.spacing.unit,\r\n        textAlign: 'center',\r\n        position: 'absolute',\r\n        width: '18%',\r\n        backgroundColor: '#ccc'\r\n    },\r\n    middle: {\r\n        height: '200px',\r\n        textAlign: 'left',\r\n        marginLeft: '21%',\r\n        width: '49%',\r\n        position: 'absolute',\r\n        whiteSpace: 'pre',\r\n    },\r\n    right: {\r\n        height: '200px',\r\n        border: '1px dashed #fab',\r\n        lineHeight: '40px',\r\n        //backgroundColor: 'purple',\r\n        width: '15%',\r\n        position: 'absolute',\r\n        marginLeft: '75%',\r\n        textAlign: 'center',\r\n        fontSize: '25px',\r\n        color: '#2aa',\r\n        padding: '10px',\r\n    },\r\n    price: {\r\n        backgroundColor: '#689',\r\n        color: '#922',\r\n        width: '90%',\r\n        fontSize: '28px',\r\n        margin: '10px 0',\r\n        padding: '30px'\r\n    },\r\n    summary: {\r\n        marginTop: theme.spacing.unit,\r\n        marginBottom: theme.spacing.unit * 2,\r\n        height: 'auto',\r\n        lineHeight: '20px',\r\n\r\n    },\r\n    summarySpan: {\r\n        width: '200px',\r\n        whiteSpace: 'normal',\r\n        wordWrap: 'break-word',\r\n        wordBreak: 'break-all',\r\n        overflow: 'hidden',\r\n    },\r\n    inputNum: {\r\n        width: '40px',\r\n        height: '30px',\r\n    },\r\n    addBtn: {\r\n        backgroundColor: '#f88',\r\n        marginLeft: theme.spacing.unit,\r\n        fontSize: '18px',\r\n        color: 'white',\r\n    },\r\n    buyBtn: {\r\n        marginLeft: theme.spacing.unit * 2,\r\n        backgroundColor: '#fee',\r\n        fontSize: '18px',\r\n        color: '#f48',\r\n        fontWeight: 'normal'\r\n    },\r\n    body: {\r\n        position: \"relative\",\r\n        marginTop: '10px',\r\n        backgroundColor: '#d39',\r\n        marginLeft: '50px',\r\n    },\r\n});\r\n\r\nclass BookDetail extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            value: 0,\r\n        };\r\n    }\r\n    handleChange = (event, value) => {\r\n        this.setState({ value });\r\n    };\r\n    render() {\r\n        const {classes, books, _id} = this.props;\r\n        let targetisbn = parseInt(this.props.match.params.isbn);\r\n        const [book] = books.filter(book=>book.isbn===targetisbn);\r\n        let numValue;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <SearchBar/>\r\n                <div className={classes.root}>\r\n                    <div className={classes.left}>\r\n                        <img src={book.pictureUrl} alt=\"别买了，这书连封面都没有\"\r\n                             width=\"100%\" height=\"100%\"/>\r\n                    </div>\r\n                    <div className={classes.middle}>\r\n                        <Typography variant=\"h4\">{book.bookname}</Typography>\r\n                        <Divider/>\r\n                        <Typography variant=\"body1\" color=\"inherit\">\r\n                            作者：{book.author}\r\n                            {\"       \"}\r\n                            库存：{book.stockNum}\r\n                        </Typography>\r\n                        <div className={classes.price}>\r\n                            ￥ {book.price}\r\n                        </div>\r\n                        <div className={classes.summary}>\r\n                            <span className={classes.summarySpan}>\r\n                                {book.summary}\r\n                            </span>\r\n                        </div>\r\n                        <input type=\"number\" min=\"1\" max={book.stockNum} className={classes.inputNum}\r\n                               ref={ref => numValue = ref}\r\n                        />\r\n                        <Button className={classes.addBtn} onClick={\r\n                            () => (_id === '' ? alert(\"请先登录\") :\r\n                                    (numValue.value > book.stockNum ? alert(\"库存不足\") :\r\n                                        (numValue.value <= 0 || numValue.value === 'undefined' ? alert(\"请正确填写数量\") :\r\n                                            this.props.addToCart(_id, book.bookname, numValue.value, book.isbn)))\r\n                            )\r\n                        }>\r\n                            加入购物车\r\n                        </Button>\r\n                        <Button className={classes.buyBtn} onClick={\r\n                            () => (_id === '' ? alert(\"请先登录\") :\r\n                                    (numValue.value > book.stockNum ? alert(\"库存不足\") :\r\n                                        (numValue.value <= 0 || numValue.value === 'undefined' ? alert(\"请正确填写数量\") :\r\n                                            this.props.buyNow(_id, [{\r\n                                                \"bookname\": book.bookname,\r\n                                                \"num\": numValue.value,\r\n                                                \"isbn\": book.isbn\r\n                                            }], \"buy directly\")))\r\n                            )\r\n                        }>\r\n                            立即购买\r\n                        </Button>\r\n                    </div>\r\n                    <div className={classes.right}>\r\n                        广告位招租：1元/条\r\n                        --客天涯是一个大帅b\r\n                    </div>\r\n\r\n                </div>\r\n                <div className={classes.body}>\r\n                    <BottomNavigation\r\n                        value={this.state.value}\r\n                        onChange={this.handleChange}\r\n                        showLabels\r\n                    >\r\n                        <BottomNavigationAction label=\"商品评论\" icon={<RestoreIcon/>}/>\r\n                        <BottomNavigationAction label=\"猜你喜欢\" icon={<FavoriteIcon/>}/>\r\n                        <BottomNavigationAction label=\"附近的人\" icon={<LocationOnIcon/>}/>\r\n                    </BottomNavigation>\r\n                    <Divider/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        books: state.BookDetail.books,\r\n        _id: state.Login._id,\r\n    }\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        addToCart: (_id, bookname, num, isbn) => Book.addToCart(_id, bookname, num, isbn).then(dispatch({\r\n            type: \"ADD_TO_CART\",\r\n            bookname: bookname,\r\n            num: num,\r\n            isbn: isbn\r\n        })).then(alert(\"加入购物车成功！\")).catch(error=>alert(error.response.body.msg)),\r\n        buyNow: (_id, booksArr, mode) => Order.generateAnOrder(_id,booksArr,mode)\r\n            .then(alert(\"购买成功！\")).catch(error=>alert(error.response.body.msg)),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(BookDetail));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport {Link} from 'react-router-dom';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Header from '../Header';\r\nimport {Book, Order} from \"../../agent\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ShoppingCart extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {cart: []};\r\n        this.removeButtonClick = this.removeButtonClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Book.showCart(this.props._id).then(res=> this.setState({cart:res.books})).catch(err=>alert(err.response.body.msg));\r\n    }\r\n\r\n    removeButtonClick = (_id, bookname, isbn) =>\r\n        Book.removeFromCart(_id, bookname, isbn).then(() => {\r\n                const oldCart = this.state.cart;\r\n                console.log(oldCart);\r\n                const newCart = oldCart.filter(book=>isbn!==book.isbn);\r\n                console.log(newCart);\r\n                this.setState({cart: newCart});\r\n            }\r\n        ).catch(err=>alert(\"移除书失败！\"));\r\n\r\n    render() {\r\n        const {classes/*, removeButtonClick*/} = this.props;\r\n        const {cart} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <div className={classes.root}>\r\n                    {cart.map(book =>\r\n                        <React.Fragment key={book.isbn}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"Book\" children=\"书\"/>\r\n                                <Typography variant=\"h6\">{book.isbn}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{book.bookname}</Typography>\r\n                            <Typography className={classes.summary}>{\"数量：\" + book.num}</Typography>\r\n                            <Link to={'book/' + book.isbn} className={classes.link}>详情</Link>\r\n                            <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                                    onClick={() => this.removeButtonClick(this.props._id, book.bookname, book.isbn)}>\r\n                                不要你了\r\n                                <DeleteIcon className={classes.rightIcon}/>\r\n                            </Button>\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                    )}\r\n                </div>\r\n                <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                        onClick={() => Order.generateAnOrder(this.props._id, this.state.cart, \"buy by cart\").then(this.setState({cart:[]}))\r\n                            .catch(err=>alert(err.res.body.msg))}>\r\n                    结算\r\n                    <DeleteIcon className={classes.rightIcon}/>\r\n                </Button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShoppingCart.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    const {Login/*, BookAndNum*/} = state;\r\n    return {_id: Login._id/*, cart:BookAndNum.books*/};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        /*removeButtonClick: (_id, bookname, isbn) => Book.removeFromCart(_id, bookname, isbn).then(dispatch({\r\n            type: 'REMOVE_FROM_CART',\r\n            isbn: isbn\r\n        })).catch(() => alert('delete article failed, please try again')),*/\r\n        //storeCart: res=> dispatch({type:\"SHOW_CART\",result:res})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(ShoppingCart));\r\n","import {createMuiTheme} from '@material-ui/core/styles';\r\nimport {pink, purple, lightBlue} from '@material-ui/core/colors';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            elight: pink[50],\r\n            light: pink[200],\r\n            main: pink[500],\r\n            dark: pink[800],\r\n        },\r\n        secondary: {\r\n            elight:lightBlue[50],\r\n            light: lightBlue[200],\r\n            main: lightBlue[500],\r\n            dark: lightBlue[800],\r\n        },\r\n    },\r\n    typography: {\r\n        fontFamily: \"Roboto\",\r\n    },\r\n    shape: {\r\n        borderRadius: 8,\r\n    }\r\n});\r\n\r\nexport default theme;","import React from 'react';\r\nimport Header from './Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Button from '@material-ui/core/Button';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../theme';\r\nimport {User} from \"../agent\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst styles = theme => ({\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 400,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n\r\n});\r\n\r\nclass SignUp extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {username:'',password:'',confirmPass:'',email:''};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <Header/>\r\n                <main className={this.props.classes.main}>\r\n                    <Paper className={this.props.classes.paper}>\r\n                        <AccountCircle/>\r\n                        <Typography component=\"h1\" variant=\"h5\">\r\n                            Sign up\r\n                        </Typography>\r\n                        <form onSubmit={event => {\r\n                            event.preventDefault();\r\n                            if (this.state.password === this.state.confirmPass) {\r\n                                this.props.checkAccount(this.state.username, this.state.password, this.state.email);\r\n                            } else {\r\n                                alert('前后密码不一致');\r\n                            }\r\n                        }}>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"username\">UserName</InputLabel>\r\n                                <Input\r\n                                    id=\"username\"\r\n                                    name=\"username\"\r\n                                    value={this.state.username}\r\n                                    onChange={this.handleInputChange('username')}\r\n                                    autoFocus\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    value={this.state.password}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('password')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"confirmPass\">confirm your password</InputLabel>\r\n                                <Input\r\n                                    id=\"confirmPass\"\r\n                                    name=\"confirmPass\"\r\n                                    value={this.state.confirmPass}\r\n                                    //autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('confirmPass')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"email\">email</InputLabel>\r\n                                <Input\r\n                                    id=\"email\"\r\n                                    name=\"email\"\r\n                                    value={this.state.email}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('email')}\r\n                                    type=\"email\"\r\n                                />\r\n                            </FormControl>\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                            >\r\n                                Sign up\r\n                            </Button>\r\n                        </form>\r\n                    </Paper>\r\n                </main>\r\n            </MuiThemeProvider>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        checkAccount: (username, password, email) => {\r\n            User.signup(username, password, email).then(res=>dispatch({type: \"SIGN_UP\"})).catch(error=>alert(error.response.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(SignUp));","import React from 'react';\r\nimport Header from '../Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../../theme';\r\nimport {connect} from \"react-redux\";\r\nimport request from 'superagent';\r\nimport {Manage} from \"../../agent\";\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport NumberFormat from 'react-number-format';\r\n\r\n\r\nconst styles = theme => ({\r\n    supermain:{\r\n        minWidth: '650px',\r\n    },\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(800 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 800,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n    submitButton:{\r\n        float:'right',\r\n    },\r\n    imgButton:{\r\n        fullWidth: 'true',\r\n        backgroundColor: '#fff',\r\n        outline: 'none',\r\n        borderWidth: '0px',\r\n        borderRadius: '3px',\r\n    },\r\n    input:{\r\n        display:'none'\r\n    },\r\n    img: {\r\n        width: '120px',\r\n        height: '170px',\r\n    },\r\n    bookname:{\r\n        display: 'block',\r\n    },\r\n    author:{\r\n\r\n    },\r\n    head:{\r\n        float: 'left',\r\n        height: '170px',\r\n    },\r\n    cover:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        float: 'right',\r\n        height: '170px',\r\n        width: '120px',\r\n        border: '1px dashed blue',\r\n    },\r\n    price:{\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing.unit,\r\n    },\r\n    pan:{\r\n        float: 'left',\r\n        height: '170px',\r\n        marginLeft: theme.spacing.unit * 4,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n});\r\n\r\n//连接cloudinary的东西\r\nconst CLOUDINARY_UPLOAD_PRESET = 'cvtoheob';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dbqbt0cli/upload';\r\n\r\n//格式化stockNum输入\r\nfunction NumberFormatCustom(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"* \"\r\n        />\r\n    );\r\n}\r\n\r\nfunction NumberFormatCustom2(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"￥\"\r\n        />\r\n    );\r\n}\r\n\r\n\r\nclass AddNewBook extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {bookname: '', summary: '', uploadImgUrl: '', price: '0', author: '', stockNum: '0'};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n        this.onImageDrop = this.onImageDrop.bind(this);\r\n        this.handleImageUpload = this.handleImageUpload.bind(this);\r\n    }\r\n\r\n    onImageDrop(files) {\r\n        this.handleImageUpload(files[0]);\r\n    }\r\n\r\n    handleImageUpload(file) {\r\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                console.log(err);\r\n            }\r\n            if (response.body.secure_url !== '') {\r\n                this.setState({\r\n                    uploadImgUrl: response.body.secure_url\r\n                });\r\n                console.log(response.body.secure_url);\r\n                //this.forceUpdate();\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <div className={this.props.classes.supermain}>\r\n                    <Header/>\r\n                    <main className={this.props.classes.main}>\r\n                        <Paper className={this.props.classes.paper}>\r\n                            <form onSubmit={\r\n                                e => {\r\n                                    e.preventDefault();\r\n                                    this.props.addNewBook(\r\n                                        {\r\n                                            \"bookname\": this.state.bookname,\r\n                                            \"stockNum\": parseInt(this.state.stockNum),\r\n                                            \"summary\": this.state.summary,\r\n                                            \"pictureUrl\": this.state.uploadImgUrl,\r\n                                            \"author\": this.state.author,\r\n                                            \"price\": parseFloat(this.state.price)\r\n                                        }\r\n                                    )\r\n                                }\r\n                            }>\r\n                                <div className={this.props.classes.head}>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.bookname}>\r\n                                        <InputLabel htmlFor=\"bookname\">Book Name</InputLabel>\r\n                                        <Input\r\n                                            id=\"bookname\"\r\n                                            name=\"bookname\"\r\n                                            value={this.state.bookname}\r\n                                            onChange={this.handleInputChange('bookname')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.author}>\r\n                                        <InputLabel htmlFor=\"author\">Author</InputLabel>\r\n                                        <Input\r\n                                            id=\"author\"\r\n                                            name=\"author\"\r\n                                            value={this.state.author}\r\n                                            onChange={this.handleInputChange('author')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                </div>\r\n                                <div className={this.props.classes.pan}>\r\n                                    <TextField\r\n                                        className={this.props.classes.price}\r\n                                        label=\"Price\"\r\n                                        value={this.state.price}\r\n                                        onChange={this.handleInputChange('price')}\r\n                                        id=\"formatted-numberformat-price\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom2,\r\n                                        }}\r\n                                    />\r\n                                    <TextField\r\n                                        //className={this.props.classes.formControl}\r\n                                        label=\"Stock Number\"\r\n                                        value={this.state.stockNum}\r\n                                        onChange={this.handleInputChange('stockNum')}\r\n                                        id=\"formatted-numberformat-stockNum\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom,\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                                <div className={this.props.classes.cover}>\r\n                                    <input accept=\".jpg,.jpeg,.png \" className={this.props.classes.input}\r\n                                           id=\"icon-button-file\" type=\"file\"\r\n                                           ref={ref => this.image = ref} onChange={event => {\r\n                                        if (event.target.files.length !== 0) {\r\n                                            this.onImageDrop(event.target.files);\r\n                                        }\r\n                                    }\r\n                                    }/>\r\n                                    <button className={this.props.classes.imgButton} onClick={() => this.image.click()}\r\n                                    type=\"button\">\r\n                                        {this.state.uploadImgUrl === '' ?\r\n                                            <p>pick cover</p> :\r\n                                            <img className={this.props.classes.img} src={this.state.uploadImgUrl}/>}\r\n                                    </button>\r\n                                </div>\r\n                                <TextField margin=\"normal\" required fullWidth multiline\r\n                                           label=\"summary\" rows={6} variant='outlined'\r\n                                           id=\"summary\" placeholder=\"summary of the book...\"\r\n                                           value={this.state.summary}\r\n                                           onChange={this.handleInputChange('summary')}\r\n                                />\r\n                                <Button type=\"submit\" variant=\"contained\" color=\"primary\"\r\n                                        className={this.props.classes.submitButton}>\r\n                                    提交\r\n                                </Button>\r\n                            </form>\r\n                        </Paper>\r\n                    </main>\r\n                </div>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n        //authToken: state.Login.token,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        addNewBook: (book) => {\r\n            Manage.addABook(book)\r\n                .then(res=>dispatch({type:'ADD_BOOK',book:book}))\r\n                .catch(error=>alert(error.response.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(AddNewBook));","import React from 'react';\r\nimport Header from '../Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../../theme';\r\nimport {connect} from \"react-redux\";\r\nimport request from 'superagent';\r\nimport {Manage} from \"../../agent\";\r\nimport NumberFormat from 'react-number-format';\r\n\r\n\r\nconst styles = theme => ({\r\n    supermain:{\r\n        minWidth: '650px',\r\n    },\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(800 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 800,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n    submitButton:{\r\n        float:'right',\r\n    },\r\n    imgButton:{\r\n        fullWidth: 'true',\r\n        backgroundColor: '#fff',\r\n        outline: 'none',\r\n        borderWidth: '0px',\r\n        borderRadius: '3px',\r\n    },\r\n    input:{\r\n        display:'none'\r\n    },\r\n    img: {\r\n        width: '120px',\r\n        height: '170px',\r\n    },\r\n    bookname:{\r\n        display: 'block',\r\n    },\r\n    author:{\r\n\r\n    },\r\n    head:{\r\n        float: 'left',\r\n        height: '170px',\r\n    },\r\n    cover:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        float: 'right',\r\n        height: '170px',\r\n        width: '120px',\r\n        border: '1px dashed blue',\r\n    },\r\n    price:{\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing.unit,\r\n    },\r\n    pan:{\r\n        float: 'left',\r\n        height: '170px',\r\n        marginLeft: theme.spacing.unit * 4,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n});\r\n\r\n//连接cloudinary的东西\r\nconst CLOUDINARY_UPLOAD_PRESET = 'cvtoheob';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dbqbt0cli/upload';\r\n\r\n//格式化stockNum输入\r\nfunction NumberFormatCustom(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"* \"\r\n        />\r\n    );\r\n}\r\n\r\nfunction NumberFormatCustom2(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"￥\"\r\n        />\r\n    );\r\n}\r\n\r\n\r\nclass UpdateBook extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        const booksArr = this.props.booksArr;\r\n        let targetisbn = parseInt(this.props.match.params.isbn);\r\n        const [book] = booksArr.filter(book=>book.isbn===targetisbn);\r\n        this.state = {bookname: book.bookname, summary: book.summary, uploadImgUrl: book.pictureUrl,\r\n            price: book.price, author: book.author, stockNum: book.stockNum, isbn: targetisbn};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n        this.onImageDrop = this.onImageDrop.bind(this);\r\n        this.handleImageUpload = this.handleImageUpload.bind(this);\r\n    }\r\n\r\n    onImageDrop(files) {\r\n        this.setState({\r\n            uploadedFile: files[0]\r\n        });\r\n\r\n        this.handleImageUpload(files[0]);\r\n    }\r\n\r\n    handleImageUpload(file) {\r\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                console.error(err);\r\n            }\r\n            if (response.body.secure_url !== '') {\r\n                this.setState({\r\n                    uploadImgUrl: response.body.secure_url\r\n                });\r\n                console.log(response.body.secure_url);\r\n                //this.forceUpdate();\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <div className={this.props.classes.supermain}>\r\n                    <Header/>\r\n                    <main className={this.props.classes.main}>\r\n                        <Paper className={this.props.classes.paper}>\r\n                            <form onSubmit={\r\n                                e => {\r\n                                    e.preventDefault();\r\n                                    this.props.updateBook(\r\n                                        {\r\n                                            \"bookname\": this.state.bookname,\r\n                                            \"stockNum\": parseInt(this.state.stockNum),\r\n                                            \"summary\": this.state.summary,\r\n                                            \"pictureUrl\": this.state.uploadImgUrl,\r\n                                            \"author\": this.state.author,\r\n                                            \"price\": parseFloat(this.state.price),\r\n                                            \"isbn\": this.state.isbn\r\n                                        }\r\n                                    )\r\n                                }\r\n                            }>\r\n                                <div className={this.props.classes.head}>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.bookname}>\r\n                                        <InputLabel htmlFor=\"bookname\">Book Name</InputLabel>\r\n                                        <Input\r\n                                            id=\"bookname\"\r\n                                            name=\"bookname\"\r\n                                            value={this.state.bookname}\r\n                                            onChange={this.handleInputChange('bookname')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.author}>\r\n                                        <InputLabel htmlFor=\"author\">Author</InputLabel>\r\n                                        <Input\r\n                                            id=\"author\"\r\n                                            name=\"author\"\r\n                                            value={this.state.author}\r\n                                            onChange={this.handleInputChange('author')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                </div>\r\n                                <div className={this.props.classes.pan}>\r\n                                    <TextField\r\n                                        className={this.props.classes.price}\r\n                                        label=\"Price\"\r\n                                        value={this.state.price}\r\n                                        onChange={this.handleInputChange('price')}\r\n                                        id=\"formatted-numberformat-price\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom2,\r\n                                        }}\r\n                                    />\r\n                                    <TextField\r\n                                        //className={this.props.classes.formControl}\r\n                                        label=\"Stock Number\"\r\n                                        value={this.state.stockNum}\r\n                                        onChange={this.handleInputChange('stockNum')}\r\n                                        id=\"formatted-numberformat-stockNum\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom,\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                                <div className={this.props.classes.cover}>\r\n                                    <input accept=\".jpg,.jpeg,.png \" className={this.props.classes.input}\r\n                                           id=\"icon-button-file\" type=\"file\"\r\n                                           ref={ref => this.image = ref} onChange={event => {\r\n                                        if (event.target.files.length !== 0) {\r\n                                            this.onImageDrop(event.target.files);\r\n                                        }\r\n                                    }\r\n                                    }/>\r\n                                    <button className={this.props.classes.imgButton} onClick={() => this.image.click()}\r\n                                    type=\"button\">\r\n                                        {this.state.uploadImgUrl === '' ?\r\n                                            <p>pick cover</p> :\r\n                                            <img className={this.props.classes.img} src={this.state.uploadImgUrl}/>}\r\n                                    </button>\r\n                                </div>\r\n                                <TextField margin=\"normal\" required fullWidth multiline\r\n                                           label=\"summary\" rows={6} variant='outlined'\r\n                                           id=\"summary\" placeholder=\"summary of the book...\"\r\n                                           value={this.state.summary}\r\n                                           onChange={this.handleInputChange('summary')}\r\n                                />\r\n                                <Button type=\"submit\" variant=\"contained\" color=\"primary\"\r\n                                        className={this.props.classes.submitButton}>\r\n                                    更新\r\n                                </Button>\r\n                            </form>\r\n                        </Paper>\r\n                    </main>\r\n                </div>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n        booksArr: state.BookDetail.books\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        updateBook: (book) => {\r\n            Manage.updateABook(book)\r\n                .then(()=>dispatch({type:'UPDATE_BOOK',book:book}))\r\n                .catch((err)=>alert(err.res.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(UpdateBook));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Header from '../Header';\r\nimport {Manage} from \"../../agent\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ManageUser extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {users: []};\r\n        this.banButtonClick = this.banButtonClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Manage.showUsers().then(res=> this.setState({users:res.users})).catch(err=>alert(err.res.body.msg));\r\n    }\r\n\r\n    banButtonClick = (_id) =>\r\n        Manage.banAUser(_id).then(() => {\r\n                const oldUsers = this.state.users;\r\n                const newUsers = oldUsers.map(user=>{\r\n                    if (user._id === _id) {\r\n                        user.isBanned = !user.isBanned;\r\n                    }\r\n                    return user;\r\n                });\r\n\r\n                this.setState({users: newUsers});\r\n            }\r\n        ).catch(err=>alert(err.res.body.msg));\r\n\r\n    render() {\r\n        const {classes/*, removeButtonClick*/} = this.props;\r\n        const {users} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <div className={classes.root}>\r\n                    {users.map(user =>\r\n                        <React.Fragment key={user._id}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"用户\" children=\"user\"/>\r\n                                <Typography variant=\"h6\">{user._id}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{user.username}</Typography>\r\n                            {\r\n                                user.isManager?\r\n                                    <React.Fragment>\r\n                                        <Typography className={classes.summary}>\r\n                                            {user._id===1?\"超级管理员大Boss\":\"一般管理员\"}\r\n                                        </Typography>\r\n                                    </React.Fragment>\r\n                                    :\r\n                                    <React.Fragment>\r\n                                        <Typography className={classes.summary}>\r\n                                            普通用户\r\n                                        </Typography>\r\n                                        <Typography>\r\n                                            状态：\r\n                                            {user.isBanned?\"被禁用\":\"正常\"}\r\n                                        </Typography>\r\n                                        <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                                                onClick={() => this.banButtonClick(user._id)}>\r\n                                            {user.isBanned?\"解禁\":\"禁用\"}\r\n                                            <DeleteIcon className={classes.rightIcon}/>\r\n                                        </Button>\r\n                                    </React.Fragment>\r\n                            }\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nManageUser.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    //日后可用来记录是哪个管理员操作的\r\n    return {_id: state.Login._id/*, cart:BookAndNum.books*/};\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ManageUser));","import React from 'react';\r\nimport echarts from 'echarts/lib/echarts';\r\nimport 'echarts/lib/chart/bar';\r\nimport 'echarts/lib/chart/line';\r\nimport 'echarts/lib/component/tooltip';\r\nimport 'echarts/lib/component/title';\r\nimport 'echarts/lib/component/legend';\r\nimport 'echarts/lib/component/toolbox';\r\nimport 'echarts/lib/component/markPoint';\r\nimport 'echarts/lib/component/markLine';\r\n\r\n\r\nclass Chart extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.initEchart = this.initEchart.bind(this);\r\n    }\r\n    initEchart() {\r\n        // 初始化\r\n        var myChart = echarts.init(document.getElementById(this.props.chartId));\r\n        // 绘制图表\r\n        myChart.setOption({\r\n            title: { text: this.props.text },\r\n            tooltip : {\r\n                trigger: 'axis'\r\n            },\r\n            legend: {\r\n                data:[this.props.yname,]\r\n            },\r\n            toolbox: {\r\n                show : true,\r\n                feature : {\r\n                    dataView : {show: true, readOnly: false},\r\n                    magicType : {show: true, type: ['line', 'bar']},\r\n                    restore : {show: true},\r\n                    saveAsImage : {\r\n                        show: true,\r\n                        type: 'jpg'\r\n                    }\r\n                }\r\n            },\r\n            xAxis : [\r\n                {\r\n                    name : this.props.xname,\r\n                    type : 'category',\r\n                    data : this.props.data.xdata\r\n                }\r\n            ],\r\n            yAxis : [\r\n                {\r\n                    type : 'value'\r\n                }\r\n            ],\r\n            series : [\r\n                {\r\n                    name:this.props.yname,\r\n                    type:'bar',\r\n                    data: this.props.data.ydata,\r\n                    markPoint : {\r\n                        data : [\r\n                            {type : 'max', name: '最大值'},\r\n                            {type : 'min', name: '最小值'}\r\n                        ]\r\n                    },\r\n                    markLine : {\r\n                        data : [\r\n                            {type : 'average', name: '平均值'}\r\n                        ]\r\n                    }\r\n                },\r\n            ]\r\n        });\r\n    }\r\n    componentDidMount() {\r\n        this.initEchart();\r\n    }\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        this.initEchart();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id={this.props.chartId} style={{ width: 800, height: 500 }}></div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Chart;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport {connect} from \"react-redux\";\r\nimport {Order} from \"../../agent\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport Chart from './Chart';\r\nimport {Button} from \"@material-ui/core\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    },\r\n    price:{\r\n\r\n    },\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing.unit,\r\n        marginRight: theme.spacing.unit,\r\n        width: 200,\r\n    },\r\n});\r\n\r\n\r\n\r\nclass ShowStatistics extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            bookData:{\r\n                xdata: [],\r\n                ydata: [],\r\n                totalConsume: 0\r\n            },\r\n            userData:{\r\n                xdata:[],\r\n                ydata:[],\r\n            },\r\n            startTime:\"2017-08-01T05:20\",\r\n            endTime:\"2019-05-24T13:14\"\r\n        };\r\n        this.handleTextFieldChange = name => event =>{\r\n            this.setState({[name]:event.target.value})\r\n        };\r\n        this.checkBtnClick = this.checkBtnClick.bind(this);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.checkBtnClick()\r\n    }\r\n\r\n    checkBtnClick(){\r\n        const startTime = this.state.startTime.replace('T',' ') + ':00';\r\n        const endTime = this.state.endTime.replace('T',' ') + ':00';\r\n        Order.showStatistics(this.props._id, startTime, endTime).then(res=>{\r\n                const book = res.book;\r\n                const bookX = [];\r\n                const bookY = [];\r\n                for (var i in book){\r\n                    bookX.push(i);\r\n                    bookY.push(book[i]);\r\n                }\r\n                this.setState({bookData:{xdata: bookX,ydata: bookY,totalConsume: res.totalConsume}})\r\n                if (this.props.isManager){\r\n                    const user = res.user;\r\n                    const userX = [];\r\n                    const userY = [];\r\n                    for (var i in user){\r\n                        userX.push(i);\r\n                        userY.push(user[i]);\r\n                    }\r\n                    this.setState({userData:{xdata: userX,ydata: userY}})\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <form className={classes.container} noValidate>\r\n                    <TextField\r\n                        id=\"startTime\"\r\n                        label=\"startTime\"\r\n                        type=\"datetime-local\"\r\n                        value={this.state.startTime}\r\n                        className={classes.textField}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                        onChange={this.handleTextFieldChange('startTime')}\r\n                    />\r\n                </form>\r\n                <form className={classes.container} noValidate>\r\n                    <TextField\r\n                        id=\"endTime\"\r\n                        label=\"endTime\"\r\n                        type=\"datetime-local\"\r\n                        defaultValue={this.state.endTime}\r\n                        className={classes.textField}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                        onChange={this.handleTextFieldChange('endTime')}\r\n                    />\r\n                </form>\r\n                <Button onClick={()=>this.checkBtnClick()}>\r\n                    查询\r\n                </Button>\r\n                <Chart data={this.state.bookData} text={'书籍情况'} yname={'购买数量'} xname={'书籍isbn'} chartId={'main1'}/>\r\n                {\r\n                    this.props.isManager?\r\n                        <Chart data={this.state.userData} text={'用户情况'} yname={'花费金额'} xname={'用户id'} chartId={'main2'}/>\r\n                        :null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShowStatistics.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager:state.Login.isManager,\r\n        _id:state.Login._id,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ShowStatistics));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Header from '../Header';\r\nimport {connect} from \"react-redux\";\r\nimport {Order} from \"../../agent\";\r\nimport SearchBar from '../Main/SearchBar';\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    },\r\n    price:{\r\n\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ShowOrder extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {orders: []};\r\n    }\r\n\r\n    componentDidMount() {\r\n        Order.showOrder(this.props._id).then(res=> this.setState({orders:res.orders})).catch(error=>alert(error.response.body.msg));\r\n    }\r\n\r\n    orderFilter(order, keyWord) {\r\n        if (order.orderId.toString().indexOf(keyWord)!==-1\r\n            ||order.createTime.indexOf(keyWord)!==-1\r\n            ||order.totalPrice.toString().indexOf(keyWord)!==-1\r\n            )\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        const {orders} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <SearchBar/>\r\n                <div className={classes.root}>\r\n                    {orders.map(order => this.orderFilter(order, this.props.keyWord)?\r\n                        <React.Fragment key={order.orderId}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"Order\" children=\"订单\"/>\r\n                                <Typography variant=\"h6\">{order.orderId}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{order.createTime}</Typography>\r\n                            <div className={classes.summary}>\r\n                                {\r\n                                    JSON.parse(order.books).map(book=> {\r\n                                        return <Typography>\r\n                                                {book.bookname + \" * \" + book.num}\r\n                                        </Typography>;\r\n                                    })\r\n                                }\r\n                            </div>\r\n                            <Typography className={classes.price}>{\"总价：\" + order.totalPrice}</Typography>\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                        :null\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShowOrder.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        _id: state.Login._id/*, cart:BookAndNum.books*/,\r\n        keyWord: state.Search.keyWord,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ShowOrder));","import React from 'react';\r\nimport {HashRouter, Route, Switch} from 'react-router-dom';\r\nimport HomePage from './components/Main/HomePage';\r\nimport BooksPage from './components/Book/BooksPage';\r\nimport BookDetail from \"./components/Book/BookDetail\";\r\nimport ShoppingCart from \"./components/Shopping/ShoppingCart\";\r\nimport SignUp from './components/SignUp';\r\nimport Login from './components/Login';\r\nimport AddNewBook from './components/Book/AddNewBook';\r\nimport UpdateBook from './components/Book/UpdateBook';\r\nimport ManageUser from './components/Manage/ManageUser';\r\nimport ShowStatistics from './components/Shopping/ShowStatistics';\r\nimport ShowOrder from './components/Shopping/ShowOrder';\r\n\r\nconst BasicRoute = () => {\r\n    return (\r\n        <HashRouter>\r\n            <Switch>\r\n                <Route exact path=\"/\" component={/*HomePage*/BooksPage}/>\r\n                <Route exact path=\"/all-books\" component={BooksPage}/>\r\n                <Route exact path=\"/book/:isbn\" component={BookDetail}/>\r\n                <Route exact path=\"/cart\" component={ShoppingCart}/>\r\n                <Route exact path=\"/login\" component={Login}/>\r\n                <Route exact path=\"/signup\" component={SignUp}/>\r\n                <Route exact path=\"/add-new-book\" component={AddNewBook}/>\r\n                <Route exact path=\"/update/:isbn\" component={UpdateBook}/>\r\n                <Route exact path=\"/manage-users\" component={ManageUser}/>\r\n                <Route exact path=\"/order\" component={ShowOrder}/>\r\n                <Route exact path=\"/statistics\" component={ShowStatistics}/>\r\n            </Switch>\r\n        </HashRouter>\r\n    );\r\n};\r\n\r\nexport default BasicRoute;","import {combineReducers} from \"redux/es/redux\";\r\n\r\nfunction Login(state={_id:'',username:'',isManager:0},action) {\r\n    switch (action.type) {\r\n        case \"LOGIN\":\r\n            return action.result;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Redirect(state={redirectTo:null},action) {\r\n    switch (action.type) {\r\n        case 'REDIRECTED':\r\n            return {redirectTo: null};\r\n        case 'SIGN_UP':\r\n        case 'ADD_BOOK':\r\n        case 'LOGIN':\r\n        case \"UPDATE_BOOK\":\r\n            return {redirectTo: '/'};\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\nfunction BookDetail(state={books: [], update:false},action) {\r\n    switch (action.type) {\r\n        case \"UPDATE\":\r\n            const update = state.update;\r\n            return Object.assign({},{books:state.books, update: !update});\r\n        case \"SHOW_BOOK\":\r\n            //只存当前页的书\r\n            return Object.assign({},{books: action.result.books,update:state.update});\r\n        case \"ADD_BOOK\":\r\n            //action.book {\"bookname\":  ,\"stockNum\":  , \"summary\":  ,\"pictureUrl\":  ,\"price\":  ,\"author\":  ,\"isbn\":  }\r\n            const newState = Object.assign({}, state);\r\n            newState.books.push(action.book);\r\n            return newState;\r\n        case \"DELETE_BOOK\":\r\n            //action.isbn\r\n            const newState2 = Object.assign({}, state);\r\n            for (let i = 0; i < newState2.books.length; i++) {\r\n                if (newState2.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    newState2.books.splice(i, 1);\r\n                    return newState2;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            return state;\r\n        case \"UPDATE_BOOK\":\r\n            //action.book\r\n            const newState3 = Object.assign({}, state);\r\n            for (let i = 0; i < newState3.books.length; i++) {\r\n                if (newState3.books[i].bookname === action.book.bookname) {\r\n                    //book exits\r\n                    Object.assign(newState3.books[i],action.book);\r\n                    return newState3;\r\n                }\r\n            }\r\n            //book not exit\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction BookAndNum(state={books: []},action) {\r\n    switch (action.type) {\r\n        case \"SHOW_CART\":\r\n            return {books: action.result.books};\r\n        case \"ADD_TO_CART\":\r\n            //action.bookname action.num\r\n            const newState = Object.assign({}, state);\r\n            for (let i = 0; i < newState.books.length; i++) {\r\n                if (newState.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    newState.books[i].num += action.num;\r\n                    return newState;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            newState.books.push({\"bookname\": action.bookname, \"num\": action.num,\"isbn\":action.isbn});\r\n            return newState;\r\n        case \"REMOVE_FROM_CART\":\r\n            const nState = Object.assign({}, state);\r\n            //action.isbn\r\n            for (var i = 0; i < nState.books.length; i++) {\r\n                if (nState.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    nState.books.splice(i, 1);\r\n                    return nState;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Order(state={orders:[]},action) {\r\n    switch (action.type) {\r\n        case \"SHOW_ORDER\":\r\n            //action.result {orders:[{\"userId\":.....}]}\r\n            return {orders: action.result.orders};\r\n        case \"GENERATE_ORDER\":\r\n            //action.order {\"userId\":...}\r\n            const newState = Object.assign({}, state);\r\n            newState.orders.push(action.order);\r\n            return newState;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Page(state={curPage:1, perPageNum: 10, total: 0}, action) {\r\n    switch (action.type) {\r\n        case \"NEXT_PAGE\":\r\n            return Object.assign({}, state, {curPage: state.curPage + 1});\r\n        case \"LAST_PAGE\":\r\n            return Object.assign({}, state, {curPage: state.curPage - 1});\r\n        case \"RESET_PAGE\":\r\n            return Object.assign({}, state, {curPage: 1});\r\n        case \"SET_PPN\":\r\n            return Object.assign({}, state, {perPageNum: action.PPN});\r\n        case \"SET_TOTAL\":\r\n            return Object.assign({}, state, {total: action.total});\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Search(state={keyWord:'', by: 'isbn'}, action) {\r\n    switch (action.type) {\r\n        case \"SWITCH_BY\":\r\n            if (state.by === 'isbn') {\r\n                return Object.assign({}, state, {by: 'bookname'});\r\n            } else {\r\n                return Object.assign({}, state, {by: 'isbn'});\r\n            }\r\n        case \"SET_KEY\":\r\n            const newState = Object.assign({}, state, {keyWord: action.keyWord});\r\n            return newState;\r\n        case \"RESET_KEY\":\r\n            return Object.assign({}, state, {keyWord: ''});\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers(\r\n    {Login, Redirect, BookDetail, Order, Page, Search}\r\n);","import {createStore/*,applyMiddleware*/} from \"redux\";\r\nimport Reducers from './reducers';\r\n\r\nconst store = createStore(Reducers/*, applyMiddleware()*/);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport BasicRoute from './Routers';\r\nimport {Provider} from 'react-redux';\r\nimport theme from './theme';\r\nimport {MuiThemeProvider} from \"@material-ui/core/styles\";\r\nimport store from './configureStore';\r\n\r\ndocument.title = \"客天涯购书网\";\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <MuiThemeProvider theme={theme}>\r\n            <BasicRoute/>\r\n        </MuiThemeProvider>\r\n    </Provider>\r\n    , document.getElementById('root')\r\n);"],"sourceRoot":""}