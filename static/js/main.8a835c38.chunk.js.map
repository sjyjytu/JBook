{"version":3,"sources":["img/signin4.jpg","components/Header.js","agent.js","utils/usefulFunction.js","components/Main/SearchBar.js","components/Main/ChoosePage.js","components/Main/HomePage.js","components/Book/BookCard.js","components/Main/Catalog.js","components/Book/Pagination.js","components/Book/BooksPage.js","components/Book/Comments.js","components/Book/BookDetail.js","components/Shopping/ShoppingCart.js","theme.js","components/SignUp.js","components/Login.js","components/Book/AddNewBook.js","components/Book/UpdateBook.js","components/Manage/ManageUser.js","components/Shopping/Chart.js","components/Shopping/ShowStatistics.js","components/Shopping/ShowOrder.js","Routers.js","reducers.js","configureStore.js","index.js"],"names":["module","exports","__webpack_require__","p","Header","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","anchorEl","open","handleClose","setState","handleClick","event","currentTarget","handleClickLogin","handleCloseLogin","_this$props","classes","Login","react_default","a","createElement","className","root","AppBar_default","position","Toolbar_default","Typography_default","variant","color","grow","username","Button_default","button","href","Home_default","buttonIcon","Comment_default","_id","isManager","AccountCircle_default","ShoppingCart_default","aria-owns","undefined","aria-haspopup","onClick","Menu_default","id","Boolean","onClose","MenuItem_default","fullWidth","React","Component","connect","withStyles","theme","flexGrow","spacing","unit","marginLeft","marginRight","menuButton","hidden","display","axios","require","defaults","withCredentials","RootUrl","resBody","res","data","requests","url","get","then","body","params","post","delete","put","Book","showBooks","start","num","parseInt","addToCart","bookname","isbn","removeFromCart","showCart","getBookByisbn","getBookByName","Manage","addABook","book","deleteABook","updateABook","banAUser","showUsers","Order","showOrder","generateAnOrder","booksArr","mode","books","showStatistics","startTime","endTime","User","login","password","signup","email","Comment","showComment","addComment","userId","indexArr","comment_content","index","content","errorHandler","err","alert","response","msg","SearchBar","key","handleRadioChange","bind","assertThisInitialized","by","setKey","location","pathname","searchBtnClick","test","curPage","perPageNum","_this2","searchBooks","catch","window","e","switchBy","_this3","toolbar","Grid_default","container","alignItems","item","xs","title","noWrap","Fragment","index_es","checked","onChange","value","name","aria-label","checkedIcon","search","searchIcon","searchOnClick","Search_default","InputBase_default","placeholder","inputRoot","input","inputInput","target","clearBtn","clearAndReset","withRouter","Page","keyWord","Search","dispatch","type","result","total","count","_clearAndReset","asyncToGenerator","regenerator_default","mark","_callee2","wrap","_context2","prev","next","stop","apply","arguments","defineProperty","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","width","breakpoints","up","height","justifyContent","borderRadius","shape","backgroundColor","fade","palette","common","white","&:hover","float","down","primary","elight","overflow","radio","ChoosePage","update","disabled","Divider_default","padding","textAlign","text","secondary","margin","fontSize","HomePage","components_Header","Main_SearchBar","Main_ChoosePage","main","BookCard","deleteBook","Card_default","card","CardActionArea_default","Link","to","CardMedia_default","media","image","pictureUrl","CardContent_default","gutterBottom","component","author","CardActions_default","size","price","deleteButton","icons_index_es","maxWidth","Catalog","List_default","subheader","ListSubheader_default","ListItem_default","ListItemIcon_default","Send_default","ListItemText_default","inset","Drafts_default","MoveToInbox_default","ExpandLess_default","ExpandMore_default","Collapse_default","in","timeout","unmountOnExit","disablePadding","nested","StarBorder_default","Pagination","allPage","Math","ceil","concat","style","label","lastPage","ChevronLeft_default","nextPage","labelPosition","ChevronRight_default","BooksPage","bookPageOnChange","setTotal","storePageBooks","nextProps","nextContext","page","forceUpdate","_this4","superRoot","Main_Catalog","map","bookCard","Book_BookCard","Book_Pagination","BookDetail","minWidth","paper","marginBottom","Comments","handleClickOpen","slice","input_content","handleSubmit","history","push","handleContentChange","comments","commentTime","replace","substring","indexOf","replies","parentName","reply","length","subreply","Avatar_default","avatar","alt","children","getTime","showTree","comment","summary","fabiao","Dialog_default","aria-labelledby","DialogTitle_default","DialogContent_default","TextField_default","autoFocus","rows","multiline","DialogActions_default","marginTop","dark","handleChange","targetisbn","match","numValue","left","src","middle","stockNum","summarySpan","min","max","inputNum","ref","addBtn","buyBtn","buyNow","right","BottomNavigation_default","showLabels","BottomNavigationAction_default","icon","Restore_default","Favorite_default","LocationOn_default","Book_Comments","error","whiteSpace","border","lineHeight","wordWrap","wordBreak","fontWeight","ShoppingCart","removeButtonClick","newCart","cart","filter","link","Delete_default","rightIcon","divider","date","createMuiTheme","pink","light","lightBlue","typography","fontFamily","SignUp","confirmPass","handleInputChange","field","newState","assign","redirectTo","onRedirect","core_styles","Paper_default","onSubmit","preventDefault","checkAccount","FormControl_default","required","InputLabel_default","htmlFor","Input_default","autoComplete","Redirect","flexDirection","bgImg","submit","NumberFormatCustom","inputRef","other","objectWithoutProperties","number_format_default","getInputRef","onValueChange","values","thousandSeparator","prefix","NumberFormatCustom2","AddNewBook","uploadImgUrl","onImageDrop","handleImageUpload","files","file","request","end","secure_url","supermain","addNewBook","parseFloat","head","pan","InputProps","inputComponent","cover","accept","imgButton","click","img","submitButton","outline","borderWidth","formControl","UpdateBook","_booksArr$filter","slicedToArray","uploadedFile","console","updateBook","ManageUser","banButtonClick","newUsers","users","user","isBanned","Chart","initEchart","echarts","init","document","getElementById","chartId","setOption","tooltip","trigger","legend","yname","toolbox","show","feature","dataView","readOnly","magicType","restore","saveAsImage","xAxis","xname","xdata","yAxis","series","ydata","markPoint","markLine","prevProps","prevState","snapshot","ShowStatistics","bookData","totalConsume","userData","handleTextFieldChange","checkBtnClick","bookX","bookY","i","userX","userY","noValidate","textField","InputLabelProps","shrink","defaultValue","Shopping_Chart","flexWrap","ShowOrder","orders","order","orderId","toString","createTime","totalPrice","orderFilter","JSON","parse","BasicRoute","HashRouter","Switch","Route","exact","path","combineReducers","action","newState2","splice","newState3","PPN","store","createStore","Reducers","ReactDOM","render","es","Routers"],"mappings":"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","file":"static/js/main.8a835c38.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/signin4.d1971858.jpg\";","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Home from '@material-ui/icons/Home';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Comment from '@material-ui/icons/Comment';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n        marginRight: -theme.spacing.unit,\r\n    },\r\n    grow: {\r\n        flexGrow: theme.spacing.unit * 2,\r\n    },\r\n    button: {\r\n        marginRight: theme.spacing.unit * 5,\r\n    },\r\n    menuButton:{\r\n\r\n    },\r\n    hidden : {\r\n        display: 'none',\r\n    },\r\n    buttonIcon: {\r\n        marginRight: theme.spacing.unit * 0.5,\r\n    },\r\n});\r\n\r\nclass Header extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {anchorEl: null, open: false};\r\n        this.handleClose = () => {\r\n            this.setState({anchorEl: null});\r\n        };\r\n        this.handleClick = event => {\r\n            this.setState({anchorEl: event.currentTarget});\r\n        };\r\n        this.handleClickLogin = () => {\r\n            this.setState({ open: true });\r\n        };\r\n\r\n        this.handleCloseLogin = () => {\r\n            this.setState({ anchorEl: null, open: false });\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { classes,Login } = this.props;\r\n        const { anchorEl } = this.state;\r\n        return (\r\n            <div className={classes.root}>\r\n\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n                            欢迎，{Login.username !== '' ? Login.username : '请登录'}\r\n                        </Typography>\r\n                        <Button color=\"inherit\" className={classes.button} href=\"#\">\r\n                            <Home className={classes.buttonIcon}/>\r\n                            主页\r\n                        </Button>\r\n                        <Button color=\"inherit\" className={classes.button} href=\"http://www.ketianya.xyz/ketianya/#/\">\r\n                            <Comment className={classes.buttonIcon}/>\r\n                            论坛\r\n                        </Button>\r\n                        {Login._id !== \"\" ?\r\n                            <Button color=\"inherit\" className={classes.button} href=\"#/statistics\">\r\n                                <Home className={classes.buttonIcon}/>\r\n                                数据统计\r\n                            </Button>\r\n                            :null\r\n                        }\r\n                        {Login._id !== \"\" ?\r\n                            (\r\n                                Login.isManager ?\r\n                                    <Button color=\"inherit\" className={classes.button} href=\"#/manage-users\">\r\n                                        <AccountCircle className={classes.buttonIcon}/>\r\n                                        管理用户\r\n                                    </Button>\r\n                                    :\r\n                                    <Button color=\"inherit\" className={classes.button} href=\"#/cart\">\r\n                                        <ShoppingCart className={classes.buttonIcon}/>\r\n                                        购物车\r\n                                    </Button>\r\n                            ) : null\r\n                        }\r\n                        <Button\r\n                            aria-owns={anchorEl ? 'simple-menu' : undefined}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={this.handleClick}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <AccountCircle className={classes.buttonIcon}/>\r\n                            注册/登录\r\n                        </Button>\r\n                        <Menu\r\n                            id=\"simple-menu\"\r\n                            anchorEl={anchorEl}\r\n                            open={Boolean(anchorEl)}\r\n                            onClose={this.handleClose}\r\n                        >\r\n                            <MenuItem onClick={this.handleClose}>\r\n                                <Button color=\"inherit\" fullWidth href=\"#/login\">\r\n                                    登录\r\n                                </Button>\r\n                            </MenuItem>\r\n                            <MenuItem onClick={this.handleClose}>\r\n                                <Button color=\"inherit\" fullWidth href=\"#/signup\">\r\n                                    注册\r\n                                </Button>\r\n                            </MenuItem>\r\n                        </Menu>\r\n                    </Toolbar>\r\n                </AppBar>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {Login: state.Login};\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(Header));\r\n//export default withStyles(styles)(Header);","var axios = require(\"axios\");\r\naxios.defaults.withCredentials = true;\r\n//const superagent = axios;\r\n\r\n// const RootUrl = 'http://localhost:8080';\r\nconst RootUrl = 'http://47.103.0.246:8080';\r\n\r\nfunction resBody(res) {\r\n    return res.data;\r\n}\r\n\r\nconst requests = {\r\n    get: (url)=>axios.get(RootUrl+url,{withCredentials:true}).then(resBody),\r\n    getWith:(url,body)=>axios.get(RootUrl+url,{params: body},{withCredentials:true}).then(resBody),\r\n    post:(url,body)=>axios.post(RootUrl+url,body,{withCredentials:true}).then(resBody),\r\n    delete:(url,body)=>axios.delete(RootUrl+url,body,{withCredentials:true}).then(resBody),\r\n    put:(url,body)=>axios.put(RootUrl+url,body,{withCredentials:true}).then(resBody)\r\n};\r\n\r\n//show books, add to cart, manage books and remove a book from cart\r\nexport const Book = {\r\n    showBooks: (start,num)=>requests.getWith('/api/book/show',{\"num\":parseInt(num),\"start\":parseInt(start)}),\r\n    addToCart: (_id, bookname, num, isbn) => requests.post(\"/api/cart/add\",{\"_id\":parseInt(_id),\"bookname\":bookname, \"num\": num, \"isbn\": isbn}),\r\n    removeFromCart: (_id, bookname, isbn) => requests.delete(\"/api/cart/remove\",{\r\n        \"_id\": parseInt(_id),\r\n        \"bookname\": bookname,\r\n        \"isbn\": isbn\r\n    }),\r\n    showCart: (_id) => requests.getWith(\"/api/cart/show\",{\"_id\": _id}),\r\n    getBookByisbn: (isbn,start,num) => requests.getWith('/api/book/showBy',{\"isbn\": parseInt(isbn),\"num\":num,\"start\":start}),\r\n    getBookByName: (bookname,start,num) => requests.getWith(\"/api/book/showBy\",{\"bookname\": bookname,\"num\":num,\"start\":start, \"isbn\": -1}),\r\n};\r\n\r\n//the action of manager add a book, delete a book, update a book, ban a user\r\nexport const Manage = {\r\n    addABook: (/*bookname, stockNum, summary, pictureUrl, author, price*/book) => requests.post(\"/api/book/manage/add\",\r\n        /*{\r\n            \"bookname\": bookname, \"stockNum\": stockNum, \"summary\": summary, \"pictureUrl\": pictureUrl, \"author\": author,\r\n            \"price\": price\r\n        }*/book),\r\n    deleteABook: (_id, bookname, isbn) => requests.delete(\"/api/book/manage/delete\",{\"bookname\": bookname, \"_id\": _id, \"isbn\": isbn}),\r\n    updateABook: (/*bookname, stockNum, summary, pictureUrl, author, price, isbn*/book) => requests.put(\"/api/book/manage/update\",\r\n        /*{\r\n            \"bookname\": bookname, \"stockNum\": stockNum, \"summary\": summary, \"pictureUrl\": pictureUrl, \"author\": author,\r\n            \"price\": price, \"isbn\": isbn\r\n        }*/book),\r\n    banAUser: _id => requests.put(\"/api/user/ban\",{\"_id\": _id}),\r\n    showUsers: () => requests.get(\"/api/user/show\")\r\n};\r\n\r\nexport const Order = {\r\n    showOrder: _id => {return requests.getWith(\"/api/order/show\",{\"_id\": _id})},\r\n    generateAnOrder: (_id, booksArr, mode) => requests.post(\"/api/order/generate\", {\"_id\": _id, \"books\": booksArr, \"mode\": mode}),\r\n    showStatistics: (_id, startTime,endTime) => requests.getWith(\"/api/order/show/statistics/buy\", {\"_id\":_id,\"startTime\":startTime,\"endTime\":endTime})\r\n};\r\n\r\n//\r\nexport const User = {\r\n    login: (username, password) => requests.post('/login',{\"username\":username, \"password\": password}),\r\n    signup: (username, password, email) => requests.post('/api/user/signup',{\"username\":username, \"password\": password,\r\n        \"email\": email})\r\n};\r\n\r\nexport const Comment = {\r\n    showComment: (isbn) => requests.getWith(\"/api/comment/show\",{\"isbn\":isbn}),\r\n    addComment: (isbn, userId, indexArr, username, comment_content) => requests.post(\"/api/comment/add\",\r\n        {\r\n            \"isbn\":parseInt(isbn),\r\n            \"userId\":parseInt(userId),\r\n            \"index\":indexArr,\r\n            \"username\":username,\r\n            \"content\":comment_content\r\n        })\r\n};","const errorHandler = err=> alert(err.response.data.msg);\r\nexport {errorHandler}","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\nimport {connect} from \"react-redux\";\r\nimport {Book} from \"../../agent\";\r\nimport {Radio} from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport {errorHandler} from '../../utils/usefulFunction'\r\n\r\nconst styles = theme => ({\r\n    inputInput: {\r\n        paddingTop: theme.spacing.unit,\r\n        paddingRight: theme.spacing.unit,\r\n        paddingBottom: theme.spacing.unit,\r\n        paddingLeft: theme.spacing.unit * 10,\r\n        transition: theme.transitions.create('width'),\r\n        width: '100%',\r\n\r\n        [theme.breakpoints.up('md')]: {\r\n        width: 200,\r\n    },\r\n    },\r\n    inputRoot: {\r\n        color: 'inherit',\r\n        width: '100%',\r\n        display:'inline-block'\r\n\r\n    },\r\n    searchIcon: {\r\n        marginLeft:theme.spacing.unit,\r\n        //width: theme.spacing.unit * 2,\r\n        height: '100%',\r\n        position: 'absolute',\r\n        //pointerEvents: 'none',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'right',\r\n    },\r\n    search: {\r\n        position: 'relative',\r\n        borderRadius: theme.shape.borderRadius,\r\n\r\n        backgroundColor: fade(theme.palette.common.white, 0.35),\r\n        '&:hover': {\r\n            backgroundColor: fade(theme.palette.common.white, 0.55),\r\n        },\r\n        marginRight: theme.spacing.unit * 2,\r\n        float: 'right',\r\n        width: '400px',\r\n        [theme.breakpoints.down('md')]: {\r\n            width: 'auto',\r\n        },\r\n    },\r\n    toolbar: {\r\n        marginLeft: -theme.spacing.unit,\r\n        marginRight: -theme.spacing.unit,\r\n        height: '100px',\r\n        paddingTop: theme.spacing.unit * 3,\r\n        backgroundColor: theme.palette.primary.elight,\r\n    },\r\n    title: {\r\n        overflow: 'visible',\r\n        marginLeft: theme.spacing.unit*3,\r\n    },\r\n    radio:{\r\n        display: 'inline-block',\r\n        width: '10px',\r\n    },\r\n    clearBtn:{\r\n        marginLeft:-8*theme.spacing.unit,\r\n        //width: theme.spacing.unit * 2,\r\n        height: '100%',\r\n        position: 'absolute',\r\n    },\r\n    hidden:{\r\n        display:\"none\"\r\n    }\r\n});\r\n\r\nclass SearchBar extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {key:''};\r\n        this.handleRadioChange = this.handleRadioChange.bind(this);\r\n    }\r\n\r\n    async searchOnClick() {\r\n        const key = this.state.key;\r\n        const by = this.props.by;\r\n        this.props.setKey(key);\r\n        //alert(this.props.location.pathname);\r\n        if (key === ''||key===undefined) {\r\n            alert('关键字不能为空哦~');\r\n        } else {\r\n            //根据当前页面是订单页还是图书页进行不同处理\r\n            if (this.props.location.pathname === \"/order\") {\r\n\r\n            } else {\r\n                await this.props.searchBtnClick();\r\n                if (by === 'isbn') {\r\n                    var regPos = /^\\d+(\\.\\d+)?$/;\r\n                    if (!regPos.test(key)) {\r\n                        alert(\"输入的isbn格式不正确\");\r\n                    } else {\r\n                        Book.getBookByisbn(key,this.props.curPage,this.props.perPageNum)\r\n                            .then(res => this.props.searchBooks(res))\r\n                            .catch(errorHandler);\r\n                    }\r\n                } else {\r\n                    Book.getBookByName(key,this.props.curPage,this.props.perPageNum)\r\n                        .then(res => this.props.searchBooks(res))\r\n                        .catch(err => {alert(err.response.data.msg);window.open('https://www.baidu.com/s?wd=' + key, '_blank')});\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleRadioChange(e) {\r\n        this.props.switchBy();\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div className={classes.toolbar}>\r\n                <Grid container spacing={24} alignItems=\"center\">\r\n                    <Grid item xs={6}>\r\n                        <Typography className={classes.title} variant=\"h2\" color=\"secondary\" noWrap>\r\n                            j-bu ok-y\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                        <React.Fragment>\r\n                            <Typography variant=\"h6\" color=\"inherit\"\r\n                                        className={this.props.location.pathname === \"/order\"?classes.hidden:null}>\r\n                                通过以下方式查找书:\r\n                            </Typography>\r\n                            <Radio\r\n                                checked={this.props.by === 'isbn'}\r\n                                onChange={this.handleRadioChange}\r\n                                value=\"isbn\"\r\n                                name=\"radio-button\"\r\n                                aria-label=\"isbn\"\r\n                                checkedIcon={\"isbn\"}\r\n                                className={this.props.location.pathname === \"/order\"?classes.hidden:null}\r\n                            />\r\n                            <Radio\r\n                                checked={this.props.by === 'bookname'}\r\n                                onChange={this.handleRadioChange}\r\n                                value=\"bookname\"\r\n                                name=\"radio-button\"\r\n                                aria-label=\"bookname\"\r\n                                checkedIcon={\"书名\"}\r\n                                className={this.props.location.pathname === \"/order\"?classes.hidden:null}\r\n                            />\r\n                        </React.Fragment>\r\n                        <div className={classes.search}>\r\n                            <Button className={classes.searchIcon}\r\n                                        onClick={() => this.searchOnClick()}>\r\n                                <SearchIcon/>\r\n                                Go\r\n                            </Button>\r\n                            <InputBase\r\n                                placeholder={\"输入关键字查找...\"}\r\n                                classes={{\r\n                                    root: classes.inputRoot,\r\n                                    input: classes.inputInput,\r\n                                }}\r\n                                value={this.state.key}\r\n                                onChange={e => this.setState({key:e.target.value})}/>\r\n                            <Button className={classes.clearBtn}\r\n                                    onClick={()=>{this.props.clearAndReset();this.setState({key:''})}}\r\n                            >\r\n                                x\r\n                            </Button>\r\n                        </div>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n        keyWord: state.Search.keyWord,\r\n        by: state.Search.by,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        searchBooks: res => {\r\n            dispatch({type:\"SHOW_BOOK\",result:res});\r\n            dispatch({type:\"SET_TOTAL\",total:res.count});\r\n        },\r\n        clearAndReset: async () => {\r\n            await dispatch({type:\"RESET_KEY\"});\r\n            dispatch({type:\"RESET_PAGE\"});\r\n            dispatch({type:\"UPDATE\"});\r\n        },\r\n        switchBy: () => dispatch({type:\"SWITCH_BY\"}),\r\n        setKey: (key) => dispatch({type:\"SET_KEY\", keyWord:key}),\r\n        searchBtnClick: () => {dispatch({type:\"RESET_PAGE\"});}\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SearchBar)));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport {connect} from \"react-redux\";\r\n\r\nconst styles = theme => (\r\n    {\r\n        button:{\r\n            padding: theme.spacing.unit * 2,\r\n            textAlign: 'center',\r\n            color: theme.palette.text.secondary,\r\n            margin: theme.spacing.unit,\r\n            fontSize: '18px',\r\n        },\r\n        root:{\r\n            flexGrow: 1,\r\n        },\r\n    }\r\n);\r\n\r\nclass ChoosePage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const {classes, isManager, _id} = this.props;\r\n        return (\r\n            <div className={classes.root}>\r\n                <Grid container spacing={24} alignItems=\"center\">\r\n                    {isManager?\r\n                        <React.Fragment>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href='#/all-books'>图书管理</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href='#/manage-users'>用户管理</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href=\"#/order\">订单管理</Button>\r\n                            </Grid>\r\n                        </React.Fragment>\r\n                    :\r\n                        <React.Fragment>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} onClick={()=>this.props.update()}>所有图书</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true}>新书推荐</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href=\"#/order\" disabled={_id===''}>我的订单</Button>\r\n                            </Grid>\r\n                        </React.Fragment>}\r\n                </Grid>\r\n                <Divider/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        _id: state.Login._id,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        update: ()=>dispatch({type:\"UPDATE\"})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(ChoosePage));","import React from 'react';\r\nimport Header from '../Header';\r\nimport SearchBar from './SearchBar';\r\nimport ChoosePage from './ChoosePage';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n//import {connect } from \"react-redux\";\r\n\r\nconst styles = theme => ({\r\n    main:{\r\n        backgroundColor:theme.palette.secondary.main,\r\n\r\n    }\r\n\r\n});\r\n\r\n\r\n\r\nclass HomePage extends React.Component{\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <Header/>\r\n                <SearchBar/>\r\n                <ChoosePage/>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(HomePage);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect} from \"react-redux\";\r\nimport {IconButton} from \"@material-ui/core\";\r\nimport {Delete} from \"@material-ui/icons\";\r\n\r\nconst styles = {\r\n    card: {\r\n        maxWidth: 170,\r\n    },\r\n    media: {\r\n        height: 250,\r\n    },\r\n    author:{\r\n        color:'gray'\r\n    },\r\n    deleteButton:{\r\n        //position:'absolute',\r\n        //float:'right',\r\n        padding: '6px',\r\n        marginLeft: '10px'\r\n    }\r\n};\r\n\r\nclass BookCard extends React.Component{\r\n    render() {\r\n        const { classes,book, isManager, _id, deleteBook} = this.props;\r\n        return (\r\n            <Card className={classes.card}>\r\n                <CardActionArea>\r\n                    <Link to={'book/' + book.isbn}>\r\n                        <CardMedia\r\n                            className={classes.media}\r\n                            image={book.pictureUrl}\r\n                            title=\"Contemplative Reptile\"\r\n                        />\r\n                    </Link>\r\n                    <CardContent>\r\n                        <Typography gutterBottom variant=\"h6\" component=\"h4\">\r\n                            {book.bookname}\r\n                        </Typography>\r\n                        <Typography component=\"p\" className={classes.author}>\r\n                            {book.author}\r\n                        </Typography>\r\n                    </CardContent>\r\n                </CardActionArea>\r\n                <CardActions>\r\n                    <Button size=\"small\" color=\"primary\">\r\n                        {book.price}\r\n                    </Button>\r\n                    {!isManager?\r\n                        <Link to={'book/' + book.isbn}>\r\n                            详情\r\n                        </Link>:\r\n                        <Link to={'update/' + book.isbn}>\r\n                            修改\r\n                        </Link>\r\n                    }\r\n                    {\r\n                        isManager?\r\n                            <IconButton className={classes.deleteButton} disabled\r\n                            onClick={()=>deleteBook(_id, book.bookname, book.isbn)}>\r\n                                <Delete/>\r\n                            </IconButton>\r\n                            :null\r\n                    }\r\n                </CardActions>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        _id: state.Login._id\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(BookCard));\r\n\r\n","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport DraftsIcon from '@material-ui/icons/Drafts';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport StarBorder from '@material-ui/icons/StarBorder';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '100%',\r\n        //maxWidth: 200,\r\n        height: '500px',\r\n        marginLeft: theme.spacing.unit * 3,\r\n        backgroundColor: theme.palette.secondary.elight,\r\n        float:'left',\r\n    },\r\n    nested: {\r\n        paddingLeft: theme.spacing.unit * 4,\r\n    },\r\n});\r\n\r\nclass Catalog extends React.Component {\r\n    state = {\r\n        open: true,\r\n    };\r\n\r\n    handleClick = () => {\r\n        this.setState(state => ({ open: !state.open }));\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <List\r\n                component=\"nav\"\r\n                subheader={<ListSubheader component=\"div\">类别</ListSubheader>}\r\n                className={classes.root}\r\n            >\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <SendIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"语文\" />\r\n                </ListItem>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"数学\" />\r\n                </ListItem>\r\n                <ListItem button onClick={this.handleClick}>\r\n                    <ListItemIcon>\r\n                        <InboxIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"英语\" />\r\n                    {this.state.open ? <ExpandLess /> : <ExpandMore />}\r\n                </ListItem>\r\n                <Collapse in={this.state.open} timeout=\"auto\" unmountOnExit>\r\n                    <List component=\"div\" disablePadding>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"小学\" />\r\n                        </ListItem>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"初中\" />\r\n                        </ListItem>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"高中\" />\r\n                        </ListItem>\r\n                    </List>\r\n                </Collapse>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"物理\" />\r\n                </ListItem>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"化学\" />\r\n                </ListItem>\r\n            </List>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(Catalog);","import React from \"react\";\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\nimport {Button,Toolbar} from \"@material-ui/core\";\r\nimport {connect} from \"react-redux\";\r\n\r\nclass Pagination extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const {total,perPageNum,isManager,curPage} = this.props;\r\n        const allPage = Math.ceil(total / perPageNum) || 1;\r\n        return (\r\n            //allPage > 1 &&\r\n            <Toolbar>\r\n                <div>\r\n                    {\r\n                        `${(curPage - 1) * perPageNum + 1}-${curPage * perPageNum<total?curPage * perPageNum:total} of ${allPage} Pages`\r\n                    }\r\n                </div>\r\n                <div style={{marginLeft: '200px'}}>\r\n                    {\r\n                        <Button primary key=\"prev\" label=\"上一页\" disabled={curPage <= 1}\r\n                                onClick={() => this.props.lastPage()}>\r\n                            <ChevronLeft/>\r\n                            上一页\r\n                        </Button>\r\n                    }\r\n                    {\r\n                        `当前页：${curPage}`\r\n                    }\r\n                    {\r\n                        <Button primary key=\"next\" label=\"下一页\" disabled={curPage === allPage}\r\n                                onClick={() => this.props.nextPage()} labelPosition=\"before\">\r\n                            下一页\r\n                            <ChevronRight/>\r\n                        </Button>\r\n                    }\r\n                </div>\r\n                {isManager?\r\n                    <div style={{marginLeft:'400px'}}>\r\n                        <Button size=\"large\" variant=\"outlined\" href=\"#/add-new-book\">\r\n                            新增图书\r\n                        </Button>\r\n                    </div>\r\n                :null}\r\n            </Toolbar>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        total: state.Page.total,\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n    }\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        nextPage: ()=>dispatch({type: \"NEXT_PAGE\"}),\r\n        lastPage: ()=>dispatch({type: \"LAST_PAGE\"}),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pagination);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport ChoosePage from '../Main/ChoosePage';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport BookCard from './BookCard';\r\nimport Catalog from '../Main/Catalog';\r\nimport Pagination from './Pagination';\r\nimport {connect} from \"react-redux\";\r\nimport {Book, Manage} from \"../../agent\";\r\nimport {errorHandler} from '../../utils/usefulFunction'\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n      minWidth:'900px'\r\n    },\r\n    root: {\r\n        position: 'relative',\r\n        paddingTop: theme.spacing.unit,\r\n        paddingLeft: theme.spacing.unit * 5,\r\n        backgroundColor: theme.palette.common.paper,\r\n    },\r\n    bookCard:{\r\n        marginLeft: theme.spacing.unit * 4,\r\n        position: 'relative',\r\n        display: 'inline-block',\r\n        width:'200px',\r\n        height: '250px',\r\n        marginBottom: theme.spacing.unit * 15,\r\n    },\r\n\r\n});\r\n\r\nclass BooksPage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.bookPageOnChange = this.bookPageOnChange.bind(this);\r\n        this.deleteBook = this.deleteBook.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Book.showBooks(this.props.curPage,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);\r\n        return this.props.storePageBooks(res)}).catch(errorHandler);\r\n    }\r\n    componentWillReceiveProps(nextProps, nextContext) {\r\n        if (this.props.curPage!==nextProps.curPage || this.props.update!==nextProps.update)\r\n        {\r\n            this.bookPageOnChange(nextProps.curPage);\r\n        }\r\n    }\r\n\r\n    bookPageOnChange(page){\r\n        if (this.props.keyWord===\"\" || this.props.keyWord===undefined)\r\n        {\r\n            Book.showBooks(page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(errorHandler);\r\n        }\r\n        else\r\n        {\r\n            if (this.props.by === 'isbn') {\r\n                Book.getBookByisbn(this.props.keyWord,page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(errorHandler);\r\n            } else {\r\n                Book.getBookByName(this.props.keyWord,page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(errorHandler);\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteBook(_id, bookname, isbn) {\r\n        Manage.deleteABook(_id, bookname, isbn).then(this, this.props.deleteBook(isbn)).catch(errorHandler);\r\n        this.forceUpdate();\r\n    }\r\n        render() {\r\n        const {classes,books} = this.props;\r\n            return (\r\n                <div className={classes.superRoot}>\r\n                    <Header/>\r\n                    <SearchBar/>\r\n                    <ChoosePage/>\r\n                    <Grid container spacing={0}>\r\n                        <Grid item xs={2}>\r\n                            <Catalog/>\r\n                        </Grid>\r\n                        <Grid item xs={9} wrap=\"wrap\">\r\n                            {\r\n                                books!==undefined?\r\n                                    <div className={classes.root}>\r\n                                        {\r\n                                            books.map((book) => (\r\n                                                <div className={classes.bookCard}>\r\n                                                    <BookCard book={book} deleteBook={this.deleteBook}/>\r\n                                                </div>\r\n                                            ))\r\n                                        }\r\n                                    </div>:\r\n                                    <p className={classes.root}>没有符合条件的书籍</p>\r\n                            }\r\n\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Pagination/>\r\n                </div>\r\n            );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        books: state.BookDetail.books,\r\n        update: state.BookDetail.update,\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n        keyWord: state.Search.keyWord,\r\n        by: state.Search.by,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        storePageBooks: res => dispatch({type:\"SHOW_BOOK\",result:res}),\r\n        deleteBook: isbn=>dispatch({type:\"DELETE_BOOK\",isbn:isbn}),\r\n        setTotal: total=>dispatch({type:\"SET_TOTAL\",total:total})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(BooksPage));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport {connect} from \"react-redux\";\r\nimport {Comment} from \"../../agent\";\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {errorHandler} from \"../../utils/usefulFunction\";\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    content:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n        marginLeft: theme.spacing.unit * 10,\r\n    },\r\n    summary:{\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    subreply:{\r\n        marginLeft: theme.spacing.unit*10,\r\n    },\r\n    fabiao:{\r\n        marginTop: theme.spacing.unit * 5\r\n    }\r\n});\r\n\r\nclass Comments extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {comments: [],open:false,input_content:\"\",indexArr:[]};\r\n    }\r\n\r\n    componentDidMount() {\r\n        Comment.showComment(this.props.isbn).then(res=> this.setState({comments:res.comments})).catch(errorHandler);\r\n    }\r\n\r\n    handleClickOpen = index => () => {\r\n        this.setState({ open: true , indexArr:index.slice()});\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({ open: false , input_content:\"\", indexArr:[]});\r\n    };\r\n\r\n    handleSubmit = () => {\r\n        Comment.addComment(this.props.isbn,this.props._id,this.state.indexArr,this.props.username,this.state.input_content);\r\n        this.handleClose();\r\n        this.props.history.push('/');\r\n    };\r\n\r\n    handleContentChange = e => {\r\n        this.setState({input_content:e.target.value})\r\n    };\r\n\r\n    getTime(commentTime) {\r\n        return commentTime.replace('T',' ').substring(0,commentTime.indexOf('.'))\r\n    }\r\n\r\n    showTree(replies, parentName, indexArr) {\r\n        const {classes} = this.props;\r\n        return (\r\n            <React.Fragment>\r\n                {\r\n                    replies.map((reply,index)=>\r\n                    <div className={indexArr.length>1?null:classes.subreply}>\r\n                        <Toolbar>\r\n                            <Avatar className={classes.avatar} alt=\"User\" children={reply.userId}/>\r\n                            <Typography variant=\"h6\">{reply.username + \" 回复 \"+parentName+\"  \" + this.getTime(reply.commentTime)}</Typography>\r\n                        </Toolbar>\r\n                        <Typography variant=\"h6\" className={classes.content}>{reply.content}</Typography>\r\n                        {this.props._id===\"\"?null:\r\n                            <Button variant=\"outlined\" color=\"primary\" onClick={this.handleClickOpen(indexArr.concat(index))}>\r\n                                回复\r\n                            </Button>}\r\n                        {\r\n                            reply.replies==null||reply.replies.length<=0?null:this.showTree(reply.replies,reply.username,indexArr.concat(index))\r\n                        }\r\n                    </div>)\r\n                }\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        const {comments} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <div className={classes.root}>\r\n                    {comments.map((comment,index) =>\r\n                        <React.Fragment key={comment.commentTime}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"User\" children={comment.userId}/>\r\n                                <Typography variant=\"h6\">{comment.username + \"  \" + this.getTime(comment.commentTime)}</Typography>\r\n                            </Toolbar>\r\n                            <Typography variant=\"h6\" className={classes.content}>{comment.content}</Typography>\r\n                            {this.props._id===\"\"?null:\r\n                                <Button variant=\"outlined\" color=\"primary\" onClick={this.handleClickOpen([index])}>\r\n                                    回复\r\n                                </Button>}\r\n                            <div className={classes.summary}>\r\n                                {\r\n                                    comment.replies==null||comment.replies.length<=0?null:this.showTree(comment.replies,comment.username,[index])\r\n                                }\r\n                            </div>\r\n                        </React.Fragment>\r\n                    )}\r\n                </div>\r\n                {this.props._id===\"\"?null:\r\n                    <Button fullWidth className={classes.fabiao} variant=\"outlined\" color=\"primary\" onClick={this.handleClickOpen([])}>\r\n                        发表评论\r\n                    </Button>}\r\n                <Dialog\r\n                    open={this.state.open}\r\n                    onClose={this.handleClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">输入回复内容</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"name\"\r\n                            label=\"说点啥...\"\r\n                            type=\"text\"\r\n                            rows={3}\r\n                            fullWidth\r\n                            multiline\r\n                            value={this.state.input_content}\r\n                            onChange={this.handleContentChange}\r\n                        />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"primary\">\r\n                            取消\r\n                        </Button>\r\n                        <Button onClick={this.handleSubmit} color=\"primary\">\r\n                            确定\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nComments.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        _id:state.Login._id,\r\n        username:state.Login.username,\r\n    };\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(withStyles(styles)(Comments)));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {Button} from \"@material-ui/core\";\r\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\r\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\r\nimport RestoreIcon from '@material-ui/icons/Restore';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport {connect} from \"react-redux\";\r\nimport {Book,Order} from '../../agent';\r\nimport Comments from \"./Comments\";\r\nimport {errorHandler} from '../../utils/usefulFunction'\r\n\r\nconst styles = theme => ({\r\n    superRoot: {\r\n        minWidth: '800px',\r\n    },\r\n    root: {\r\n        position: 'relative',\r\n        paddingTop: theme.spacing.unit * 3,\r\n        paddingLeft: '8%',\r\n        paddingRight: '3%',\r\n        height: '350px',\r\n        backgroundColor: theme.palette.common.paper,\r\n    },\r\n    left: {\r\n        height: '250px',\r\n        padding: theme.spacing.unit,\r\n        textAlign: 'center',\r\n        position: 'absolute',\r\n        width: '18%',\r\n        backgroundColor: '#ccc'\r\n    },\r\n    middle: {\r\n        height: '200px',\r\n        textAlign: 'left',\r\n        marginLeft: '21%',\r\n        width: '49%',\r\n        position: 'absolute',\r\n        whiteSpace: 'pre',\r\n    },\r\n    right: {\r\n        height: '200px',\r\n        border: '1px dashed #fab',\r\n        lineHeight: '40px',\r\n        //backgroundColor: 'purple',\r\n        width: '15%',\r\n        position: 'absolute',\r\n        marginLeft: '75%',\r\n        textAlign: 'center',\r\n        fontSize: '25px',\r\n        color: '#2aa',\r\n        padding: '10px',\r\n    },\r\n    price: {\r\n        backgroundColor: '#689',\r\n        color: '#922',\r\n        width: '90%',\r\n        fontSize: '28px',\r\n        margin: '10px 0',\r\n        padding: '30px'\r\n    },\r\n    summary: {\r\n        marginTop: theme.spacing.unit,\r\n        marginBottom: theme.spacing.unit * 2,\r\n        height: 'auto',\r\n        lineHeight: '20px',\r\n\r\n    },\r\n    summarySpan: {\r\n        width: '200px',\r\n        whiteSpace: 'normal',\r\n        wordWrap: 'break-word',\r\n        wordBreak: 'break-all',\r\n        overflow: 'hidden',\r\n    },\r\n    inputNum: {\r\n        width: '40px',\r\n        height: '30px',\r\n    },\r\n    addBtn: {\r\n        backgroundColor: '#f88',\r\n        marginLeft: theme.spacing.unit,\r\n        fontSize: '18px',\r\n        color: 'white',\r\n    },\r\n    buyBtn: {\r\n        marginLeft: theme.spacing.unit * 2,\r\n        backgroundColor: '#fee',\r\n        fontSize: '18px',\r\n        color: '#f48',\r\n        fontWeight: 'normal'\r\n    },\r\n    body: {\r\n        position: \"relative\",\r\n        marginTop: '10px',\r\n        backgroundColor: '#d39',\r\n        marginLeft: '50px',\r\n    },\r\n});\r\n\r\nclass BookDetail extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            value: 0,\r\n            book:{\r\n\r\n            }\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        let targetisbn = parseInt(this.props.match.params.isbn);\r\n        Book.getBookByisbn(targetisbn,1,1).then(res=>this.setState({book:res.books[0]})).catch(errorHandler);\r\n    }\r\n    handleChange = (event, value) => {\r\n        this.setState({ value });\r\n    };\r\n    render() {\r\n        const {classes, books, _id} = this.props;\r\n        let targetisbn = parseInt(this.props.match.params.isbn);\r\n        const book = this.state.book;\r\n        let numValue;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <div className={classes.root}>\r\n                    <div className={classes.left}>\r\n                        <img src={book.pictureUrl} alt=\"别买了，这书连封面都没有\"\r\n                             width=\"100%\" height=\"100%\"/>\r\n                    </div>\r\n                    <div className={classes.middle}>\r\n                        <Typography variant=\"h4\">{book.bookname}</Typography>\r\n                        <Divider/>\r\n                        <Typography variant=\"body1\" color=\"inherit\">\r\n                            作者：{book.author}\r\n                            {\"       \"}\r\n                            库存：{book.stockNum}\r\n                        </Typography>\r\n                        <div className={classes.price}>\r\n                            ￥ {book.price}\r\n                        </div>\r\n                        <div className={classes.summary}>\r\n                            <span className={classes.summarySpan}>\r\n                                {book.summary}\r\n                            </span>\r\n                        </div>\r\n                        <input type=\"number\" min=\"1\" max={book.stockNum} className={classes.inputNum}\r\n                               ref={ref => numValue = ref}\r\n                        />\r\n                        <Button className={classes.addBtn} onClick={\r\n                            () => (_id === '' ? alert(\"请先登录\") :\r\n                                    (numValue.value > book.stockNum ? alert(\"库存不足\") :\r\n                                        (numValue.value <= 0 || numValue.value === 'undefined' ? alert(\"请正确填写数量\") :\r\n                                            this.props.addToCart(_id, book.bookname, numValue.value, book.isbn)))\r\n                            )\r\n                        }>\r\n                            加入购物车\r\n                        </Button>\r\n                        <Button className={classes.buyBtn} onClick={\r\n                            () => (_id === '' ? alert(\"请先登录\") :\r\n                                    (numValue.value > book.stockNum ? alert(\"库存不足\") :\r\n                                        (numValue.value <= 0 || numValue.value === 'undefined' ? alert(\"请正确填写数量\") :\r\n                                            this.props.buyNow(_id, [{\r\n                                                \"bookname\": book.bookname,\r\n                                                \"num\": numValue.value,\r\n                                                \"isbn\": book.isbn\r\n                                            }], \"buy directly\")))\r\n                            )\r\n                        }>\r\n                            立即购买\r\n                        </Button>\r\n                    </div>\r\n                    <div className={classes.right}>\r\n                        广告位招租：1元/条\r\n                        --客天涯是一个大帅b\r\n                    </div>\r\n\r\n                </div>\r\n                <div className={classes.body}>\r\n                    <BottomNavigation\r\n                        value={this.state.value}\r\n                        onChange={this.handleChange}\r\n                        showLabels\r\n                    >\r\n                        <BottomNavigationAction label=\"商品评论\" icon={<RestoreIcon/>}/>\r\n                        <BottomNavigationAction label=\"猜你喜欢\" icon={<FavoriteIcon/>}/>\r\n                        <BottomNavigationAction label=\"附近的人\" icon={<LocationOnIcon/>}/>\r\n                    </BottomNavigation>\r\n                    <Divider/>\r\n                </div>\r\n                <Comments isbn={targetisbn}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        books: state.BookDetail.books,\r\n        _id: state.Login._id,\r\n    }\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        addToCart: (_id, bookname, num, isbn) => Book.addToCart(_id, bookname, num, isbn).then(dispatch({\r\n            type: \"ADD_TO_CART\",\r\n            bookname: bookname,\r\n            num: num,\r\n            isbn: isbn\r\n        })).then(alert(\"加入购物车成功！\")).catch(errorHandler),\r\n        buyNow: (_id, booksArr, mode) => Order.generateAnOrder(_id,booksArr,mode)\r\n            .then(alert(\"购买成功！\")).catch(error=>alert(error.response.body.msg)),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(BookDetail));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport {Link} from 'react-router-dom';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Header from '../Header';\r\nimport {Book, Order} from \"../../agent\";\r\nimport {connect} from \"react-redux\";\r\nimport {errorHandler} from '../../utils/usefulFunction'\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ShoppingCart extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {cart: []};\r\n        this.removeButtonClick = this.removeButtonClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Book.showCart(this.props._id).then(res=> this.setState({cart:res.books})).catch(errorHandler);\r\n    }\r\n\r\n    removeButtonClick = (_id, bookname, isbn) =>\r\n        Book.removeFromCart(_id, bookname, isbn).then(() => {\r\n                const oldCart = this.state.cart;\r\n                const newCart = oldCart.filter(book=>isbn!==book.isbn);\r\n                this.setState({cart: newCart});\r\n            }\r\n        ).catch(err=>alert(\"移除书失败！\"));\r\n\r\n    render() {\r\n        const {classes/*, removeButtonClick*/} = this.props;\r\n        const {cart} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <div className={classes.root}>\r\n                    {cart.map(book =>\r\n                        <React.Fragment key={book.isbn}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"Book\" children=\"书\"/>\r\n                                <Typography variant=\"h6\">{book.isbn}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{book.bookname}</Typography>\r\n                            <Typography className={classes.summary}>{\"数量：\" + book.num}</Typography>\r\n                            <Link to={'book/' + book.isbn} className={classes.link}>详情</Link>\r\n                            <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                                    onClick={() => this.removeButtonClick(this.props._id, book.bookname, book.isbn)}>\r\n                                不要你了\r\n                                <DeleteIcon className={classes.rightIcon}/>\r\n                            </Button>\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                    )}\r\n                </div>\r\n                <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                        onClick={() => Order.generateAnOrder(this.props._id, this.state.cart, \"buy by cart\").then(this.setState({cart:[]}))\r\n                            .catch(errorHandler)}>\r\n                    结算\r\n                    <DeleteIcon className={classes.rightIcon}/>\r\n                </Button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShoppingCart.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    const {Login/*, BookAndNum*/} = state;\r\n    return {_id: Login._id/*, cart:BookAndNum.books*/};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        /*removeButtonClick: (_id, bookname, isbn) => Book.removeFromCart(_id, bookname, isbn).then(dispatch({\r\n            type: 'REMOVE_FROM_CART',\r\n            isbn: isbn\r\n        })).catch(() => alert('delete article failed, please try again')),*/\r\n        //storeCart: res=> dispatch({type:\"SHOW_CART\",result:res})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(ShoppingCart));\r\n","import {createMuiTheme} from '@material-ui/core/styles';\r\nimport {pink, purple, lightBlue} from '@material-ui/core/colors';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            elight: pink[50],\r\n            light: pink[200],\r\n            main: pink[500],\r\n            dark: pink[800],\r\n        },\r\n        secondary: {\r\n            elight:lightBlue[50],\r\n            light: lightBlue[200],\r\n            main: lightBlue[500],\r\n            dark: lightBlue[800],\r\n        },\r\n    },\r\n    typography: {\r\n        fontFamily: \"Roboto\",\r\n    },\r\n    shape: {\r\n        borderRadius: 8,\r\n    }\r\n});\r\n\r\nexport default theme;","import React from 'react';\r\nimport Header from './Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Button from '@material-ui/core/Button';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../theme';\r\nimport {User} from \"../agent\";\r\nimport {connect} from \"react-redux\";\r\nimport {errorHandler} from '../utils/usefulFunction'\r\n\r\nconst styles = theme => ({\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 400,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n\r\n});\r\n\r\nclass SignUp extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {username:'',password:'',confirmPass:'',email:''};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <Header/>\r\n                <main className={this.props.classes.main}>\r\n                    <Paper className={this.props.classes.paper}>\r\n                        <AccountCircle/>\r\n                        <Typography component=\"h1\" variant=\"h5\">\r\n                            Sign up\r\n                        </Typography>\r\n                        <form onSubmit={event => {\r\n                            event.preventDefault();\r\n                            if (this.state.password === this.state.confirmPass) {\r\n                                this.props.checkAccount(this.state.username, this.state.password, this.state.email);\r\n                            } else {\r\n                                alert('前后密码不一致');\r\n                            }\r\n                        }}>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"username\">UserName</InputLabel>\r\n                                <Input\r\n                                    id=\"username\"\r\n                                    name=\"username\"\r\n                                    value={this.state.username}\r\n                                    onChange={this.handleInputChange('username')}\r\n                                    autoFocus\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    value={this.state.password}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('password')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"confirmPass\">confirm your password</InputLabel>\r\n                                <Input\r\n                                    id=\"confirmPass\"\r\n                                    name=\"confirmPass\"\r\n                                    value={this.state.confirmPass}\r\n                                    //autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('confirmPass')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"email\">email</InputLabel>\r\n                                <Input\r\n                                    id=\"email\"\r\n                                    name=\"email\"\r\n                                    value={this.state.email}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('email')}\r\n                                    type=\"email\"\r\n                                />\r\n                            </FormControl>\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                            >\r\n                                Sign up\r\n                            </Button>\r\n                        </form>\r\n                    </Paper>\r\n                </main>\r\n            </MuiThemeProvider>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        checkAccount: (username, password, email) => {\r\n            User.signup(username, password, email).then(res=>dispatch({type: \"SIGN_UP\"})).catch(errorHandler);\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(SignUp));","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport {User} from \"../agent\";\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport {connect} from \"react-redux\";\r\nimport bgImg from '../img/signin4.jpg';\r\nimport {errorHandler} from '../utils/usefulFunction'\r\n\r\nconst styles = theme => ({\r\n    submit:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    /*img:{\r\n        width: '100%',\r\n        height:'400px',\r\n        backgroundImg: `url(${bgImg})`\r\n    }*/\r\n});\r\n\r\nclass Login extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {username:'',password:''};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div>\r\n                <img src={bgImg}/>\r\n                <Dialog\r\n                    open={true}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">Sign in</DialogTitle>\r\n                    <DialogContent>\r\n                        <form onSubmit={event => {\r\n                            event.preventDefault();\r\n                            this.props.checkAccount(this.state.username, this.state.password);\r\n                        }}>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"username\">UserName</InputLabel>\r\n                                <Input\r\n                                    id=\"username\"\r\n                                    name=\"username\"\r\n                                    value={this.state.username}\r\n                                    onChange={this.handleInputChange('username')}\r\n                                    autoFocus\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    value={this.state.password}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('password')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                className={classes.submit}\r\n                            >\r\n                                Sign in\r\n                            </Button>\r\n                        </form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        checkAccount: (username, password) => {\r\n            User.login(username, password).then(res=>dispatch({type: \"LOGIN\",result:res})).catch(errorHandler);\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(Login));","import React from 'react';\r\nimport Header from '../Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../../theme';\r\nimport {connect} from \"react-redux\";\r\nimport request from 'superagent';\r\nimport {Manage} from \"../../agent\";\r\nimport NumberFormat from 'react-number-format';\r\nimport {errorHandler} from '../../utils/usefulFunction'\r\n\r\n\r\nconst styles = theme => ({\r\n    supermain:{\r\n        minWidth: '650px',\r\n    },\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(800 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 800,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n    submitButton:{\r\n        float:'right',\r\n    },\r\n    imgButton:{\r\n        fullWidth: 'true',\r\n        backgroundColor: '#fff',\r\n        outline: 'none',\r\n        borderWidth: '0px',\r\n        borderRadius: '3px',\r\n    },\r\n    input:{\r\n        display:'none'\r\n    },\r\n    img: {\r\n        width: '120px',\r\n        height: '170px',\r\n    },\r\n    bookname:{\r\n        display: 'block',\r\n    },\r\n    author:{\r\n\r\n    },\r\n    head:{\r\n        float: 'left',\r\n        height: '170px',\r\n    },\r\n    cover:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        float: 'right',\r\n        height: '170px',\r\n        width: '120px',\r\n        border: '1px dashed blue',\r\n    },\r\n    price:{\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing.unit,\r\n    },\r\n    pan:{\r\n        float: 'left',\r\n        height: '170px',\r\n        marginLeft: theme.spacing.unit * 4,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n});\r\n\r\n//连接cloudinary的东西\r\nconst CLOUDINARY_UPLOAD_PRESET = 'cvtoheob';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dbqbt0cli/upload';\r\n\r\n//格式化stockNum输入\r\nfunction NumberFormatCustom(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"* \"\r\n        />\r\n    );\r\n}\r\n\r\nfunction NumberFormatCustom2(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"￥\"\r\n        />\r\n    );\r\n}\r\n\r\n\r\nclass AddNewBook extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {bookname: '', summary: '', uploadImgUrl: '', price: '0', author: '', stockNum: '0'};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n        this.onImageDrop = this.onImageDrop.bind(this);\r\n        this.handleImageUpload = this.handleImageUpload.bind(this);\r\n    }\r\n\r\n    onImageDrop(files) {\r\n        this.handleImageUpload(files[0]);\r\n    }\r\n\r\n    handleImageUpload(file) {\r\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                alert(err);\r\n            }\r\n            if (response.body.secure_url !== '') {\r\n                this.setState({\r\n                    uploadImgUrl: response.body.secure_url\r\n                });\r\n                //console.log(response.body.secure_url);\r\n                //this.forceUpdate();\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <div className={this.props.classes.supermain}>\r\n                    <Header/>\r\n                    <main className={this.props.classes.main}>\r\n                        <Paper className={this.props.classes.paper}>\r\n                            <form onSubmit={\r\n                                e => {\r\n                                    e.preventDefault();\r\n                                    this.props.addNewBook(\r\n                                        {\r\n                                            \"bookname\": this.state.bookname,\r\n                                            \"stockNum\": parseInt(this.state.stockNum),\r\n                                            \"summary\": this.state.summary,\r\n                                            \"pictureUrl\": this.state.uploadImgUrl,\r\n                                            \"author\": this.state.author,\r\n                                            \"price\": parseFloat(this.state.price)\r\n                                        }\r\n                                    )\r\n                                }\r\n                            }>\r\n                                <div className={this.props.classes.head}>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.bookname}>\r\n                                        <InputLabel htmlFor=\"bookname\">Book Name</InputLabel>\r\n                                        <Input\r\n                                            id=\"bookname\"\r\n                                            name=\"bookname\"\r\n                                            value={this.state.bookname}\r\n                                            onChange={this.handleInputChange('bookname')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.author}>\r\n                                        <InputLabel htmlFor=\"author\">Author</InputLabel>\r\n                                        <Input\r\n                                            id=\"author\"\r\n                                            name=\"author\"\r\n                                            value={this.state.author}\r\n                                            onChange={this.handleInputChange('author')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                </div>\r\n                                <div className={this.props.classes.pan}>\r\n                                    <TextField\r\n                                        className={this.props.classes.price}\r\n                                        label=\"Price\"\r\n                                        value={this.state.price}\r\n                                        onChange={this.handleInputChange('price')}\r\n                                        id=\"formatted-numberformat-price\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom2,\r\n                                        }}\r\n                                    />\r\n                                    <TextField\r\n                                        //className={this.props.classes.formControl}\r\n                                        label=\"Stock Number\"\r\n                                        value={this.state.stockNum}\r\n                                        onChange={this.handleInputChange('stockNum')}\r\n                                        id=\"formatted-numberformat-stockNum\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom,\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                                <div className={this.props.classes.cover}>\r\n                                    <input accept=\".jpg,.jpeg,.png \" className={this.props.classes.input}\r\n                                           id=\"icon-button-file\" type=\"file\"\r\n                                           ref={ref => this.image = ref} onChange={event => {\r\n                                        if (event.target.files.length !== 0) {\r\n                                            this.onImageDrop(event.target.files);\r\n                                        }\r\n                                    }\r\n                                    }/>\r\n                                    <button className={this.props.classes.imgButton} onClick={() => this.image.click()}\r\n                                    type=\"button\">\r\n                                        {this.state.uploadImgUrl === '' ?\r\n                                            <p>pick cover</p> :\r\n                                            <img className={this.props.classes.img} src={this.state.uploadImgUrl}/>}\r\n                                    </button>\r\n                                </div>\r\n                                <TextField margin=\"normal\" required fullWidth multiline\r\n                                           label=\"summary\" rows={6} variant='outlined'\r\n                                           id=\"summary\" placeholder=\"summary of the book...\"\r\n                                           value={this.state.summary}\r\n                                           onChange={this.handleInputChange('summary')}\r\n                                />\r\n                                <Button type=\"submit\" variant=\"contained\" color=\"primary\"\r\n                                        className={this.props.classes.submitButton}>\r\n                                    提交\r\n                                </Button>\r\n                            </form>\r\n                        </Paper>\r\n                    </main>\r\n                </div>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n        //authToken: state.Login.token,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        addNewBook: (book) => {\r\n            Manage.addABook(book)\r\n                .then(res=>dispatch({type:'ADD_BOOK',book:book}))\r\n                .catch(errorHandler);\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(AddNewBook));","import React from 'react';\r\nimport Header from '../Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../../theme';\r\nimport {connect} from \"react-redux\";\r\nimport request from 'superagent';\r\nimport {Manage} from \"../../agent\";\r\nimport NumberFormat from 'react-number-format';\r\nimport {errorHandler} from '../../utils/usefulFunction'\r\n\r\n\r\nconst styles = theme => ({\r\n    supermain:{\r\n        minWidth: '650px',\r\n    },\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(800 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 800,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n    submitButton:{\r\n        float:'right',\r\n    },\r\n    imgButton:{\r\n        fullWidth: 'true',\r\n        backgroundColor: '#fff',\r\n        outline: 'none',\r\n        borderWidth: '0px',\r\n        borderRadius: '3px',\r\n    },\r\n    input:{\r\n        display:'none'\r\n    },\r\n    img: {\r\n        width: '120px',\r\n        height: '170px',\r\n    },\r\n    bookname:{\r\n        display: 'block',\r\n    },\r\n    author:{\r\n\r\n    },\r\n    head:{\r\n        float: 'left',\r\n        height: '170px',\r\n    },\r\n    cover:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        float: 'right',\r\n        height: '170px',\r\n        width: '120px',\r\n        border: '1px dashed blue',\r\n    },\r\n    price:{\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing.unit,\r\n    },\r\n    pan:{\r\n        float: 'left',\r\n        height: '170px',\r\n        marginLeft: theme.spacing.unit * 4,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n});\r\n\r\n//连接cloudinary的东西\r\nconst CLOUDINARY_UPLOAD_PRESET = 'cvtoheob';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dbqbt0cli/upload';\r\n\r\n//格式化stockNum输入\r\nfunction NumberFormatCustom(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"* \"\r\n        />\r\n    );\r\n}\r\n\r\nfunction NumberFormatCustom2(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"￥\"\r\n        />\r\n    );\r\n}\r\n\r\n\r\nclass UpdateBook extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        const booksArr = this.props.booksArr;\r\n        let targetisbn = parseInt(this.props.match.params.isbn);\r\n        const [book] = booksArr.filter(book=>book.isbn===targetisbn);\r\n        this.state = {bookname: book.bookname, summary: book.summary, uploadImgUrl: book.pictureUrl,\r\n            price: book.price, author: book.author, stockNum: book.stockNum, isbn: targetisbn};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n        this.onImageDrop = this.onImageDrop.bind(this);\r\n        this.handleImageUpload = this.handleImageUpload.bind(this);\r\n    }\r\n\r\n    onImageDrop(files) {\r\n        this.setState({\r\n            uploadedFile: files[0]\r\n        });\r\n\r\n        this.handleImageUpload(files[0]);\r\n    }\r\n\r\n    handleImageUpload(file) {\r\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                console.error(err);\r\n            }\r\n            if (response.body.secure_url !== '') {\r\n                this.setState({\r\n                    uploadImgUrl: response.body.secure_url\r\n                });\r\n                //console.log(response.body.secure_url);\r\n                //this.forceUpdate();\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <div className={this.props.classes.supermain}>\r\n                    <Header/>\r\n                    <main className={this.props.classes.main}>\r\n                        <Paper className={this.props.classes.paper}>\r\n                            <form onSubmit={\r\n                                e => {\r\n                                    e.preventDefault();\r\n                                    this.props.updateBook(\r\n                                        {\r\n                                            \"bookname\": this.state.bookname,\r\n                                            \"stockNum\": parseInt(this.state.stockNum),\r\n                                            \"summary\": this.state.summary,\r\n                                            \"pictureUrl\": this.state.uploadImgUrl,\r\n                                            \"author\": this.state.author,\r\n                                            \"price\": parseFloat(this.state.price),\r\n                                            \"isbn\": this.state.isbn\r\n                                        }\r\n                                    )\r\n                                }\r\n                            }>\r\n                                <div className={this.props.classes.head}>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.bookname}>\r\n                                        <InputLabel htmlFor=\"bookname\">Book Name</InputLabel>\r\n                                        <Input\r\n                                            id=\"bookname\"\r\n                                            name=\"bookname\"\r\n                                            value={this.state.bookname}\r\n                                            onChange={this.handleInputChange('bookname')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.author}>\r\n                                        <InputLabel htmlFor=\"author\">Author</InputLabel>\r\n                                        <Input\r\n                                            id=\"author\"\r\n                                            name=\"author\"\r\n                                            value={this.state.author}\r\n                                            onChange={this.handleInputChange('author')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                </div>\r\n                                <div className={this.props.classes.pan}>\r\n                                    <TextField\r\n                                        className={this.props.classes.price}\r\n                                        label=\"Price\"\r\n                                        value={this.state.price}\r\n                                        onChange={this.handleInputChange('price')}\r\n                                        id=\"formatted-numberformat-price\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom2,\r\n                                        }}\r\n                                    />\r\n                                    <TextField\r\n                                        //className={this.props.classes.formControl}\r\n                                        label=\"Stock Number\"\r\n                                        value={this.state.stockNum}\r\n                                        onChange={this.handleInputChange('stockNum')}\r\n                                        id=\"formatted-numberformat-stockNum\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom,\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                                <div className={this.props.classes.cover}>\r\n                                    <input accept=\".jpg,.jpeg,.png \" className={this.props.classes.input}\r\n                                           id=\"icon-button-file\" type=\"file\"\r\n                                           ref={ref => this.image = ref} onChange={event => {\r\n                                        if (event.target.files.length !== 0) {\r\n                                            this.onImageDrop(event.target.files);\r\n                                        }\r\n                                    }\r\n                                    }/>\r\n                                    <button className={this.props.classes.imgButton} onClick={() => this.image.click()}\r\n                                    type=\"button\">\r\n                                        {this.state.uploadImgUrl === '' ?\r\n                                            <p>pick cover</p> :\r\n                                            <img className={this.props.classes.img} src={this.state.uploadImgUrl}/>}\r\n                                    </button>\r\n                                </div>\r\n                                <TextField margin=\"normal\" required fullWidth multiline\r\n                                           label=\"summary\" rows={6} variant='outlined'\r\n                                           id=\"summary\" placeholder=\"summary of the book...\"\r\n                                           value={this.state.summary}\r\n                                           onChange={this.handleInputChange('summary')}\r\n                                />\r\n                                <Button type=\"submit\" variant=\"contained\" color=\"primary\"\r\n                                        className={this.props.classes.submitButton}>\r\n                                    更新\r\n                                </Button>\r\n                            </form>\r\n                        </Paper>\r\n                    </main>\r\n                </div>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n        booksArr: state.BookDetail.books\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        updateBook: (book) => {\r\n            Manage.updateABook(book)\r\n                .then(()=>dispatch({type:'UPDATE_BOOK',book:book}))\r\n                .catch(errorHandler);\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(UpdateBook));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Header from '../Header';\r\nimport {Manage} from \"../../agent\";\r\nimport {connect} from \"react-redux\";\r\nimport {errorHandler} from '../../utils/usefulFunction'\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ManageUser extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {users: []};\r\n        this.banButtonClick = this.banButtonClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Manage.showUsers().then(res=> this.setState({users:res.users})).catch(errorHandler);\r\n    }\r\n\r\n    banButtonClick = (_id) =>\r\n        Manage.banAUser(_id).then(() => {\r\n                const oldUsers = this.state.users;\r\n                const newUsers = oldUsers.map(user=>{\r\n                    if (user._id === _id) {\r\n                        user.isBanned = !user.isBanned;\r\n                    }\r\n                    return user;\r\n                });\r\n\r\n                this.setState({users: newUsers});\r\n            }\r\n        ).catch(errorHandler);\r\n\r\n    render() {\r\n        const {classes/*, removeButtonClick*/} = this.props;\r\n        const {users} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <div className={classes.root}>\r\n                    {users.map(user =>\r\n                        <React.Fragment key={user._id}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"用户\" children=\"user\"/>\r\n                                <Typography variant=\"h6\">{user._id}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{user.username}</Typography>\r\n                            {\r\n                                user.isManager?\r\n                                    <React.Fragment>\r\n                                        <Typography className={classes.summary}>\r\n                                            {user._id===1?\"超级管理员大Boss\":\"一般管理员\"}\r\n                                        </Typography>\r\n                                    </React.Fragment>\r\n                                    :\r\n                                    <React.Fragment>\r\n                                        <Typography className={classes.summary}>\r\n                                            普通用户\r\n                                        </Typography>\r\n                                        <Typography>\r\n                                            状态：\r\n                                            {user.isBanned?\"被禁用\":\"正常\"}\r\n                                        </Typography>\r\n                                        <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                                                onClick={() => this.banButtonClick(user._id)}>\r\n                                            {user.isBanned?\"解禁\":\"禁用\"}\r\n                                            <DeleteIcon className={classes.rightIcon}/>\r\n                                        </Button>\r\n                                    </React.Fragment>\r\n                            }\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nManageUser.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    //日后可用来记录是哪个管理员操作的\r\n    return {_id: state.Login._id/*, cart:BookAndNum.books*/};\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ManageUser));","import React from 'react';\r\nimport echarts from 'echarts/lib/echarts';\r\nimport 'echarts/lib/chart/bar';\r\nimport 'echarts/lib/chart/line';\r\nimport 'echarts/lib/component/tooltip';\r\nimport 'echarts/lib/component/title';\r\nimport 'echarts/lib/component/legend';\r\nimport 'echarts/lib/component/toolbox';\r\nimport 'echarts/lib/component/markPoint';\r\nimport 'echarts/lib/component/markLine';\r\n\r\n\r\nclass Chart extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.initEchart = this.initEchart.bind(this);\r\n    }\r\n    initEchart() {\r\n        // 初始化\r\n        var myChart = echarts.init(document.getElementById(this.props.chartId));\r\n        // 绘制图表\r\n        myChart.setOption({\r\n            title: { text: this.props.text },\r\n            tooltip : {\r\n                trigger: 'axis'\r\n            },\r\n            legend: {\r\n                data:[this.props.yname,]\r\n            },\r\n            toolbox: {\r\n                show : true,\r\n                feature : {\r\n                    dataView : {show: true, readOnly: false},\r\n                    magicType : {show: true, type: ['line', 'bar']},\r\n                    restore : {show: true},\r\n                    saveAsImage : {\r\n                        show: true,\r\n                        type: 'jpg'\r\n                    }\r\n                }\r\n            },\r\n            xAxis : [\r\n                {\r\n                    name : this.props.xname,\r\n                    type : 'category',\r\n                    data : this.props.data.xdata\r\n                }\r\n            ],\r\n            yAxis : [\r\n                {\r\n                    type : 'value'\r\n                }\r\n            ],\r\n            series : [\r\n                {\r\n                    name:this.props.yname,\r\n                    type:'bar',\r\n                    data: this.props.data.ydata,\r\n                    markPoint : {\r\n                        data : [\r\n                            {type : 'max', name: '最大值'},\r\n                            {type : 'min', name: '最小值'}\r\n                        ]\r\n                    },\r\n                    markLine : {\r\n                        data : [\r\n                            {type : 'average', name: '平均值'}\r\n                        ]\r\n                    }\r\n                },\r\n            ]\r\n        });\r\n    }\r\n    componentDidMount() {\r\n        this.initEchart();\r\n    }\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        this.initEchart();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id={this.props.chartId} style={{ width: 800, height: 500 }}></div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Chart;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport {connect} from \"react-redux\";\r\nimport {Order} from \"../../agent\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport Chart from './Chart';\r\nimport {Button} from \"@material-ui/core\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    },\r\n    price:{\r\n\r\n    },\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing.unit,\r\n        marginRight: theme.spacing.unit,\r\n        width: 200,\r\n    },\r\n});\r\n\r\n\r\n\r\nclass ShowStatistics extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            bookData:{\r\n                xdata: [],\r\n                ydata: [],\r\n                totalConsume: 0\r\n            },\r\n            userData:{\r\n                xdata:[],\r\n                ydata:[],\r\n            },\r\n            startTime:\"2017-08-01T05:20\",\r\n            endTime:\"2019-05-24T13:14\"\r\n        };\r\n        this.handleTextFieldChange = name => event =>{\r\n            this.setState({[name]:event.target.value})\r\n        };\r\n        this.checkBtnClick = this.checkBtnClick.bind(this);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.checkBtnClick()\r\n    }\r\n\r\n    checkBtnClick(){\r\n        const startTime = this.state.startTime.replace('T',' ') + ':00';\r\n        const endTime = this.state.endTime.replace('T',' ') + ':00';\r\n        Order.showStatistics(this.props._id, startTime, endTime).then(res=>{\r\n                const book = res.book;\r\n                const bookX = [];\r\n                const bookY = [];\r\n                for (var i in book){\r\n                    bookX.push(i);\r\n                    bookY.push(book[i]);\r\n                }\r\n                this.setState({bookData:{xdata: bookX,ydata: bookY,totalConsume: res.totalConsume}})\r\n                if (this.props.isManager){\r\n                    const user = res.user;\r\n                    const userX = [];\r\n                    const userY = [];\r\n                    for (var i in user){\r\n                        userX.push(i);\r\n                        userY.push(user[i]);\r\n                    }\r\n                    this.setState({userData:{xdata: userX,ydata: userY}})\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <form className={classes.container} noValidate>\r\n                    <TextField\r\n                        id=\"startTime\"\r\n                        label=\"startTime\"\r\n                        type=\"datetime-local\"\r\n                        value={this.state.startTime}\r\n                        className={classes.textField}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                        onChange={this.handleTextFieldChange('startTime')}\r\n                    />\r\n                </form>\r\n                <form className={classes.container} noValidate>\r\n                    <TextField\r\n                        id=\"endTime\"\r\n                        label=\"endTime\"\r\n                        type=\"datetime-local\"\r\n                        defaultValue={this.state.endTime}\r\n                        className={classes.textField}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                        onChange={this.handleTextFieldChange('endTime')}\r\n                    />\r\n                </form>\r\n                <Button onClick={()=>this.checkBtnClick()}>\r\n                    查询\r\n                </Button>\r\n                <Chart data={this.state.bookData} text={'书籍情况'} yname={'购买数量'} xname={'书籍isbn'} chartId={'main1'}/>\r\n                {\r\n                    this.props.isManager?\r\n                        <Chart data={this.state.userData} text={'用户情况'} yname={'花费金额'} xname={'用户id'} chartId={'main2'}/>\r\n                        :null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShowStatistics.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager:state.Login.isManager,\r\n        _id:state.Login._id,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ShowStatistics));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Header from '../Header';\r\nimport {connect} from \"react-redux\";\r\nimport {Order} from \"../../agent\";\r\nimport SearchBar from '../Main/SearchBar';\r\nimport {errorHandler} from \"../../utils/usefulFunction\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    },\r\n    price:{\r\n\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ShowOrder extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {orders: []};\r\n    }\r\n\r\n    componentDidMount() {\r\n        Order.showOrder(this.props._id).then(res=> this.setState({orders:res.orders})).catch(errorHandler);\r\n    }\r\n\r\n    orderFilter(order, keyWord) {\r\n        if (order.orderId.toString().indexOf(keyWord)!==-1\r\n            ||order.createTime.indexOf(keyWord)!==-1\r\n            ||order.totalPrice.toString().indexOf(keyWord)!==-1\r\n            )\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        const {orders} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <SearchBar/>\r\n                <div className={classes.root}>\r\n                    {orders.map(order => this.orderFilter(order, this.props.keyWord)?\r\n                        <React.Fragment key={order.orderId}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"Order\" children=\"订单\"/>\r\n                                <Typography variant=\"h6\">{order.orderId}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{order.createTime}</Typography>\r\n                            <div className={classes.summary}>\r\n                                {\r\n                                    JSON.parse(order.books).map(book=> {\r\n                                        return <Typography>\r\n                                                {book.bookname + \" * \" + book.num}\r\n                                        </Typography>;\r\n                                    })\r\n                                }\r\n                            </div>\r\n                            <Typography className={classes.price}>{\"总价：\" + order.totalPrice}</Typography>\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                        :null\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShowOrder.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        _id: state.Login._id/*, cart:BookAndNum.books*/,\r\n        keyWord: state.Search.keyWord,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ShowOrder));","import React from 'react';\r\nimport {HashRouter, Redirect, Route, Switch} from 'react-router-dom';\r\nimport HomePage from './components/Main/HomePage';\r\nimport BooksPage from './components/Book/BooksPage';\r\nimport BookDetail from \"./components/Book/BookDetail\";\r\nimport ShoppingCart from \"./components/Shopping/ShoppingCart\";\r\nimport SignUp from './components/SignUp';\r\nimport Login from './components/Login';\r\nimport AddNewBook from './components/Book/AddNewBook';\r\nimport UpdateBook from './components/Book/UpdateBook';\r\nimport ManageUser from './components/Manage/ManageUser';\r\nimport ShowStatistics from './components/Shopping/ShowStatistics';\r\nimport ShowOrder from './components/Shopping/ShowOrder';\r\n\r\nconst BasicRoute = () => {\r\n    return (\r\n        <HashRouter>\r\n            <Switch>\r\n                <Route exact path=\"/\" component={/*HomePage*/BooksPage}/>\r\n                <Route exact path=\"/all-books\" component={BooksPage}/>\r\n                <Route exact path=\"/book/:isbn\" component={BookDetail}/>\r\n                <Route exact path=\"/cart\" component={ShoppingCart}/>\r\n                <Route exact path=\"/login\" component={Login}/>\r\n                <Route exact path=\"/signup\" component={SignUp}/>\r\n                <Route exact path=\"/add-new-book\" component={AddNewBook}/>\r\n                <Route exact path=\"/update/:isbn\" component={UpdateBook}/>\r\n                <Route exact path=\"/manage-users\" component={ManageUser}/>\r\n                <Route exact path=\"/order\" component={ShowOrder}/>\r\n                <Route exact path=\"/statistics\" component={ShowStatistics}/>\r\n                <Redirect to={{pathname:'/'}}/>\r\n            </Switch>\r\n        </HashRouter>\r\n    );\r\n};\r\n\r\nexport default BasicRoute;","import {combineReducers} from \"redux/es/redux\";\r\n\r\nfunction Login(state={_id:'',username:'',isManager:0},action) {\r\n    switch (action.type) {\r\n        case \"LOGIN\":\r\n            return action.result;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Redirect(state={redirectTo:null},action) {\r\n    switch (action.type) {\r\n        case 'REDIRECTED':\r\n            return {redirectTo: null};\r\n        case 'SIGN_UP':\r\n        case 'ADD_BOOK':\r\n        case 'LOGIN':\r\n        case \"UPDATE_BOOK\":\r\n            return {redirectTo: '/'};\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\nfunction BookDetail(state={books: [], update:false},action) {\r\n    switch (action.type) {\r\n        case \"UPDATE\":\r\n            const update = state.update;\r\n            return Object.assign({},{books:state.books, update: !update});\r\n        case \"SHOW_BOOK\":\r\n            //只存当前页的书\r\n            return Object.assign({},{books: action.result.books,update:state.update});\r\n        case \"ADD_BOOK\":\r\n            //action.book {\"bookname\":  ,\"stockNum\":  , \"summary\":  ,\"pictureUrl\":  ,\"price\":  ,\"author\":  ,\"isbn\":  }\r\n            const newState = Object.assign({}, state);\r\n            newState.books.push(action.book);\r\n            return newState;\r\n        case \"DELETE_BOOK\":\r\n            //action.isbn\r\n            const newState2 = Object.assign({}, state);\r\n            for (let i = 0; i < newState2.books.length; i++) {\r\n                if (newState2.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    newState2.books.splice(i, 1);\r\n                    return newState2;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            return state;\r\n        case \"UPDATE_BOOK\":\r\n            //action.book\r\n            const newState3 = Object.assign({}, state);\r\n            for (let i = 0; i < newState3.books.length; i++) {\r\n                if (newState3.books[i].bookname === action.book.bookname) {\r\n                    //book exits\r\n                    Object.assign(newState3.books[i],action.book);\r\n                    return newState3;\r\n                }\r\n            }\r\n            //book not exit\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction BookAndNum(state={books: []},action) {\r\n    switch (action.type) {\r\n        case \"SHOW_CART\":\r\n            return {books: action.result.books};\r\n        case \"ADD_TO_CART\":\r\n            //action.bookname action.num\r\n            const newState = Object.assign({}, state);\r\n            for (let i = 0; i < newState.books.length; i++) {\r\n                if (newState.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    newState.books[i].num += action.num;\r\n                    return newState;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            newState.books.push({\"bookname\": action.bookname, \"num\": action.num,\"isbn\":action.isbn});\r\n            return newState;\r\n        case \"REMOVE_FROM_CART\":\r\n            const nState = Object.assign({}, state);\r\n            //action.isbn\r\n            for (var i = 0; i < nState.books.length; i++) {\r\n                if (nState.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    nState.books.splice(i, 1);\r\n                    return nState;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Order(state={orders:[]},action) {\r\n    switch (action.type) {\r\n        case \"SHOW_ORDER\":\r\n            //action.result {orders:[{\"userId\":.....}]}\r\n            return {orders: action.result.orders};\r\n        case \"GENERATE_ORDER\":\r\n            //action.order {\"userId\":...}\r\n            const newState = Object.assign({}, state);\r\n            newState.orders.push(action.order);\r\n            return newState;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Page(state={curPage:1, perPageNum: 10, total: 0}, action) {\r\n    switch (action.type) {\r\n        case \"NEXT_PAGE\":\r\n            return Object.assign({}, state, {curPage: state.curPage + 1});\r\n        case \"LAST_PAGE\":\r\n            return Object.assign({}, state, {curPage: state.curPage - 1});\r\n        case \"RESET_PAGE\":\r\n            return Object.assign({}, state, {curPage: 1});\r\n        case \"SET_PPN\":\r\n            return Object.assign({}, state, {perPageNum: action.PPN});\r\n        case \"SET_TOTAL\":\r\n            return Object.assign({}, state, {total: action.total});\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Search(state={keyWord:'', by: 'isbn'}, action) {\r\n    switch (action.type) {\r\n        case \"SWITCH_BY\":\r\n            if (state.by === 'isbn') {\r\n                return Object.assign({}, state, {by: 'bookname'});\r\n            } else {\r\n                return Object.assign({}, state, {by: 'isbn'});\r\n            }\r\n        case \"SET_KEY\":\r\n            const newState = Object.assign({}, state, {keyWord: action.keyWord});\r\n            return newState;\r\n        case \"RESET_KEY\":\r\n            return Object.assign({}, state, {keyWord: ''});\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers(\r\n    {Login, Redirect, BookDetail, Order, Page, Search}\r\n);","import {createStore/*,applyMiddleware*/} from \"redux\";\r\nimport Reducers from './reducers';\r\n\r\nconst store = createStore(Reducers/*, applyMiddleware()*/);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport BasicRoute from './Routers';\r\nimport {Provider} from 'react-redux';\r\nimport theme from './theme';\r\nimport {MuiThemeProvider} from \"@material-ui/core/styles\";\r\nimport store from './configureStore';\r\n\r\ndocument.title = \"客天涯购书网\";\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <MuiThemeProvider theme={theme}>\r\n            <BasicRoute/>\r\n        </MuiThemeProvider>\r\n    </Provider>\r\n    , document.getElementById('root')\r\n);"],"sourceRoot":""}