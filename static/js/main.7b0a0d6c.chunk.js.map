{"version":3,"sources":["img/signin4.jpg","agent.js","components/Login.js","components/Header.js","components/Main/SearchBar.js","components/Main/ChoosePage.js","components/Main/HomePage.js","components/Book/BookCard.js","components/Main/Catalog.js","components/Book/Pagination.js","components/Book/BooksPage.js","components/Book/BookDetail.js","components/Shopping/ShoppingCart.js","theme.js","components/SignUp.js","components/Book/AddNewBook.js","components/Book/UpdateBook.js","components/Manage/ManageUser.js","components/Shopping/Chart.js","components/Shopping/ShowStatistics.js","components/Shopping/ShowOrder.js","Routers.js","reducers.js","configureStore.js","index.js"],"names":["module","exports","__webpack_require__","p","superagent","require","RootUrl","resBody","res","body","request","url","get","set","then","query","post","send","Book","showBooks","start","num","parseInt","addToCart","_id","bookname","isbn","removeFromCart","delete","showCart","getBookByisbn","getBookByName","Manage","addABook","book","deleteABook","updateABook","put","banAUser","showUsers","Order","showOrder","generateAnOrder","booksArr","mode","books","showStatistics","startTime","endTime","User","login","username","password","signup","email","Login","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","handleInputChange","field","e","newState","assign","defineProperty","target","value","setState","nextProps","redirectTo","history","push","onRedirect","_this2","classes","react_default","a","createElement","src","bgImg","Dialog_default","open","aria-labelledby","DialogTitle_default","id","DialogContent_default","onSubmit","event","preventDefault","checkAccount","FormControl_default","margin","required","fullWidth","InputLabel_default","htmlFor","Input_default","name","onChange","autoFocus","autoComplete","type","Button_default","variant","color","className","submit","React","Component","connect","Redirect","dispatch","result","catch","error","alert","response","msg","withStyles","theme","marginTop","spacing","unit","Header","anchorEl","handleClose","handleClick","currentTarget","handleClickLogin","handleCloseLogin","_this$props","root","AppBar_default","position","Toolbar_default","Typography_default","grow","button","href","Home_default","buttonIcon","isManager","AccountCircle_default","ShoppingCart_default","aria-owns","undefined","aria-haspopup","onClick","Menu_default","Boolean","onClose","MenuItem_default","flexGrow","marginLeft","marginRight","menuButton","hidden","display","SearchBar","key","handleRadioChange","bind","assertThisInitialized","by","setKey","location","pathname","searchBtnClick","test","curPage","perPageNum","searchBooks","err","window","switchBy","_this3","toolbar","Grid_default","container","alignItems","item","xs","title","noWrap","Fragment","index_es","checked","aria-label","checkedIcon","search","searchIcon","searchOnClick","Search_default","InputBase_default","placeholder","inputRoot","input","inputInput","clearBtn","clearAndReset","withRouter","Page","keyWord","Search","total","count","_clearAndReset","asyncToGenerator","regenerator_default","mark","_callee2","wrap","_context2","prev","next","stop","apply","arguments","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","width","breakpoints","up","height","justifyContent","borderRadius","shape","backgroundColor","fade","palette","common","white","&:hover","float","down","primary","elight","overflow","radio","ChoosePage","update","disabled","Divider_default","padding","textAlign","text","secondary","fontSize","HomePage","components_Header","Main_SearchBar","Main_ChoosePage","main","BookCard","deleteBook","Card_default","card","CardActionArea_default","CardMedia_default","media","image","pictureUrl","CardContent_default","gutterBottom","component","author","CardActions_default","size","price","Link","to","deleteButton","icons_index_es","maxWidth","Catalog","List_default","subheader","ListSubheader_default","ListItem_default","ListItemIcon_default","Send_default","ListItemText_default","inset","Drafts_default","MoveToInbox_default","ExpandLess_default","ExpandMore_default","Collapse_default","in","timeout","unmountOnExit","disablePadding","nested","StarBorder_default","Pagination","allPage","Math","ceil","concat","style","label","lastPage","ChevronLeft_default","nextPage","labelPosition","ChevronRight_default","BooksPage","bookPageOnChange","setTotal","storePageBooks","nextContext","console","log","page","forceUpdate","_this4","superRoot","Main_Catalog","map","bookCard","Book_BookCard","Book_Pagination","BookDetail","minWidth","paper","marginBottom","handleChange","numValue","targetisbn","match","params","_books$filter","filter","slicedToArray","left","alt","middle","stockNum","summary","summarySpan","min","max","inputNum","ref","addBtn","buyBtn","buyNow","right","BottomNavigation_default","showLabels","BottomNavigationAction_default","icon","Restore_default","Favorite_default","LocationOn_default","whiteSpace","border","lineHeight","wordWrap","wordBreak","fontWeight","ShoppingCart","removeButtonClick","oldCart","cart","newCart","Avatar_default","avatar","children","link","Delete_default","rightIcon","divider","date","dark","createMuiTheme","pink","light","lightBlue","typography","fontFamily","SignUp","confirmPass","core_styles","Paper_default","flexDirection","NumberFormatCustom","inputRef","other","objectWithoutProperties","number_format_default","getInputRef","onValueChange","values","thousandSeparator","prefix","NumberFormatCustom2","AddNewBook","uploadImgUrl","onImageDrop","handleImageUpload","files","file","end","secure_url","supermain","addNewBook","parseFloat","head","pan","TextField_default","InputProps","inputComponent","cover","accept","length","imgButton","click","img","multiline","rows","submitButton","outline","borderWidth","formControl","UpdateBook","_booksArr$filter","uploadedFile","updateBook","ManageUser","banButtonClick","newUsers","users","user","isBanned","Chart","initEchart","echarts","init","document","getElementById","chartId","setOption","tooltip","trigger","legend","data","yname","toolbox","show","feature","dataView","readOnly","magicType","restore","saveAsImage","xAxis","xname","xdata","yAxis","series","ydata","markPoint","markLine","prevProps","prevState","snapshot","ShowStatistics","bookData","totalConsume","userData","handleTextFieldChange","checkBtnClick","replace","bookX","bookY","i","userX","userY","noValidate","textField","InputLabelProps","shrink","defaultValue","Shopping_Chart","flexWrap","ShowOrder","orders","order","orderId","toString","indexOf","createTime","totalPrice","orderFilter","JSON","parse","BasicRoute","HashRouter","Switch","Route","exact","path","combineReducers","action","newState2","splice","newState3","PPN","store","createStore","Reducers","ReactDOM","render","es","Routers"],"mappings":"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","file":"static/js/main.7b0a0d6c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/signin4.d1971858.jpg\";","var superagent = require('superagent');\r\n\r\n// const RootUrl = 'http://localhost:8080';\r\nconst RootUrl = 'http://47.103.0.246:8080';\r\n\r\nfunction resBody(res) {\r\n    return res.body;\r\n}\r\n\r\nconst request = {\r\n    get: (url)=>superagent.get(RootUrl+url).set('Content-Type','application/json').then(resBody),\r\n    getWith:(url,body)=>superagent.get(RootUrl+url).query(body).then(resBody),\r\n    post:(url,body)=>superagent.post(RootUrl+url).set('Content-Type','application/json').send(body).then(resBody)\r\n};\r\n\r\n//show books, add to cart, manage books and remove a book from cart\r\nexport const Book = {\r\n    showBooks: (start,num)=>request.getWith('/api/book/show',{\"num\":parseInt(num),\"start\":parseInt(start)}),\r\n    addToCart: (_id, bookname, num, isbn) => request.post(\"/api/cart/add\",{\"_id\":parseInt(_id),\"bookname\":bookname, \"num\": num, \"isbn\": isbn}),\r\n    removeFromCart: (_id, bookname, isbn) => superagent.delete(RootUrl + \"/api/cart/remove\").set('Content-Type', 'application/json').send({\r\n        \"_id\": parseInt(_id),\r\n        \"bookname\": bookname,\r\n        \"isbn\": isbn\r\n    }).then(resBody),\r\n    showCart: (_id) => request.getWith(\"/api/cart/show\",{\"_id\": _id}),\r\n    getBookByisbn: (isbn,start,num) => request.getWith('/api/book/showBy',{\"isbn\": parseInt(isbn),\"num\":num,\"start\":start}),\r\n    getBookByName: (bookname,start,num) => request.getWith(\"/api/book/showBy\",{\"bookname\": bookname,\"num\":num,\"start\":start, \"isbn\": -1}),\r\n};\r\n\r\n//the action of manager add a book, delete a book, update a book, ban a user\r\nexport const Manage = {\r\n    addABook: (/*bookname, stockNum, summary, pictureUrl, author, price*/book) => request.post(\"/api/book/manage/add\",\r\n        /*{\r\n            \"bookname\": bookname, \"stockNum\": stockNum, \"summary\": summary, \"pictureUrl\": pictureUrl, \"author\": author,\r\n            \"price\": price\r\n        }*/book),\r\n    deleteABook: (_id, bookname, isbn) => superagent.delete(RootUrl + \"/api/book/manage/delete\").set('Content-Type', 'application/json')\r\n        .send({\"bookname\": bookname, \"_id\": _id, \"isbn\": isbn}).then(resBody),\r\n    updateABook: (/*bookname, stockNum, summary, pictureUrl, author, price, isbn*/book) => superagent.put(RootUrl + \"/api/book/manage/update\")\r\n        .set('Content-Type', 'application/json')\r\n        .send(/*{\r\n            \"bookname\": bookname, \"stockNum\": stockNum, \"summary\": summary, \"pictureUrl\": pictureUrl, \"author\": author,\r\n            \"price\": price, \"isbn\": isbn\r\n        }*/book)\r\n        .then(resBody),\r\n    banAUser: _id => superagent.put(RootUrl + \"/api/user/ban\").set('Content-Type', 'application/json')\r\n        .send({\"_id\": _id}).then(resBody),\r\n    showUsers: () => request.get(\"/api/user/show\")\r\n};\r\n\r\nexport const Order = {\r\n    showOrder: _id => {return request.getWith(\"/api/order/show\",{\"_id\": _id})},\r\n    generateAnOrder: (_id, booksArr, mode) => request.post(\"/api/order/generate\", {\"_id\": _id, \"books\": booksArr, \"mode\": mode}),\r\n    showStatistics: (_id, startTime,endTime) => request.getWith(\"/api/order/show/statistics/buy\", {\"_id\":_id,\"startTime\":startTime,\"endTime\":endTime})\r\n};\r\n\r\n//\r\nexport const User = {\r\n    login: (username, password) => request.post('/api/user/login',{\"username\":username, \"password\": password}),\r\n    signup: (username, password, email) => request.post('/api/user/signup',{\"username\":username, \"password\": password,\r\n        \"email\": email})\r\n};","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport {User} from \"../agent\";\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport {connect} from \"react-redux\";\r\nimport bgImg from '../img/signin4.jpg';\r\n\r\nconst styles = theme => ({\r\n    submit:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    /*img:{\r\n        width: '100%',\r\n        height:'400px',\r\n        backgroundImg: `url(${bgImg})`\r\n    }*/\r\n});\r\n\r\nclass Login extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {username:'',password:''};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div>\r\n                <img src={bgImg}/>\r\n                <Dialog\r\n                    open={true}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">Sign in</DialogTitle>\r\n                    <DialogContent>\r\n                        <form onSubmit={event => {\r\n                            event.preventDefault();\r\n                            this.props.checkAccount(this.state.username, this.state.password);\r\n                        }}>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"username\">UserName</InputLabel>\r\n                                <Input\r\n                                    id=\"username\"\r\n                                    name=\"username\"\r\n                                    value={this.state.username}\r\n                                    onChange={this.handleInputChange('username')}\r\n                                    autoFocus\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    value={this.state.password}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('password')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                className={classes.submit}\r\n                            >\r\n                                Sign in\r\n                            </Button>\r\n                        </form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        checkAccount: (username, password) => {\r\n            User.login(username, password).then(res=>dispatch({type: \"LOGIN\",result:res})).catch(error=>alert(error.response.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(Login));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Home from '@material-ui/icons/Home';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\r\nimport Login from './Login';\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n        marginRight: -theme.spacing.unit,\r\n    },\r\n    grow: {\r\n        flexGrow: theme.spacing.unit * 2,\r\n    },\r\n    button: {\r\n        marginRight: theme.spacing.unit * 5,\r\n    },\r\n    menuButton:{\r\n\r\n    },\r\n    hidden : {\r\n        display: 'none',\r\n    },\r\n    buttonIcon: {\r\n        marginRight: theme.spacing.unit * 0.5,\r\n    },\r\n});\r\n\r\nclass Header extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {anchorEl: null, open: false};\r\n        this.handleClose = () => {\r\n            this.setState({anchorEl: null});\r\n        };\r\n        this.handleClick = event => {\r\n            this.setState({anchorEl: event.currentTarget});\r\n        };\r\n        this.handleClickLogin = () => {\r\n            this.setState({ open: true });\r\n        };\r\n\r\n        this.handleCloseLogin = () => {\r\n            this.setState({ anchorEl: null, open: false });\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { classes,Login } = this.props;\r\n        const { anchorEl } = this.state;\r\n        return (\r\n            <div className={classes.root}>\r\n\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n                            欢迎，{Login.username !== '' ? Login.username : '请登录'}\r\n                        </Typography>\r\n                        <Button color=\"inherit\" className={classes.button} href=\"#\">\r\n                            <Home className={classes.buttonIcon}/>\r\n                            主页\r\n                        </Button>\r\n                        {Login._id !== \"\" ?\r\n                            <Button color=\"inherit\" className={classes.button} href=\"#/statistics\">\r\n                                <Home className={classes.buttonIcon}/>\r\n                                数据统计\r\n                            </Button>\r\n                            :null\r\n                        }\r\n                        {Login._id !== \"\" ?\r\n                            (\r\n                                Login.isManager ?\r\n                                    <Button color=\"inherit\" className={classes.button} href=\"#/manage-users\">\r\n                                        <AccountCircle className={classes.buttonIcon}/>\r\n                                        管理用户\r\n                                    </Button>\r\n                                    :\r\n                                    <Button color=\"inherit\" className={classes.button} href=\"#/cart\">\r\n                                        <ShoppingCart className={classes.buttonIcon}/>\r\n                                        购物车\r\n                                    </Button>\r\n                            ) : null\r\n                        }\r\n                        <Button\r\n                            aria-owns={anchorEl ? 'simple-menu' : undefined}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={this.handleClick}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <AccountCircle className={classes.buttonIcon}/>\r\n                            注册/登录\r\n                        </Button>\r\n                        <Menu\r\n                            id=\"simple-menu\"\r\n                            anchorEl={anchorEl}\r\n                            open={Boolean(anchorEl)}\r\n                            onClose={this.handleClose}\r\n                        >\r\n                            <MenuItem onClick={this.handleClose}>\r\n                                <Button color=\"inherit\" fullWidth href=\"#/login\">\r\n                                    登录\r\n                                </Button>\r\n                            </MenuItem>\r\n                            <MenuItem onClick={this.handleClose}>\r\n                                <Button color=\"inherit\" fullWidth href=\"#/signup\">\r\n                                    注册\r\n                                </Button>\r\n                            </MenuItem>\r\n                        </Menu>\r\n                    </Toolbar>\r\n                </AppBar>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {Login: state.Login};\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(Header));\r\n//export default withStyles(styles)(Header);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\nimport {connect} from \"react-redux\";\r\nimport {Book} from \"../../agent\";\r\nimport {Radio} from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst styles = theme => ({\r\n    inputInput: {\r\n        paddingTop: theme.spacing.unit,\r\n        paddingRight: theme.spacing.unit,\r\n        paddingBottom: theme.spacing.unit,\r\n        paddingLeft: theme.spacing.unit * 10,\r\n        transition: theme.transitions.create('width'),\r\n        width: '100%',\r\n\r\n        [theme.breakpoints.up('md')]: {\r\n        width: 200,\r\n    },\r\n    },\r\n    inputRoot: {\r\n        color: 'inherit',\r\n        width: '100%',\r\n        display:'inline-block'\r\n\r\n    },\r\n    searchIcon: {\r\n        marginLeft:theme.spacing.unit,\r\n        //width: theme.spacing.unit * 2,\r\n        height: '100%',\r\n        position: 'absolute',\r\n        //pointerEvents: 'none',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'right',\r\n    },\r\n    search: {\r\n        position: 'relative',\r\n        borderRadius: theme.shape.borderRadius,\r\n\r\n        backgroundColor: fade(theme.palette.common.white, 0.35),\r\n        '&:hover': {\r\n            backgroundColor: fade(theme.palette.common.white, 0.55),\r\n        },\r\n        marginRight: theme.spacing.unit * 2,\r\n        float: 'right',\r\n        width: '400px',\r\n        [theme.breakpoints.down('md')]: {\r\n            width: 'auto',\r\n        },\r\n    },\r\n    toolbar: {\r\n        marginLeft: -theme.spacing.unit,\r\n        marginRight: -theme.spacing.unit,\r\n        height: '100px',\r\n        paddingTop: theme.spacing.unit * 3,\r\n        backgroundColor: theme.palette.primary.elight,\r\n    },\r\n    title: {\r\n        overflow: 'visible',\r\n        marginLeft: theme.spacing.unit*3,\r\n    },\r\n    radio:{\r\n        display: 'inline-block',\r\n        width: '10px',\r\n    },\r\n    clearBtn:{\r\n        marginLeft:-8*theme.spacing.unit,\r\n        //width: theme.spacing.unit * 2,\r\n        height: '100%',\r\n        position: 'absolute',\r\n    },\r\n    hidden:{\r\n        display:\"none\"\r\n    }\r\n});\r\n\r\nclass SearchBar extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {key:''};\r\n        this.handleRadioChange = this.handleRadioChange.bind(this);\r\n    }\r\n\r\n    async searchOnClick() {\r\n        const key = this.state.key;\r\n        const by = this.props.by;\r\n        this.props.setKey(key);\r\n        //alert(this.props.location.pathname);\r\n        if (key === ''||key===undefined) {\r\n            alert('关键字不能为空哦~');\r\n        } else {\r\n            //根据当前页面是订单页还是图书页进行不同处理\r\n            if (this.props.location.pathname === \"/order\") {\r\n\r\n            } else {\r\n                await this.props.searchBtnClick();\r\n                if (by === 'isbn') {\r\n                    var regPos = /^\\d+(\\.\\d+)?$/;\r\n                    if (!regPos.test(key)) {\r\n                        alert(\"输入的isbn格式不正确\");\r\n                    } else {\r\n                        Book.getBookByisbn(key,this.props.curPage,this.props.perPageNum)\r\n                            .then(res => this.props.searchBooks(res))\r\n                            .catch(error=>alert(error.response.body.msg));\r\n                    }\r\n                } else {\r\n                    Book.getBookByName(key,this.props.curPage,this.props.perPageNum)\r\n                        .then(res => this.props.searchBooks(res))\r\n                        .catch(err => {alert(err.response.body.msg);window.open('https://www.baidu.com/s?wd=' + key, '_blank')});\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleRadioChange(e) {\r\n        this.props.switchBy();\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div className={classes.toolbar}>\r\n                <Grid container spacing={24} alignItems=\"center\">\r\n                    <Grid item xs={6}>\r\n                        <Typography className={classes.title} variant=\"h2\" color=\"secondary\" noWrap>\r\n                            j-bu ok-y\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                        <React.Fragment>\r\n                            <Typography variant=\"h6\" color=\"inherit\"\r\n                                        className={this.props.location.pathname === \"/order\"?classes.hidden:null}>\r\n                                通过以下方式查找书:\r\n                            </Typography>\r\n                            <Radio\r\n                                checked={this.props.by === 'isbn'}\r\n                                onChange={this.handleRadioChange}\r\n                                value=\"isbn\"\r\n                                name=\"radio-button\"\r\n                                aria-label=\"isbn\"\r\n                                checkedIcon={\"isbn\"}\r\n                                className={this.props.location.pathname === \"/order\"?classes.hidden:null}\r\n                            />\r\n                            <Radio\r\n                                checked={this.props.by === 'bookname'}\r\n                                onChange={this.handleRadioChange}\r\n                                value=\"bookname\"\r\n                                name=\"radio-button\"\r\n                                aria-label=\"bookname\"\r\n                                checkedIcon={\"书名\"}\r\n                                className={this.props.location.pathname === \"/order\"?classes.hidden:null}\r\n                            />\r\n                        </React.Fragment>\r\n                        <div className={classes.search}>\r\n                            <Button className={classes.searchIcon}\r\n                                        onClick={() => this.searchOnClick()}>\r\n                                <SearchIcon/>\r\n                                Go\r\n                            </Button>\r\n                            <InputBase\r\n                                placeholder={\"输入关键字查找...\"}\r\n                                classes={{\r\n                                    root: classes.inputRoot,\r\n                                    input: classes.inputInput,\r\n                                }}\r\n                                value={this.state.key}\r\n                                onChange={e => this.setState({key:e.target.value})}/>\r\n                            <Button className={classes.clearBtn}\r\n                                    onClick={()=>{this.props.clearAndReset();this.setState({key:''})}}\r\n                            >\r\n                                x\r\n                            </Button>\r\n                        </div>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n        keyWord: state.Search.keyWord,\r\n        by: state.Search.by,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        searchBooks: res => {\r\n            dispatch({type:\"SHOW_BOOK\",result:res});\r\n            dispatch({type:\"SET_TOTAL\",total:res.count});\r\n        },\r\n        clearAndReset: async () => {\r\n            await dispatch({type:\"RESET_KEY\"});\r\n            dispatch({type:\"RESET_PAGE\"});\r\n            dispatch({type:\"UPDATE\"});\r\n        },\r\n        switchBy: () => dispatch({type:\"SWITCH_BY\"}),\r\n        setKey: (key) => dispatch({type:\"SET_KEY\", keyWord:key}),\r\n        searchBtnClick: () => {dispatch({type:\"RESET_PAGE\"});}\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SearchBar)));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport {connect} from \"react-redux\";\r\n\r\nconst styles = theme => (\r\n    {\r\n        button:{\r\n            padding: theme.spacing.unit * 2,\r\n            textAlign: 'center',\r\n            color: theme.palette.text.secondary,\r\n            margin: theme.spacing.unit,\r\n            fontSize: '18px',\r\n        },\r\n        root:{\r\n            flexGrow: 1,\r\n        },\r\n    }\r\n);\r\n\r\nclass ChoosePage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const {classes, isManager, _id} = this.props;\r\n        return (\r\n            <div className={classes.root}>\r\n                <Grid container spacing={24} alignItems=\"center\">\r\n                    {isManager?\r\n                        <React.Fragment>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href='#/all-books'>图书管理</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href='#/manage-users'>用户管理</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href=\"#/order\">订单管理</Button>\r\n                            </Grid>\r\n                        </React.Fragment>\r\n                    :\r\n                        <React.Fragment>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} onClick={()=>this.props.update()}>所有图书</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true}>新书推荐</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href=\"#/order\" disabled={_id===''}>我的订单</Button>\r\n                            </Grid>\r\n                        </React.Fragment>}\r\n                </Grid>\r\n                <Divider/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        _id: state.Login._id,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        update: ()=>dispatch({type:\"UPDATE\"})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(ChoosePage));","import React from 'react';\r\nimport Header from '../Header';\r\nimport SearchBar from './SearchBar';\r\nimport ChoosePage from './ChoosePage';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n//import {connect } from \"react-redux\";\r\n\r\nconst styles = theme => ({\r\n    main:{\r\n        backgroundColor:theme.palette.secondary.main,\r\n\r\n    }\r\n\r\n});\r\n\r\n\r\n\r\nclass HomePage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <React.Fragment>\r\n                <Header/>\r\n                <SearchBar/>\r\n                <ChoosePage/>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(HomePage);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {Link} from 'react-router-dom';\r\nimport {Login} from '../../agent';\r\nimport {connect} from \"react-redux\";\r\nimport {IconButton} from \"@material-ui/core\";\r\nimport {Delete} from \"@material-ui/icons\";\r\n\r\nconst styles = {\r\n    card: {\r\n        maxWidth: 170,\r\n    },\r\n    media: {\r\n        height: 250,\r\n    },\r\n    author:{\r\n        color:'gray'\r\n    },\r\n    deleteButton:{\r\n        //position:'absolute',\r\n        //float:'right',\r\n        padding: '6px',\r\n        marginLeft: '10px'\r\n    }\r\n};\r\n\r\nclass BookCard extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const { classes,book, isManager, _id, deleteBook} = this.props;\r\n        return (\r\n            <Card className={classes.card}>\r\n                <CardActionArea>\r\n                    <CardMedia\r\n                        className={classes.media}\r\n                        image={book.pictureUrl}\r\n                        title=\"Contemplative Reptile\"\r\n                    />\r\n\r\n                    <CardContent>\r\n                        <Typography gutterBottom variant=\"h6\" component=\"h4\">\r\n                            {book.bookname}\r\n                        </Typography>\r\n                        <Typography component=\"p\" className={classes.author}>\r\n                            {book.author}\r\n                        </Typography>\r\n                    </CardContent>\r\n                </CardActionArea>\r\n                <CardActions>\r\n                    <Button size=\"small\" color=\"primary\">\r\n                        {book.price}\r\n                    </Button>\r\n                    {!isManager?\r\n                        <Link to={'book/' + book.isbn}>\r\n                            详情\r\n                        </Link>:\r\n                        <Link to={'update/' + book.isbn}>\r\n                            修改\r\n                        </Link>\r\n                    }\r\n                    {\r\n                        isManager?\r\n                            <IconButton className={classes.deleteButton}\r\n                            onClick={()=>deleteBook(_id, book.bookname, book.isbn)}>\r\n                                <Delete/>\r\n                            </IconButton>\r\n                            :null\r\n                    }\r\n                </CardActions>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        _id: state.Login._id\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(BookCard));\r\n\r\n","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport DraftsIcon from '@material-ui/icons/Drafts';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport StarBorder from '@material-ui/icons/StarBorder';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '100%',\r\n        //maxWidth: 200,\r\n        height: '500px',\r\n        marginLeft: theme.spacing.unit * 3,\r\n        backgroundColor: theme.palette.secondary.elight,\r\n        float:'left',\r\n    },\r\n    nested: {\r\n        paddingLeft: theme.spacing.unit * 4,\r\n    },\r\n});\r\n\r\nclass Catalog extends React.Component {\r\n    state = {\r\n        open: true,\r\n    };\r\n\r\n    handleClick = () => {\r\n        this.setState(state => ({ open: !state.open }));\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <List\r\n                component=\"nav\"\r\n                subheader={<ListSubheader component=\"div\">类别</ListSubheader>}\r\n                className={classes.root}\r\n            >\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <SendIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"语文\" />\r\n                </ListItem>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"数学\" />\r\n                </ListItem>\r\n                <ListItem button onClick={this.handleClick}>\r\n                    <ListItemIcon>\r\n                        <InboxIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"英语\" />\r\n                    {this.state.open ? <ExpandLess /> : <ExpandMore />}\r\n                </ListItem>\r\n                <Collapse in={this.state.open} timeout=\"auto\" unmountOnExit>\r\n                    <List component=\"div\" disablePadding>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"小学\" />\r\n                        </ListItem>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"初中\" />\r\n                        </ListItem>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"高中\" />\r\n                        </ListItem>\r\n                    </List>\r\n                </Collapse>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"物理\" />\r\n                </ListItem>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"化学\" />\r\n                </ListItem>\r\n            </List>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(Catalog);","import React from \"react\";\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\nimport {Button,Toolbar} from \"@material-ui/core\";\r\nimport {connect} from \"react-redux\";\r\n\r\nclass Pagination extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const {total,perPageNum,isManager,curPage} = this.props;\r\n        const allPage = Math.ceil(total / perPageNum) || 1;\r\n        return (\r\n            //allPage > 1 &&\r\n            <Toolbar>\r\n                <div>\r\n                    {\r\n                        `${(curPage - 1) * perPageNum + 1}-${curPage * perPageNum<total?curPage * perPageNum:total} of ${allPage} Pages`\r\n                    }\r\n                </div>\r\n                <div style={{marginLeft: '200px'}}>\r\n                    {\r\n                        <Button primary key=\"prev\" label=\"上一页\" disabled={curPage <= 1}\r\n                                onClick={() => this.props.lastPage()}>\r\n                            <ChevronLeft/>\r\n                            上一页\r\n                        </Button>\r\n                    }\r\n                    {\r\n                        `当前页：${curPage}`\r\n                    }\r\n                    {\r\n                        <Button primary key=\"next\" label=\"下一页\" disabled={curPage === allPage}\r\n                                onClick={() => this.props.nextPage()} labelPosition=\"before\">\r\n                            下一页\r\n                            <ChevronRight/>\r\n                        </Button>\r\n                    }\r\n                </div>\r\n                {isManager?\r\n                    <div style={{marginLeft:'400px'}}>\r\n                        <Button size=\"large\" variant=\"outlined\" href=\"#/add-new-book\">\r\n                            新增图书\r\n                        </Button>\r\n                    </div>\r\n                :null}\r\n            </Toolbar>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        total: state.Page.total,\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n    }\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        nextPage: ()=>dispatch({type: \"NEXT_PAGE\"}),\r\n        lastPage: ()=>dispatch({type: \"LAST_PAGE\"}),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pagination);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport ChoosePage from '../Main/ChoosePage';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport BookCard from './BookCard';\r\nimport Catalog from '../Main/Catalog';\r\nimport Pagination from './Pagination';\r\nimport {connect} from \"react-redux\";\r\nimport {Book, Manage} from \"../../agent\";\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n      minWidth:'900px'\r\n    },\r\n    root: {\r\n        position: 'relative',\r\n        paddingTop: theme.spacing.unit,\r\n        paddingLeft: theme.spacing.unit * 5,\r\n        backgroundColor: theme.palette.common.paper,\r\n    },\r\n    bookCard:{\r\n        marginLeft: theme.spacing.unit * 4,\r\n        position: 'relative',\r\n        display: 'inline-block',\r\n        width:'200px',\r\n        height: '250px',\r\n        marginBottom: theme.spacing.unit * 15,\r\n    },\r\n\r\n});\r\n\r\nclass BooksPage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.bookPageOnChange = this.bookPageOnChange.bind(this);\r\n        this.deleteBook = this.deleteBook.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Book.showBooks(this.props.curPage,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);\r\n        return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n    }\r\n    componentWillReceiveProps(nextProps, nextContext) {\r\n        if (this.props.curPage!==nextProps.curPage || this.props.update!==nextProps.update)\r\n        {\r\n            this.bookPageOnChange(nextProps.curPage);\r\n            console.log(this.props.update!==nextProps.update);\r\n            console.log(this.props.keyWord);\r\n        }\r\n    }\r\n\r\n    bookPageOnChange(page){\r\n        if (this.props.keyWord===\"\" || this.props.keyWord===undefined)\r\n        {\r\n            Book.showBooks(page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n        }\r\n        else\r\n        {\r\n            if (this.props.by === 'isbn') {\r\n                Book.getBookByisbn(this.props.keyWord,page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n            } else {\r\n                Book.getBookByName(this.props.keyWord,page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteBook(_id, bookname, isbn) {\r\n        Manage.deleteABook(_id, bookname, isbn).then(this, this.props.deleteBook(isbn)).catch(error=>alert(error.response.body.msg));\r\n        this.forceUpdate();\r\n    }\r\n        render() {\r\n        const {classes,books} = this.props;\r\n            return (\r\n                <div className={classes.superRoot}>\r\n                    <Header/>\r\n                    <SearchBar/>\r\n                    <ChoosePage/>\r\n                    <Grid container spacing={0}>\r\n                        <Grid item xs={2}>\r\n                            <Catalog/>\r\n                        </Grid>\r\n                        <Grid item xs={9} wrap=\"wrap\">\r\n                            {\r\n                                books!==undefined?\r\n                                    <div className={classes.root}>\r\n                                        {\r\n                                            books.map((book) => (\r\n                                                <div className={classes.bookCard}>\r\n                                                    <BookCard book={book} deleteBook={this.deleteBook}/>\r\n                                                </div>\r\n                                            ))\r\n                                        }\r\n                                    </div>:\r\n                                    <p className={classes.root}>没有符合条件的书籍</p>\r\n                            }\r\n\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Pagination/>\r\n                </div>\r\n            );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        books: state.BookDetail.books,\r\n        update: state.BookDetail.update,\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n        keyWord: state.Search.keyWord,\r\n        by: state.Search.by,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        storePageBooks: res => dispatch({type:\"SHOW_BOOK\",result:res}),\r\n        deleteBook: isbn=>dispatch({type:\"DELETE_BOOK\",isbn:isbn}),\r\n        setTotal: total=>dispatch({type:\"SET_TOTAL\",total:total})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(BooksPage));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {Button} from \"@material-ui/core\";\r\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\r\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\r\nimport RestoreIcon from '@material-ui/icons/Restore';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport {connect} from \"react-redux\";\r\nimport {Book,Order} from '../../agent';\r\n\r\nconst styles = theme => ({\r\n    superRoot: {\r\n        minWidth: '800px',\r\n    },\r\n    root: {\r\n        position: 'relative',\r\n        paddingTop: theme.spacing.unit * 3,\r\n        paddingLeft: '8%',\r\n        paddingRight: '3%',\r\n        height: '350px',\r\n        backgroundColor: theme.palette.common.paper,\r\n    },\r\n    left: {\r\n        height: '250px',\r\n        padding: theme.spacing.unit,\r\n        textAlign: 'center',\r\n        position: 'absolute',\r\n        width: '18%',\r\n        backgroundColor: '#ccc'\r\n    },\r\n    middle: {\r\n        height: '200px',\r\n        textAlign: 'left',\r\n        marginLeft: '21%',\r\n        width: '49%',\r\n        position: 'absolute',\r\n        whiteSpace: 'pre',\r\n    },\r\n    right: {\r\n        height: '200px',\r\n        border: '1px dashed #fab',\r\n        lineHeight: '40px',\r\n        //backgroundColor: 'purple',\r\n        width: '15%',\r\n        position: 'absolute',\r\n        marginLeft: '75%',\r\n        textAlign: 'center',\r\n        fontSize: '25px',\r\n        color: '#2aa',\r\n        padding: '10px',\r\n    },\r\n    price: {\r\n        backgroundColor: '#689',\r\n        color: '#922',\r\n        width: '90%',\r\n        fontSize: '28px',\r\n        margin: '10px 0',\r\n        padding: '30px'\r\n    },\r\n    summary: {\r\n        marginTop: theme.spacing.unit,\r\n        marginBottom: theme.spacing.unit * 2,\r\n        height: 'auto',\r\n        lineHeight: '20px',\r\n\r\n    },\r\n    summarySpan: {\r\n        width: '200px',\r\n        whiteSpace: 'normal',\r\n        wordWrap: 'break-word',\r\n        wordBreak: 'break-all',\r\n        overflow: 'hidden',\r\n    },\r\n    inputNum: {\r\n        width: '40px',\r\n        height: '30px',\r\n    },\r\n    addBtn: {\r\n        backgroundColor: '#f88',\r\n        marginLeft: theme.spacing.unit,\r\n        fontSize: '18px',\r\n        color: 'white',\r\n    },\r\n    buyBtn: {\r\n        marginLeft: theme.spacing.unit * 2,\r\n        backgroundColor: '#fee',\r\n        fontSize: '18px',\r\n        color: '#f48',\r\n        fontWeight: 'normal'\r\n    },\r\n    body: {\r\n        position: \"relative\",\r\n        marginTop: '10px',\r\n        backgroundColor: '#d39',\r\n        marginLeft: '50px',\r\n    },\r\n});\r\n\r\nclass BookDetail extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            value: 0,\r\n        };\r\n    }\r\n    handleChange = (event, value) => {\r\n        this.setState({ value });\r\n    };\r\n    render() {\r\n        const {classes, books, _id} = this.props;\r\n        let targetisbn = parseInt(this.props.match.params.isbn);\r\n        const [book] = books.filter(book=>book.isbn===targetisbn);\r\n        let numValue;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <SearchBar/>\r\n                <div className={classes.root}>\r\n                    <div className={classes.left}>\r\n                        <img src={book.pictureUrl} alt=\"别买了，这书连封面都没有\"\r\n                             width=\"100%\" height=\"100%\"/>\r\n                    </div>\r\n                    <div className={classes.middle}>\r\n                        <Typography variant=\"h4\">{book.bookname}</Typography>\r\n                        <Divider/>\r\n                        <Typography variant=\"body1\" color=\"inherit\">\r\n                            作者：{book.author}\r\n                            {\"       \"}\r\n                            库存：{book.stockNum}\r\n                        </Typography>\r\n                        <div className={classes.price}>\r\n                            ￥ {book.price}\r\n                        </div>\r\n                        <div className={classes.summary}>\r\n                            <span className={classes.summarySpan}>\r\n                                {book.summary}\r\n                            </span>\r\n                        </div>\r\n                        <input type=\"number\" min=\"1\" max={book.stockNum} className={classes.inputNum}\r\n                               ref={ref => numValue = ref}\r\n                        />\r\n                        <Button className={classes.addBtn} onClick={\r\n                            () => (_id === '' ? alert(\"请先登录\") :\r\n                                    (numValue.value > book.stockNum ? alert(\"库存不足\") :\r\n                                        (numValue.value <= 0 || numValue.value === 'undefined' ? alert(\"请正确填写数量\") :\r\n                                            this.props.addToCart(_id, book.bookname, numValue.value, book.isbn)))\r\n                            )\r\n                        }>\r\n                            加入购物车\r\n                        </Button>\r\n                        <Button className={classes.buyBtn} onClick={\r\n                            () => (_id === '' ? alert(\"请先登录\") :\r\n                                    (numValue.value > book.stockNum ? alert(\"库存不足\") :\r\n                                        (numValue.value <= 0 || numValue.value === 'undefined' ? alert(\"请正确填写数量\") :\r\n                                            this.props.buyNow(_id, [{\r\n                                                \"bookname\": book.bookname,\r\n                                                \"num\": numValue.value,\r\n                                                \"isbn\": book.isbn\r\n                                            }], \"buy directly\")))\r\n                            )\r\n                        }>\r\n                            立即购买\r\n                        </Button>\r\n                    </div>\r\n                    <div className={classes.right}>\r\n                        广告位招租：1元/条\r\n                        --客天涯是一个大帅b\r\n                    </div>\r\n\r\n                </div>\r\n                <div className={classes.body}>\r\n                    <BottomNavigation\r\n                        value={this.state.value}\r\n                        onChange={this.handleChange}\r\n                        showLabels\r\n                    >\r\n                        <BottomNavigationAction label=\"商品评论\" icon={<RestoreIcon/>}/>\r\n                        <BottomNavigationAction label=\"猜你喜欢\" icon={<FavoriteIcon/>}/>\r\n                        <BottomNavigationAction label=\"附近的人\" icon={<LocationOnIcon/>}/>\r\n                    </BottomNavigation>\r\n                    <Divider/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        books: state.BookDetail.books,\r\n        _id: state.Login._id,\r\n    }\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        addToCart: (_id, bookname, num, isbn) => Book.addToCart(_id, bookname, num, isbn).then(dispatch({\r\n            type: \"ADD_TO_CART\",\r\n            bookname: bookname,\r\n            num: num,\r\n            isbn: isbn\r\n        })).then(alert(\"加入购物车成功！\")).catch(error=>alert(error.response.body.msg)),\r\n        buyNow: (_id, booksArr, mode) => Order.generateAnOrder(_id,booksArr,mode)\r\n            .then(alert(\"购买成功！\")).catch(error=>alert(error.response.body.msg)),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(BookDetail));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport {Link} from 'react-router-dom';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Header from '../Header';\r\nimport {Book, Order} from \"../../agent\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ShoppingCart extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {cart: []};\r\n        this.removeButtonClick = this.removeButtonClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Book.showCart(this.props._id).then(res=> this.setState({cart:res.books})).catch(err=>alert(err.response.body.msg));\r\n    }\r\n\r\n    removeButtonClick = (_id, bookname, isbn) =>\r\n        Book.removeFromCart(_id, bookname, isbn).then(() => {\r\n                const oldCart = this.state.cart;\r\n                console.log(oldCart);\r\n                const newCart = oldCart.filter(book=>isbn!==book.isbn);\r\n                console.log(newCart);\r\n                this.setState({cart: newCart});\r\n            }\r\n        ).catch(err=>alert(\"移除书失败！\"));\r\n\r\n    render() {\r\n        const {classes/*, removeButtonClick*/} = this.props;\r\n        const {cart} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <div className={classes.root}>\r\n                    {cart.map(book =>\r\n                        <React.Fragment key={book.isbn}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"Book\" children=\"书\"/>\r\n                                <Typography variant=\"h6\">{book.isbn}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{book.bookname}</Typography>\r\n                            <Typography className={classes.summary}>{\"数量：\" + book.num}</Typography>\r\n                            <Link to={'book/' + book.isbn} className={classes.link}>详情</Link>\r\n                            <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                                    onClick={() => this.removeButtonClick(this.props._id, book.bookname, book.isbn)}>\r\n                                不要你了\r\n                                <DeleteIcon className={classes.rightIcon}/>\r\n                            </Button>\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                    )}\r\n                </div>\r\n                <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                        onClick={() => Order.generateAnOrder(this.props._id, this.state.cart, \"buy by cart\").then(this.setState({cart:[]}))\r\n                            .catch(err=>alert(err.res.body.msg))}>\r\n                    结算\r\n                    <DeleteIcon className={classes.rightIcon}/>\r\n                </Button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShoppingCart.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    const {Login/*, BookAndNum*/} = state;\r\n    return {_id: Login._id/*, cart:BookAndNum.books*/};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        /*removeButtonClick: (_id, bookname, isbn) => Book.removeFromCart(_id, bookname, isbn).then(dispatch({\r\n            type: 'REMOVE_FROM_CART',\r\n            isbn: isbn\r\n        })).catch(() => alert('delete article failed, please try again')),*/\r\n        //storeCart: res=> dispatch({type:\"SHOW_CART\",result:res})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(ShoppingCart));\r\n","import {createMuiTheme} from '@material-ui/core/styles';\r\nimport {pink, purple, lightBlue} from '@material-ui/core/colors';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            elight: pink[50],\r\n            light: pink[200],\r\n            main: pink[500],\r\n            dark: pink[800],\r\n        },\r\n        secondary: {\r\n            elight:lightBlue[50],\r\n            light: lightBlue[200],\r\n            main: lightBlue[500],\r\n            dark: lightBlue[800],\r\n        },\r\n    },\r\n    typography: {\r\n        fontFamily: \"Roboto\",\r\n    },\r\n    shape: {\r\n        borderRadius: 8,\r\n    }\r\n});\r\n\r\nexport default theme;","import React from 'react';\r\nimport Header from './Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Button from '@material-ui/core/Button';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../theme';\r\nimport {User} from \"../agent\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst styles = theme => ({\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 400,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n\r\n});\r\n\r\nclass SignUp extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {username:'',password:'',confirmPass:'',email:''};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <Header/>\r\n                <main className={this.props.classes.main}>\r\n                    <Paper className={this.props.classes.paper}>\r\n                        <AccountCircle/>\r\n                        <Typography component=\"h1\" variant=\"h5\">\r\n                            Sign up\r\n                        </Typography>\r\n                        <form onSubmit={event => {\r\n                            event.preventDefault();\r\n                            if (this.state.password === this.state.confirmPass) {\r\n                                this.props.checkAccount(this.state.username, this.state.password, this.state.email);\r\n                            } else {\r\n                                alert('前后密码不一致');\r\n                            }\r\n                        }}>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"username\">UserName</InputLabel>\r\n                                <Input\r\n                                    id=\"username\"\r\n                                    name=\"username\"\r\n                                    value={this.state.username}\r\n                                    onChange={this.handleInputChange('username')}\r\n                                    autoFocus\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    value={this.state.password}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('password')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"confirmPass\">confirm your password</InputLabel>\r\n                                <Input\r\n                                    id=\"confirmPass\"\r\n                                    name=\"confirmPass\"\r\n                                    value={this.state.confirmPass}\r\n                                    //autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('confirmPass')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"email\">email</InputLabel>\r\n                                <Input\r\n                                    id=\"email\"\r\n                                    name=\"email\"\r\n                                    value={this.state.email}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('email')}\r\n                                    type=\"email\"\r\n                                />\r\n                            </FormControl>\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                            >\r\n                                Sign up\r\n                            </Button>\r\n                        </form>\r\n                    </Paper>\r\n                </main>\r\n            </MuiThemeProvider>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        checkAccount: (username, password, email) => {\r\n            User.signup(username, password, email).then(res=>dispatch({type: \"SIGN_UP\"})).catch(error=>alert(error.response.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(SignUp));","import React from 'react';\r\nimport Header from '../Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../../theme';\r\nimport {connect} from \"react-redux\";\r\nimport request from 'superagent';\r\nimport {Manage} from \"../../agent\";\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport NumberFormat from 'react-number-format';\r\n\r\n\r\nconst styles = theme => ({\r\n    supermain:{\r\n        minWidth: '650px',\r\n    },\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(800 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 800,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n    submitButton:{\r\n        float:'right',\r\n    },\r\n    imgButton:{\r\n        fullWidth: 'true',\r\n        backgroundColor: '#fff',\r\n        outline: 'none',\r\n        borderWidth: '0px',\r\n        borderRadius: '3px',\r\n    },\r\n    input:{\r\n        display:'none'\r\n    },\r\n    img: {\r\n        width: '120px',\r\n        height: '170px',\r\n    },\r\n    bookname:{\r\n        display: 'block',\r\n    },\r\n    author:{\r\n\r\n    },\r\n    head:{\r\n        float: 'left',\r\n        height: '170px',\r\n    },\r\n    cover:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        float: 'right',\r\n        height: '170px',\r\n        width: '120px',\r\n        border: '1px dashed blue',\r\n    },\r\n    price:{\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing.unit,\r\n    },\r\n    pan:{\r\n        float: 'left',\r\n        height: '170px',\r\n        marginLeft: theme.spacing.unit * 4,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n});\r\n\r\n//连接cloudinary的东西\r\nconst CLOUDINARY_UPLOAD_PRESET = 'cvtoheob';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dbqbt0cli/upload';\r\n\r\n//格式化stockNum输入\r\nfunction NumberFormatCustom(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"* \"\r\n        />\r\n    );\r\n}\r\n\r\nfunction NumberFormatCustom2(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"￥\"\r\n        />\r\n    );\r\n}\r\n\r\n\r\nclass AddNewBook extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {bookname: '', summary: '', uploadImgUrl: '', price: '0', author: '', stockNum: '0'};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n        this.onImageDrop = this.onImageDrop.bind(this);\r\n        this.handleImageUpload = this.handleImageUpload.bind(this);\r\n    }\r\n\r\n    onImageDrop(files) {\r\n        this.handleImageUpload(files[0]);\r\n    }\r\n\r\n    handleImageUpload(file) {\r\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                console.log(err);\r\n            }\r\n            if (response.body.secure_url !== '') {\r\n                this.setState({\r\n                    uploadImgUrl: response.body.secure_url\r\n                });\r\n                console.log(response.body.secure_url);\r\n                //this.forceUpdate();\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <div className={this.props.classes.supermain}>\r\n                    <Header/>\r\n                    <main className={this.props.classes.main}>\r\n                        <Paper className={this.props.classes.paper}>\r\n                            <form onSubmit={\r\n                                e => {\r\n                                    e.preventDefault();\r\n                                    this.props.addNewBook(\r\n                                        {\r\n                                            \"bookname\": this.state.bookname,\r\n                                            \"stockNum\": parseInt(this.state.stockNum),\r\n                                            \"summary\": this.state.summary,\r\n                                            \"pictureUrl\": this.state.uploadImgUrl,\r\n                                            \"author\": this.state.author,\r\n                                            \"price\": parseFloat(this.state.price)\r\n                                        }\r\n                                    )\r\n                                }\r\n                            }>\r\n                                <div className={this.props.classes.head}>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.bookname}>\r\n                                        <InputLabel htmlFor=\"bookname\">Book Name</InputLabel>\r\n                                        <Input\r\n                                            id=\"bookname\"\r\n                                            name=\"bookname\"\r\n                                            value={this.state.bookname}\r\n                                            onChange={this.handleInputChange('bookname')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.author}>\r\n                                        <InputLabel htmlFor=\"author\">Author</InputLabel>\r\n                                        <Input\r\n                                            id=\"author\"\r\n                                            name=\"author\"\r\n                                            value={this.state.author}\r\n                                            onChange={this.handleInputChange('author')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                </div>\r\n                                <div className={this.props.classes.pan}>\r\n                                    <TextField\r\n                                        className={this.props.classes.price}\r\n                                        label=\"Price\"\r\n                                        value={this.state.price}\r\n                                        onChange={this.handleInputChange('price')}\r\n                                        id=\"formatted-numberformat-price\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom2,\r\n                                        }}\r\n                                    />\r\n                                    <TextField\r\n                                        //className={this.props.classes.formControl}\r\n                                        label=\"Stock Number\"\r\n                                        value={this.state.stockNum}\r\n                                        onChange={this.handleInputChange('stockNum')}\r\n                                        id=\"formatted-numberformat-stockNum\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom,\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                                <div className={this.props.classes.cover}>\r\n                                    <input accept=\".jpg,.jpeg,.png \" className={this.props.classes.input}\r\n                                           id=\"icon-button-file\" type=\"file\"\r\n                                           ref={ref => this.image = ref} onChange={event => {\r\n                                        if (event.target.files.length !== 0) {\r\n                                            this.onImageDrop(event.target.files);\r\n                                        }\r\n                                    }\r\n                                    }/>\r\n                                    <button className={this.props.classes.imgButton} onClick={() => this.image.click()}\r\n                                    type=\"button\">\r\n                                        {this.state.uploadImgUrl === '' ?\r\n                                            <p>pick cover</p> :\r\n                                            <img className={this.props.classes.img} src={this.state.uploadImgUrl}/>}\r\n                                    </button>\r\n                                </div>\r\n                                <TextField margin=\"normal\" required fullWidth multiline\r\n                                           label=\"summary\" rows={6} variant='outlined'\r\n                                           id=\"summary\" placeholder=\"summary of the book...\"\r\n                                           value={this.state.summary}\r\n                                           onChange={this.handleInputChange('summary')}\r\n                                />\r\n                                <Button type=\"submit\" variant=\"contained\" color=\"primary\"\r\n                                        className={this.props.classes.submitButton}>\r\n                                    提交\r\n                                </Button>\r\n                            </form>\r\n                        </Paper>\r\n                    </main>\r\n                </div>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n        //authToken: state.Login.token,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        addNewBook: (book) => {\r\n            Manage.addABook(book)\r\n                .then(res=>dispatch({type:'ADD_BOOK',book:book}))\r\n                .catch(error=>alert(error.response.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(AddNewBook));","import React from 'react';\r\nimport Header from '../Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../../theme';\r\nimport {connect} from \"react-redux\";\r\nimport request from 'superagent';\r\nimport {Manage} from \"../../agent\";\r\nimport NumberFormat from 'react-number-format';\r\n\r\n\r\nconst styles = theme => ({\r\n    supermain:{\r\n        minWidth: '650px',\r\n    },\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(800 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 800,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n    submitButton:{\r\n        float:'right',\r\n    },\r\n    imgButton:{\r\n        fullWidth: 'true',\r\n        backgroundColor: '#fff',\r\n        outline: 'none',\r\n        borderWidth: '0px',\r\n        borderRadius: '3px',\r\n    },\r\n    input:{\r\n        display:'none'\r\n    },\r\n    img: {\r\n        width: '120px',\r\n        height: '170px',\r\n    },\r\n    bookname:{\r\n        display: 'block',\r\n    },\r\n    author:{\r\n\r\n    },\r\n    head:{\r\n        float: 'left',\r\n        height: '170px',\r\n    },\r\n    cover:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        float: 'right',\r\n        height: '170px',\r\n        width: '120px',\r\n        border: '1px dashed blue',\r\n    },\r\n    price:{\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing.unit,\r\n    },\r\n    pan:{\r\n        float: 'left',\r\n        height: '170px',\r\n        marginLeft: theme.spacing.unit * 4,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n});\r\n\r\n//连接cloudinary的东西\r\nconst CLOUDINARY_UPLOAD_PRESET = 'cvtoheob';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dbqbt0cli/upload';\r\n\r\n//格式化stockNum输入\r\nfunction NumberFormatCustom(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"* \"\r\n        />\r\n    );\r\n}\r\n\r\nfunction NumberFormatCustom2(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"￥\"\r\n        />\r\n    );\r\n}\r\n\r\n\r\nclass UpdateBook extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        const booksArr = this.props.booksArr;\r\n        let targetisbn = parseInt(this.props.match.params.isbn);\r\n        const [book] = booksArr.filter(book=>book.isbn===targetisbn);\r\n        this.state = {bookname: book.bookname, summary: book.summary, uploadImgUrl: book.pictureUrl,\r\n            price: book.price, author: book.author, stockNum: book.stockNum, isbn: targetisbn};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n        this.onImageDrop = this.onImageDrop.bind(this);\r\n        this.handleImageUpload = this.handleImageUpload.bind(this);\r\n    }\r\n\r\n    onImageDrop(files) {\r\n        this.setState({\r\n            uploadedFile: files[0]\r\n        });\r\n\r\n        this.handleImageUpload(files[0]);\r\n    }\r\n\r\n    handleImageUpload(file) {\r\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                console.error(err);\r\n            }\r\n            if (response.body.secure_url !== '') {\r\n                this.setState({\r\n                    uploadImgUrl: response.body.secure_url\r\n                });\r\n                console.log(response.body.secure_url);\r\n                //this.forceUpdate();\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <div className={this.props.classes.supermain}>\r\n                    <Header/>\r\n                    <main className={this.props.classes.main}>\r\n                        <Paper className={this.props.classes.paper}>\r\n                            <form onSubmit={\r\n                                e => {\r\n                                    e.preventDefault();\r\n                                    this.props.updateBook(\r\n                                        {\r\n                                            \"bookname\": this.state.bookname,\r\n                                            \"stockNum\": parseInt(this.state.stockNum),\r\n                                            \"summary\": this.state.summary,\r\n                                            \"pictureUrl\": this.state.uploadImgUrl,\r\n                                            \"author\": this.state.author,\r\n                                            \"price\": parseFloat(this.state.price),\r\n                                            \"isbn\": this.state.isbn\r\n                                        }\r\n                                    )\r\n                                }\r\n                            }>\r\n                                <div className={this.props.classes.head}>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.bookname}>\r\n                                        <InputLabel htmlFor=\"bookname\">Book Name</InputLabel>\r\n                                        <Input\r\n                                            id=\"bookname\"\r\n                                            name=\"bookname\"\r\n                                            value={this.state.bookname}\r\n                                            onChange={this.handleInputChange('bookname')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.author}>\r\n                                        <InputLabel htmlFor=\"author\">Author</InputLabel>\r\n                                        <Input\r\n                                            id=\"author\"\r\n                                            name=\"author\"\r\n                                            value={this.state.author}\r\n                                            onChange={this.handleInputChange('author')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                </div>\r\n                                <div className={this.props.classes.pan}>\r\n                                    <TextField\r\n                                        className={this.props.classes.price}\r\n                                        label=\"Price\"\r\n                                        value={this.state.price}\r\n                                        onChange={this.handleInputChange('price')}\r\n                                        id=\"formatted-numberformat-price\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom2,\r\n                                        }}\r\n                                    />\r\n                                    <TextField\r\n                                        //className={this.props.classes.formControl}\r\n                                        label=\"Stock Number\"\r\n                                        value={this.state.stockNum}\r\n                                        onChange={this.handleInputChange('stockNum')}\r\n                                        id=\"formatted-numberformat-stockNum\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom,\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                                <div className={this.props.classes.cover}>\r\n                                    <input accept=\".jpg,.jpeg,.png \" className={this.props.classes.input}\r\n                                           id=\"icon-button-file\" type=\"file\"\r\n                                           ref={ref => this.image = ref} onChange={event => {\r\n                                        if (event.target.files.length !== 0) {\r\n                                            this.onImageDrop(event.target.files);\r\n                                        }\r\n                                    }\r\n                                    }/>\r\n                                    <button className={this.props.classes.imgButton} onClick={() => this.image.click()}\r\n                                    type=\"button\">\r\n                                        {this.state.uploadImgUrl === '' ?\r\n                                            <p>pick cover</p> :\r\n                                            <img className={this.props.classes.img} src={this.state.uploadImgUrl}/>}\r\n                                    </button>\r\n                                </div>\r\n                                <TextField margin=\"normal\" required fullWidth multiline\r\n                                           label=\"summary\" rows={6} variant='outlined'\r\n                                           id=\"summary\" placeholder=\"summary of the book...\"\r\n                                           value={this.state.summary}\r\n                                           onChange={this.handleInputChange('summary')}\r\n                                />\r\n                                <Button type=\"submit\" variant=\"contained\" color=\"primary\"\r\n                                        className={this.props.classes.submitButton}>\r\n                                    更新\r\n                                </Button>\r\n                            </form>\r\n                        </Paper>\r\n                    </main>\r\n                </div>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n        booksArr: state.BookDetail.books\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        updateBook: (book) => {\r\n            Manage.updateABook(book)\r\n                .then(()=>dispatch({type:'UPDATE_BOOK',book:book}))\r\n                .catch((err)=>alert(err.res.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(UpdateBook));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Header from '../Header';\r\nimport {Manage} from \"../../agent\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ManageUser extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {users: []};\r\n        this.banButtonClick = this.banButtonClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Manage.showUsers().then(res=> this.setState({users:res.users})).catch(err=>alert(err.res.body.msg));\r\n    }\r\n\r\n    banButtonClick = (_id) =>\r\n        Manage.banAUser(_id).then(() => {\r\n                const oldUsers = this.state.users;\r\n                const newUsers = oldUsers.map(user=>{\r\n                    if (user._id === _id) {\r\n                        user.isBanned = !user.isBanned;\r\n                    }\r\n                    return user;\r\n                });\r\n\r\n                this.setState({users: newUsers});\r\n            }\r\n        ).catch(err=>alert(err.res.body.msg));\r\n\r\n    render() {\r\n        const {classes/*, removeButtonClick*/} = this.props;\r\n        const {users} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <div className={classes.root}>\r\n                    {users.map(user =>\r\n                        <React.Fragment key={user._id}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"用户\" children=\"user\"/>\r\n                                <Typography variant=\"h6\">{user._id}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{user.username}</Typography>\r\n                            {\r\n                                user.isManager?\r\n                                    <React.Fragment>\r\n                                        <Typography className={classes.summary}>\r\n                                            {user._id===1?\"超级管理员大Boss\":\"一般管理员\"}\r\n                                        </Typography>\r\n                                    </React.Fragment>\r\n                                    :\r\n                                    <React.Fragment>\r\n                                        <Typography className={classes.summary}>\r\n                                            普通用户\r\n                                        </Typography>\r\n                                        <Typography>\r\n                                            状态：\r\n                                            {user.isBanned?\"被禁用\":\"正常\"}\r\n                                        </Typography>\r\n                                        <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                                                onClick={() => this.banButtonClick(user._id)}>\r\n                                            {user.isBanned?\"解禁\":\"禁用\"}\r\n                                            <DeleteIcon className={classes.rightIcon}/>\r\n                                        </Button>\r\n                                    </React.Fragment>\r\n                            }\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nManageUser.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    //日后可用来记录是哪个管理员操作的\r\n    return {_id: state.Login._id/*, cart:BookAndNum.books*/};\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ManageUser));","import React from 'react';\r\nimport echarts from 'echarts/lib/echarts';\r\nimport 'echarts/lib/chart/bar';\r\nimport 'echarts/lib/chart/line';\r\nimport 'echarts/lib/component/tooltip';\r\nimport 'echarts/lib/component/title';\r\nimport 'echarts/lib/component/legend';\r\nimport 'echarts/lib/component/toolbox';\r\nimport 'echarts/lib/component/markPoint';\r\nimport 'echarts/lib/component/markLine';\r\n\r\n\r\nclass Chart extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.initEchart = this.initEchart.bind(this);\r\n    }\r\n    initEchart() {\r\n        // 初始化\r\n        var myChart = echarts.init(document.getElementById(this.props.chartId));\r\n        // 绘制图表\r\n        myChart.setOption({\r\n            title: { text: this.props.text },\r\n            tooltip : {\r\n                trigger: 'axis'\r\n            },\r\n            legend: {\r\n                data:[this.props.yname,]\r\n            },\r\n            toolbox: {\r\n                show : true,\r\n                feature : {\r\n                    dataView : {show: true, readOnly: false},\r\n                    magicType : {show: true, type: ['line', 'bar']},\r\n                    restore : {show: true},\r\n                    saveAsImage : {\r\n                        show: true,\r\n                        type: 'jpg'\r\n                    }\r\n                }\r\n            },\r\n            xAxis : [\r\n                {\r\n                    name : this.props.xname,\r\n                    type : 'category',\r\n                    data : this.props.data.xdata\r\n                }\r\n            ],\r\n            yAxis : [\r\n                {\r\n                    type : 'value'\r\n                }\r\n            ],\r\n            series : [\r\n                {\r\n                    name:this.props.yname,\r\n                    type:'bar',\r\n                    data: this.props.data.ydata,\r\n                    markPoint : {\r\n                        data : [\r\n                            {type : 'max', name: '最大值'},\r\n                            {type : 'min', name: '最小值'}\r\n                        ]\r\n                    },\r\n                    markLine : {\r\n                        data : [\r\n                            {type : 'average', name: '平均值'}\r\n                        ]\r\n                    }\r\n                },\r\n            ]\r\n        });\r\n    }\r\n    componentDidMount() {\r\n        this.initEchart();\r\n    }\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        this.initEchart();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id={this.props.chartId} style={{ width: 800, height: 500 }}></div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Chart;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport {connect} from \"react-redux\";\r\nimport {Order} from \"../../agent\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport Chart from './Chart';\r\nimport {Button} from \"@material-ui/core\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    },\r\n    price:{\r\n\r\n    },\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing.unit,\r\n        marginRight: theme.spacing.unit,\r\n        width: 200,\r\n    },\r\n});\r\n\r\n\r\n\r\nclass ShowStatistics extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            bookData:{\r\n                xdata: [],\r\n                ydata: [],\r\n                totalConsume: 0\r\n            },\r\n            userData:{\r\n                xdata:[],\r\n                ydata:[],\r\n            },\r\n            startTime:\"2017-08-01T05:20\",\r\n            endTime:\"2019-05-24T13:14\"\r\n        };\r\n        this.handleTextFieldChange = name => event =>{\r\n            this.setState({[name]:event.target.value})\r\n        };\r\n        this.checkBtnClick = this.checkBtnClick.bind(this);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.checkBtnClick()\r\n    }\r\n\r\n    checkBtnClick(){\r\n        const startTime = this.state.startTime.replace('T',' ') + ':00';\r\n        const endTime = this.state.endTime.replace('T',' ') + ':00';\r\n        Order.showStatistics(this.props._id, startTime, endTime).then(res=>{\r\n                const book = res.book;\r\n                const bookX = [];\r\n                const bookY = [];\r\n                for (var i in book){\r\n                    bookX.push(i);\r\n                    bookY.push(book[i]);\r\n                }\r\n                this.setState({bookData:{xdata: bookX,ydata: bookY,totalConsume: res.totalConsume}})\r\n                if (this.props.isManager){\r\n                    const user = res.user;\r\n                    const userX = [];\r\n                    const userY = [];\r\n                    for (var i in user){\r\n                        userX.push(i);\r\n                        userY.push(user[i]);\r\n                    }\r\n                    this.setState({userData:{xdata: userX,ydata: userY}})\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <form className={classes.container} noValidate>\r\n                    <TextField\r\n                        id=\"startTime\"\r\n                        label=\"startTime\"\r\n                        type=\"datetime-local\"\r\n                        value={this.state.startTime}\r\n                        className={classes.textField}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                        onChange={this.handleTextFieldChange('startTime')}\r\n                    />\r\n                </form>\r\n                <form className={classes.container} noValidate>\r\n                    <TextField\r\n                        id=\"endTime\"\r\n                        label=\"endTime\"\r\n                        type=\"datetime-local\"\r\n                        defaultValue={this.state.endTime}\r\n                        className={classes.textField}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                        onChange={this.handleTextFieldChange('endTime')}\r\n                    />\r\n                </form>\r\n                <Button onClick={()=>this.checkBtnClick()}>\r\n                    查询\r\n                </Button>\r\n                <Chart data={this.state.bookData} text={'书籍情况'} yname={'购买数量'} xname={'书籍isbn'} chartId={'main1'}/>\r\n                {\r\n                    this.props.isManager?\r\n                        <Chart data={this.state.userData} text={'用户情况'} yname={'花费金额'} xname={'用户id'} chartId={'main2'}/>\r\n                        :null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShowStatistics.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager:state.Login.isManager,\r\n        _id:state.Login._id,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ShowStatistics));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Header from '../Header';\r\nimport {connect} from \"react-redux\";\r\nimport {Order} from \"../../agent\";\r\nimport SearchBar from '../Main/SearchBar';\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    },\r\n    price:{\r\n\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ShowOrder extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {orders: []};\r\n    }\r\n\r\n    componentDidMount() {\r\n        Order.showOrder(this.props._id).then(res=> this.setState({orders:res.orders})).catch(error=>alert(error.response.body.msg));\r\n    }\r\n\r\n    orderFilter(order, keyWord) {\r\n        if (order.orderId.toString().indexOf(keyWord)!==-1\r\n            ||order.createTime.indexOf(keyWord)!==-1\r\n            ||order.totalPrice.toString().indexOf(keyWord)!==-1\r\n            )\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        const {orders} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <SearchBar/>\r\n                <div className={classes.root}>\r\n                    {orders.map(order => this.orderFilter(order, this.props.keyWord)?\r\n                        <React.Fragment key={order.orderId}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"Order\" children=\"订单\"/>\r\n                                <Typography variant=\"h6\">{order.orderId}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{order.createTime}</Typography>\r\n                            <div className={classes.summary}>\r\n                                {\r\n                                    JSON.parse(order.books).map(book=> {\r\n                                        return <Typography>\r\n                                                {book.bookname + \" * \" + book.num}\r\n                                        </Typography>;\r\n                                    })\r\n                                }\r\n                            </div>\r\n                            <Typography className={classes.price}>{\"总价：\" + order.totalPrice}</Typography>\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                        :null\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShowOrder.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        _id: state.Login._id/*, cart:BookAndNum.books*/,\r\n        keyWord: state.Search.keyWord,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ShowOrder));","import React from 'react';\r\nimport {HashRouter, Route, Switch} from 'react-router-dom';\r\nimport HomePage from './components/Main/HomePage';\r\nimport BooksPage from './components/Book/BooksPage';\r\nimport BookDetail from \"./components/Book/BookDetail\";\r\nimport ShoppingCart from \"./components/Shopping/ShoppingCart\";\r\nimport SignUp from './components/SignUp';\r\nimport Login from './components/Login';\r\nimport AddNewBook from './components/Book/AddNewBook';\r\nimport UpdateBook from './components/Book/UpdateBook';\r\nimport ManageUser from './components/Manage/ManageUser';\r\nimport ShowStatistics from './components/Shopping/ShowStatistics';\r\nimport ShowOrder from './components/Shopping/ShowOrder';\r\n\r\nconst BasicRoute = () => {\r\n    return (\r\n        <HashRouter>\r\n            <Switch>\r\n                <Route exact path=\"/\" component={/*HomePage*/BooksPage}/>\r\n                <Route exact path=\"/all-books\" component={BooksPage}/>\r\n                <Route exact path=\"/book/:isbn\" component={BookDetail}/>\r\n                <Route exact path=\"/cart\" component={ShoppingCart}/>\r\n                <Route exact path=\"/login\" component={Login}/>\r\n                <Route exact path=\"/signup\" component={SignUp}/>\r\n                <Route exact path=\"/add-new-book\" component={AddNewBook}/>\r\n                <Route exact path=\"/update/:isbn\" component={UpdateBook}/>\r\n                <Route exact path=\"/manage-users\" component={ManageUser}/>\r\n                <Route exact path=\"/order\" component={ShowOrder}/>\r\n                <Route exact path=\"/statistics\" component={ShowStatistics}/>\r\n            </Switch>\r\n        </HashRouter>\r\n    );\r\n};\r\n\r\nexport default BasicRoute;","import {combineReducers} from \"redux/es/redux\";\r\n\r\nfunction Login(state={_id:'',username:'',isManager:0},action) {\r\n    switch (action.type) {\r\n        case \"LOGIN\":\r\n            return action.result;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Redirect(state={redirectTo:null},action) {\r\n    switch (action.type) {\r\n        case 'REDIRECTED':\r\n            return {redirectTo: null};\r\n        case 'SIGN_UP':\r\n        case 'ADD_BOOK':\r\n        case 'LOGIN':\r\n        case \"UPDATE_BOOK\":\r\n            return {redirectTo: '/'};\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\nfunction BookDetail(state={books: [], update:false},action) {\r\n    switch (action.type) {\r\n        case \"UPDATE\":\r\n            const update = state.update;\r\n            return Object.assign({},{books:state.books, update: !update});\r\n        case \"SHOW_BOOK\":\r\n            //只存当前页的书\r\n            return Object.assign({},{books: action.result.books,update:state.update});\r\n        case \"ADD_BOOK\":\r\n            //action.book {\"bookname\":  ,\"stockNum\":  , \"summary\":  ,\"pictureUrl\":  ,\"price\":  ,\"author\":  ,\"isbn\":  }\r\n            const newState = Object.assign({}, state);\r\n            newState.books.push(action.book);\r\n            return newState;\r\n        case \"DELETE_BOOK\":\r\n            //action.isbn\r\n            const newState2 = Object.assign({}, state);\r\n            for (let i = 0; i < newState2.books.length; i++) {\r\n                if (newState2.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    newState2.books.splice(i, 1);\r\n                    return newState2;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            return state;\r\n        case \"UPDATE_BOOK\":\r\n            //action.book\r\n            const newState3 = Object.assign({}, state);\r\n            for (let i = 0; i < newState3.books.length; i++) {\r\n                if (newState3.books[i].bookname === action.book.bookname) {\r\n                    //book exits\r\n                    Object.assign(newState3.books[i],action.book);\r\n                    return newState3;\r\n                }\r\n            }\r\n            //book not exit\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction BookAndNum(state={books: []},action) {\r\n    switch (action.type) {\r\n        case \"SHOW_CART\":\r\n            return {books: action.result.books};\r\n        case \"ADD_TO_CART\":\r\n            //action.bookname action.num\r\n            const newState = Object.assign({}, state);\r\n            for (let i = 0; i < newState.books.length; i++) {\r\n                if (newState.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    newState.books[i].num += action.num;\r\n                    return newState;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            newState.books.push({\"bookname\": action.bookname, \"num\": action.num,\"isbn\":action.isbn});\r\n            return newState;\r\n        case \"REMOVE_FROM_CART\":\r\n            const nState = Object.assign({}, state);\r\n            //action.isbn\r\n            for (var i = 0; i < nState.books.length; i++) {\r\n                if (nState.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    nState.books.splice(i, 1);\r\n                    return nState;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Order(state={orders:[]},action) {\r\n    switch (action.type) {\r\n        case \"SHOW_ORDER\":\r\n            //action.result {orders:[{\"userId\":.....}]}\r\n            return {orders: action.result.orders};\r\n        case \"GENERATE_ORDER\":\r\n            //action.order {\"userId\":...}\r\n            const newState = Object.assign({}, state);\r\n            newState.orders.push(action.order);\r\n            return newState;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Page(state={curPage:1, perPageNum: 10, total: 0}, action) {\r\n    switch (action.type) {\r\n        case \"NEXT_PAGE\":\r\n            return Object.assign({}, state, {curPage: state.curPage + 1});\r\n        case \"LAST_PAGE\":\r\n            return Object.assign({}, state, {curPage: state.curPage - 1});\r\n        case \"RESET_PAGE\":\r\n            return Object.assign({}, state, {curPage: 1});\r\n        case \"SET_PPN\":\r\n            return Object.assign({}, state, {perPageNum: action.PPN});\r\n        case \"SET_TOTAL\":\r\n            return Object.assign({}, state, {total: action.total});\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Search(state={keyWord:'', by: 'isbn'}, action) {\r\n    switch (action.type) {\r\n        case \"SWITCH_BY\":\r\n            if (state.by === 'isbn') {\r\n                return Object.assign({}, state, {by: 'bookname'});\r\n            } else {\r\n                return Object.assign({}, state, {by: 'isbn'});\r\n            }\r\n        case \"SET_KEY\":\r\n            const newState = Object.assign({}, state, {keyWord: action.keyWord});\r\n            return newState;\r\n        case \"RESET_KEY\":\r\n            return Object.assign({}, state, {keyWord: ''});\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers(\r\n    {Login, Redirect, BookDetail, Order, Page, Search}\r\n);","import {createStore/*,applyMiddleware*/} from \"redux\";\r\nimport Reducers from './reducers';\r\n\r\nconst store = createStore(Reducers/*, applyMiddleware()*/);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport BasicRoute from './Routers';\r\nimport {Provider} from 'react-redux';\r\nimport theme from './theme';\r\nimport {MuiThemeProvider} from \"@material-ui/core/styles\";\r\nimport store from './configureStore';\r\n\r\ndocument.title = \"客天涯购书网\";\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <MuiThemeProvider theme={theme}>\r\n            <BasicRoute/>\r\n        </MuiThemeProvider>\r\n    </Provider>\r\n    , document.getElementById('root')\r\n);"],"sourceRoot":""}