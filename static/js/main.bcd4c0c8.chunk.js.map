{"version":3,"sources":["img/signin4.jpg","agent.js","components/Login.js","components/Header.js","components/Main/SearchBar.js","components/Main/ChoosePage.js","components/Main/HomePage.js","components/Book/BookCard.js","components/Main/Catalog.js","components/Book/Pagination.js","components/Book/BooksPage.js","components/Book/Comments.js","components/Book/BookDetail.js","components/Shopping/ShoppingCart.js","theme.js","components/SignUp.js","components/Book/AddNewBook.js","components/Book/UpdateBook.js","components/Manage/ManageUser.js","components/Shopping/Chart.js","components/Shopping/ShowStatistics.js","components/Shopping/ShowOrder.js","Routers.js","reducers.js","configureStore.js","index.js"],"names":["module","exports","__webpack_require__","p","superagent","require","RootUrl","resBody","res","body","request","url","get","set","then","query","post","send","Book","showBooks","start","num","parseInt","addToCart","_id","bookname","isbn","removeFromCart","delete","showCart","getBookByisbn","getBookByName","Manage","addABook","book","deleteABook","updateABook","put","banAUser","showUsers","Order","showOrder","generateAnOrder","booksArr","mode","books","showStatistics","startTime","endTime","User","login","username","password","signup","email","Comment","showComment","addComment","userId","indexArr","comment_content","index","content","Login","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","handleInputChange","field","e","newState","assign","defineProperty","target","value","setState","nextProps","redirectTo","history","push","onRedirect","_this2","classes","react_default","a","createElement","src","bgImg","Dialog_default","open","aria-labelledby","DialogTitle_default","id","DialogContent_default","onSubmit","event","preventDefault","checkAccount","FormControl_default","margin","required","fullWidth","InputLabel_default","htmlFor","Input_default","name","onChange","autoFocus","autoComplete","type","Button_default","variant","color","className","submit","React","Component","connect","Redirect","dispatch","result","catch","error","alert","response","msg","withStyles","theme","marginTop","spacing","unit","Header","anchorEl","handleClose","handleClick","currentTarget","handleClickLogin","handleCloseLogin","_this$props","root","AppBar_default","position","Toolbar_default","Typography_default","grow","button","href","Home_default","buttonIcon","Comment_default","isManager","AccountCircle_default","ShoppingCart_default","aria-owns","undefined","aria-haspopup","onClick","Menu_default","Boolean","onClose","MenuItem_default","flexGrow","marginLeft","marginRight","menuButton","hidden","display","SearchBar","key","handleRadioChange","bind","assertThisInitialized","by","setKey","location","pathname","searchBtnClick","test","curPage","perPageNum","searchBooks","err","window","switchBy","_this3","toolbar","Grid_default","container","alignItems","item","xs","title","noWrap","Fragment","index_es","checked","aria-label","checkedIcon","search","searchIcon","searchOnClick","Search_default","InputBase_default","placeholder","inputRoot","input","inputInput","clearBtn","clearAndReset","withRouter","Page","keyWord","Search","total","count","_clearAndReset","asyncToGenerator","regenerator_default","mark","_callee2","wrap","_context2","prev","next","stop","apply","arguments","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","width","breakpoints","up","height","justifyContent","borderRadius","shape","backgroundColor","fade","palette","common","white","&:hover","float","down","primary","elight","overflow","radio","ChoosePage","update","disabled","Divider_default","padding","textAlign","text","secondary","fontSize","HomePage","components_Header","Main_SearchBar","Main_ChoosePage","main","BookCard","deleteBook","Card_default","card","CardActionArea_default","Link","to","CardMedia_default","media","image","pictureUrl","CardContent_default","gutterBottom","component","author","CardActions_default","size","price","deleteButton","icons_index_es","maxWidth","Catalog","List_default","subheader","ListSubheader_default","ListItem_default","ListItemIcon_default","Send_default","ListItemText_default","inset","Drafts_default","MoveToInbox_default","ExpandLess_default","ExpandMore_default","Collapse_default","in","timeout","unmountOnExit","disablePadding","nested","StarBorder_default","Pagination","allPage","Math","ceil","concat","style","label","lastPage","ChevronLeft_default","nextPage","labelPosition","ChevronRight_default","BooksPage","bookPageOnChange","setTotal","storePageBooks","nextContext","console","log","page","forceUpdate","_this4","superRoot","Main_Catalog","map","bookCard","Book_BookCard","Book_Pagination","BookDetail","minWidth","paper","marginBottom","Comments","handleClickOpen","slice","input_content","handleSubmit","handleContentChange","comments","commentTime","replace","substring","indexOf","replies","parentName","reply","subreply","Avatar_default","avatar","alt","children","getTime","length","showTree","comment","summary","fabiao","TextField_default","rows","multiline","DialogActions_default","dark","handleChange","targetisbn","match","params","numValue","left","middle","stockNum","summarySpan","min","max","inputNum","ref","addBtn","buyBtn","buyNow","right","BottomNavigation_default","showLabels","BottomNavigationAction_default","icon","Restore_default","Favorite_default","LocationOn_default","Book_Comments","whiteSpace","border","lineHeight","wordWrap","wordBreak","fontWeight","ShoppingCart","removeButtonClick","oldCart","cart","newCart","filter","link","Delete_default","rightIcon","divider","date","createMuiTheme","pink","light","lightBlue","typography","fontFamily","SignUp","confirmPass","core_styles","Paper_default","flexDirection","NumberFormatCustom","inputRef","other","objectWithoutProperties","number_format_default","getInputRef","onValueChange","values","thousandSeparator","prefix","NumberFormatCustom2","AddNewBook","uploadImgUrl","onImageDrop","handleImageUpload","files","file","end","secure_url","supermain","addNewBook","parseFloat","head","pan","InputProps","inputComponent","cover","accept","imgButton","click","img","submitButton","outline","borderWidth","formControl","UpdateBook","_booksArr$filter","slicedToArray","uploadedFile","updateBook","ManageUser","banButtonClick","newUsers","users","user","isBanned","Chart","initEchart","echarts","init","document","getElementById","chartId","setOption","tooltip","trigger","legend","data","yname","toolbox","show","feature","dataView","readOnly","magicType","restore","saveAsImage","xAxis","xname","xdata","yAxis","series","ydata","markPoint","markLine","prevProps","prevState","snapshot","ShowStatistics","bookData","totalConsume","userData","handleTextFieldChange","checkBtnClick","bookX","bookY","i","userX","userY","noValidate","textField","InputLabelProps","shrink","defaultValue","Shopping_Chart","flexWrap","ShowOrder","orders","order","orderId","toString","createTime","totalPrice","orderFilter","JSON","parse","BasicRoute","HashRouter","Switch","Route","exact","path","combineReducers","action","newState2","splice","newState3","PPN","store","createStore","Reducers","ReactDOM","render","es","Routers"],"mappings":"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","file":"static/js/main.bcd4c0c8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/signin4.d1971858.jpg\";","var superagent = require('superagent');\r\n\r\nconst RootUrl = 'http://localhost:8080';\r\n// const RootUrl = 'http://47.103.0.246:8080';\r\n\r\nfunction resBody(res) {\r\n    return res.body;\r\n}\r\n\r\nconst request = {\r\n    get: (url)=>superagent.get(RootUrl+url).set('Content-Type','application/json').then(resBody),\r\n    getWith:(url,body)=>superagent.get(RootUrl+url).query(body).then(resBody),\r\n    post:(url,body)=>superagent.post(RootUrl+url).set('Content-Type','application/json').send(body).then(resBody)\r\n};\r\n\r\n//show books, add to cart, manage books and remove a book from cart\r\nexport const Book = {\r\n    showBooks: (start,num)=>request.getWith('/api/book/show',{\"num\":parseInt(num),\"start\":parseInt(start)}),\r\n    addToCart: (_id, bookname, num, isbn) => request.post(\"/api/cart/add\",{\"_id\":parseInt(_id),\"bookname\":bookname, \"num\": num, \"isbn\": isbn}),\r\n    removeFromCart: (_id, bookname, isbn) => superagent.delete(RootUrl + \"/api/cart/remove\").set('Content-Type', 'application/json').send({\r\n        \"_id\": parseInt(_id),\r\n        \"bookname\": bookname,\r\n        \"isbn\": isbn\r\n    }).then(resBody),\r\n    showCart: (_id) => request.getWith(\"/api/cart/show\",{\"_id\": _id}),\r\n    getBookByisbn: (isbn,start,num) => request.getWith('/api/book/showBy',{\"isbn\": parseInt(isbn),\"num\":num,\"start\":start}),\r\n    getBookByName: (bookname,start,num) => request.getWith(\"/api/book/showBy\",{\"bookname\": bookname,\"num\":num,\"start\":start, \"isbn\": -1}),\r\n};\r\n\r\n//the action of manager add a book, delete a book, update a book, ban a user\r\nexport const Manage = {\r\n    addABook: (/*bookname, stockNum, summary, pictureUrl, author, price*/book) => request.post(\"/api/book/manage/add\",\r\n        /*{\r\n            \"bookname\": bookname, \"stockNum\": stockNum, \"summary\": summary, \"pictureUrl\": pictureUrl, \"author\": author,\r\n            \"price\": price\r\n        }*/book),\r\n    deleteABook: (_id, bookname, isbn) => superagent.delete(RootUrl + \"/api/book/manage/delete\").set('Content-Type', 'application/json')\r\n        .send({\"bookname\": bookname, \"_id\": _id, \"isbn\": isbn}).then(resBody),\r\n    updateABook: (/*bookname, stockNum, summary, pictureUrl, author, price, isbn*/book) => superagent.put(RootUrl + \"/api/book/manage/update\")\r\n        .set('Content-Type', 'application/json')\r\n        .send(/*{\r\n            \"bookname\": bookname, \"stockNum\": stockNum, \"summary\": summary, \"pictureUrl\": pictureUrl, \"author\": author,\r\n            \"price\": price, \"isbn\": isbn\r\n        }*/book)\r\n        .then(resBody),\r\n    banAUser: _id => superagent.put(RootUrl + \"/api/user/ban\").set('Content-Type', 'application/json')\r\n        .send({\"_id\": _id}).then(resBody),\r\n    showUsers: () => request.get(\"/api/user/show\")\r\n};\r\n\r\nexport const Order = {\r\n    showOrder: _id => {return request.getWith(\"/api/order/show\",{\"_id\": _id})},\r\n    generateAnOrder: (_id, booksArr, mode) => request.post(\"/api/order/generate\", {\"_id\": _id, \"books\": booksArr, \"mode\": mode}),\r\n    showStatistics: (_id, startTime,endTime) => request.getWith(\"/api/order/show/statistics/buy\", {\"_id\":_id,\"startTime\":startTime,\"endTime\":endTime})\r\n};\r\n\r\n//\r\nexport const User = {\r\n    login: (username, password) => request.post('/api/user/login',{\"username\":username, \"password\": password}),\r\n    signup: (username, password, email) => request.post('/api/user/signup',{\"username\":username, \"password\": password,\r\n        \"email\": email})\r\n};\r\n\r\nexport const Comment = {\r\n    showComment: (isbn) => request.getWith(\"/api/comment/show\",{\"isbn\":isbn}),\r\n    addComment: (isbn, userId, indexArr, username, comment_content) => request.post(\"/api/comment/add\",\r\n        {\r\n            \"isbn\":parseInt(isbn),\r\n            \"userId\":parseInt(userId),\r\n            \"index\":indexArr,\r\n            \"username\":username,\r\n            \"content\":comment_content\r\n        })\r\n};","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport {User} from \"../agent\";\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport {connect} from \"react-redux\";\r\nimport bgImg from '../img/signin4.jpg';\r\n\r\nconst styles = theme => ({\r\n    submit:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    /*img:{\r\n        width: '100%',\r\n        height:'400px',\r\n        backgroundImg: `url(${bgImg})`\r\n    }*/\r\n});\r\n\r\nclass Login extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {username:'',password:''};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div>\r\n                <img src={bgImg}/>\r\n                <Dialog\r\n                    open={true}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">Sign in</DialogTitle>\r\n                    <DialogContent>\r\n                        <form onSubmit={event => {\r\n                            event.preventDefault();\r\n                            this.props.checkAccount(this.state.username, this.state.password);\r\n                        }}>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"username\">UserName</InputLabel>\r\n                                <Input\r\n                                    id=\"username\"\r\n                                    name=\"username\"\r\n                                    value={this.state.username}\r\n                                    onChange={this.handleInputChange('username')}\r\n                                    autoFocus\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    value={this.state.password}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('password')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                className={classes.submit}\r\n                            >\r\n                                Sign in\r\n                            </Button>\r\n                        </form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        checkAccount: (username, password) => {\r\n            User.login(username, password).then(res=>dispatch({type: \"LOGIN\",result:res})).catch(error=>alert(error.response.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(Login));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Home from '@material-ui/icons/Home';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Comment from '@material-ui/icons/Comment';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ShoppingCart from '@material-ui/icons/ShoppingCart';\r\nimport Login from './Login';\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n        marginRight: -theme.spacing.unit,\r\n    },\r\n    grow: {\r\n        flexGrow: theme.spacing.unit * 2,\r\n    },\r\n    button: {\r\n        marginRight: theme.spacing.unit * 5,\r\n    },\r\n    menuButton:{\r\n\r\n    },\r\n    hidden : {\r\n        display: 'none',\r\n    },\r\n    buttonIcon: {\r\n        marginRight: theme.spacing.unit * 0.5,\r\n    },\r\n});\r\n\r\nclass Header extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {anchorEl: null, open: false};\r\n        this.handleClose = () => {\r\n            this.setState({anchorEl: null});\r\n        };\r\n        this.handleClick = event => {\r\n            this.setState({anchorEl: event.currentTarget});\r\n        };\r\n        this.handleClickLogin = () => {\r\n            this.setState({ open: true });\r\n        };\r\n\r\n        this.handleCloseLogin = () => {\r\n            this.setState({ anchorEl: null, open: false });\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { classes,Login } = this.props;\r\n        const { anchorEl } = this.state;\r\n        return (\r\n            <div className={classes.root}>\r\n\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n                            欢迎，{Login.username !== '' ? Login.username : '请登录'}\r\n                        </Typography>\r\n                        <Button color=\"inherit\" className={classes.button} href=\"#\">\r\n                            <Home className={classes.buttonIcon}/>\r\n                            主页\r\n                        </Button>\r\n                        <Button color=\"inherit\" className={classes.button} href=\"http://www.ketianya.xyz/ketianya/#/\">\r\n                            <Comment className={classes.buttonIcon}/>\r\n                            论坛\r\n                        </Button>\r\n                        {Login._id !== \"\" ?\r\n                            <Button color=\"inherit\" className={classes.button} href=\"#/statistics\">\r\n                                <Home className={classes.buttonIcon}/>\r\n                                数据统计\r\n                            </Button>\r\n                            :null\r\n                        }\r\n                        {Login._id !== \"\" ?\r\n                            (\r\n                                Login.isManager ?\r\n                                    <Button color=\"inherit\" className={classes.button} href=\"#/manage-users\">\r\n                                        <AccountCircle className={classes.buttonIcon}/>\r\n                                        管理用户\r\n                                    </Button>\r\n                                    :\r\n                                    <Button color=\"inherit\" className={classes.button} href=\"#/cart\">\r\n                                        <ShoppingCart className={classes.buttonIcon}/>\r\n                                        购物车\r\n                                    </Button>\r\n                            ) : null\r\n                        }\r\n                        <Button\r\n                            aria-owns={anchorEl ? 'simple-menu' : undefined}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={this.handleClick}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <AccountCircle className={classes.buttonIcon}/>\r\n                            注册/登录\r\n                        </Button>\r\n                        <Menu\r\n                            id=\"simple-menu\"\r\n                            anchorEl={anchorEl}\r\n                            open={Boolean(anchorEl)}\r\n                            onClose={this.handleClose}\r\n                        >\r\n                            <MenuItem onClick={this.handleClose}>\r\n                                <Button color=\"inherit\" fullWidth href=\"#/login\">\r\n                                    登录\r\n                                </Button>\r\n                            </MenuItem>\r\n                            <MenuItem onClick={this.handleClose}>\r\n                                <Button color=\"inherit\" fullWidth href=\"#/signup\">\r\n                                    注册\r\n                                </Button>\r\n                            </MenuItem>\r\n                        </Menu>\r\n                    </Toolbar>\r\n                </AppBar>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {Login: state.Login};\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(Header));\r\n//export default withStyles(styles)(Header);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\nimport {connect} from \"react-redux\";\r\nimport {Book} from \"../../agent\";\r\nimport {Radio} from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst styles = theme => ({\r\n    inputInput: {\r\n        paddingTop: theme.spacing.unit,\r\n        paddingRight: theme.spacing.unit,\r\n        paddingBottom: theme.spacing.unit,\r\n        paddingLeft: theme.spacing.unit * 10,\r\n        transition: theme.transitions.create('width'),\r\n        width: '100%',\r\n\r\n        [theme.breakpoints.up('md')]: {\r\n        width: 200,\r\n    },\r\n    },\r\n    inputRoot: {\r\n        color: 'inherit',\r\n        width: '100%',\r\n        display:'inline-block'\r\n\r\n    },\r\n    searchIcon: {\r\n        marginLeft:theme.spacing.unit,\r\n        //width: theme.spacing.unit * 2,\r\n        height: '100%',\r\n        position: 'absolute',\r\n        //pointerEvents: 'none',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'right',\r\n    },\r\n    search: {\r\n        position: 'relative',\r\n        borderRadius: theme.shape.borderRadius,\r\n\r\n        backgroundColor: fade(theme.palette.common.white, 0.35),\r\n        '&:hover': {\r\n            backgroundColor: fade(theme.palette.common.white, 0.55),\r\n        },\r\n        marginRight: theme.spacing.unit * 2,\r\n        float: 'right',\r\n        width: '400px',\r\n        [theme.breakpoints.down('md')]: {\r\n            width: 'auto',\r\n        },\r\n    },\r\n    toolbar: {\r\n        marginLeft: -theme.spacing.unit,\r\n        marginRight: -theme.spacing.unit,\r\n        height: '100px',\r\n        paddingTop: theme.spacing.unit * 3,\r\n        backgroundColor: theme.palette.primary.elight,\r\n    },\r\n    title: {\r\n        overflow: 'visible',\r\n        marginLeft: theme.spacing.unit*3,\r\n    },\r\n    radio:{\r\n        display: 'inline-block',\r\n        width: '10px',\r\n    },\r\n    clearBtn:{\r\n        marginLeft:-8*theme.spacing.unit,\r\n        //width: theme.spacing.unit * 2,\r\n        height: '100%',\r\n        position: 'absolute',\r\n    },\r\n    hidden:{\r\n        display:\"none\"\r\n    }\r\n});\r\n\r\nclass SearchBar extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {key:''};\r\n        this.handleRadioChange = this.handleRadioChange.bind(this);\r\n    }\r\n\r\n    async searchOnClick() {\r\n        const key = this.state.key;\r\n        const by = this.props.by;\r\n        this.props.setKey(key);\r\n        //alert(this.props.location.pathname);\r\n        if (key === ''||key===undefined) {\r\n            alert('关键字不能为空哦~');\r\n        } else {\r\n            //根据当前页面是订单页还是图书页进行不同处理\r\n            if (this.props.location.pathname === \"/order\") {\r\n\r\n            } else {\r\n                await this.props.searchBtnClick();\r\n                if (by === 'isbn') {\r\n                    var regPos = /^\\d+(\\.\\d+)?$/;\r\n                    if (!regPos.test(key)) {\r\n                        alert(\"输入的isbn格式不正确\");\r\n                    } else {\r\n                        Book.getBookByisbn(key,this.props.curPage,this.props.perPageNum)\r\n                            .then(res => this.props.searchBooks(res))\r\n                            .catch(error=>alert(error.response.body.msg));\r\n                    }\r\n                } else {\r\n                    Book.getBookByName(key,this.props.curPage,this.props.perPageNum)\r\n                        .then(res => this.props.searchBooks(res))\r\n                        .catch(err => {alert(err.response.body.msg);window.open('https://www.baidu.com/s?wd=' + key, '_blank')});\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleRadioChange(e) {\r\n        this.props.switchBy();\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div className={classes.toolbar}>\r\n                <Grid container spacing={24} alignItems=\"center\">\r\n                    <Grid item xs={6}>\r\n                        <Typography className={classes.title} variant=\"h2\" color=\"secondary\" noWrap>\r\n                            j-bu ok-y\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                        <React.Fragment>\r\n                            <Typography variant=\"h6\" color=\"inherit\"\r\n                                        className={this.props.location.pathname === \"/order\"?classes.hidden:null}>\r\n                                通过以下方式查找书:\r\n                            </Typography>\r\n                            <Radio\r\n                                checked={this.props.by === 'isbn'}\r\n                                onChange={this.handleRadioChange}\r\n                                value=\"isbn\"\r\n                                name=\"radio-button\"\r\n                                aria-label=\"isbn\"\r\n                                checkedIcon={\"isbn\"}\r\n                                className={this.props.location.pathname === \"/order\"?classes.hidden:null}\r\n                            />\r\n                            <Radio\r\n                                checked={this.props.by === 'bookname'}\r\n                                onChange={this.handleRadioChange}\r\n                                value=\"bookname\"\r\n                                name=\"radio-button\"\r\n                                aria-label=\"bookname\"\r\n                                checkedIcon={\"书名\"}\r\n                                className={this.props.location.pathname === \"/order\"?classes.hidden:null}\r\n                            />\r\n                        </React.Fragment>\r\n                        <div className={classes.search}>\r\n                            <Button className={classes.searchIcon}\r\n                                        onClick={() => this.searchOnClick()}>\r\n                                <SearchIcon/>\r\n                                Go\r\n                            </Button>\r\n                            <InputBase\r\n                                placeholder={\"输入关键字查找...\"}\r\n                                classes={{\r\n                                    root: classes.inputRoot,\r\n                                    input: classes.inputInput,\r\n                                }}\r\n                                value={this.state.key}\r\n                                onChange={e => this.setState({key:e.target.value})}/>\r\n                            <Button className={classes.clearBtn}\r\n                                    onClick={()=>{this.props.clearAndReset();this.setState({key:''})}}\r\n                            >\r\n                                x\r\n                            </Button>\r\n                        </div>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n        keyWord: state.Search.keyWord,\r\n        by: state.Search.by,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        searchBooks: res => {\r\n            dispatch({type:\"SHOW_BOOK\",result:res});\r\n            dispatch({type:\"SET_TOTAL\",total:res.count});\r\n        },\r\n        clearAndReset: async () => {\r\n            await dispatch({type:\"RESET_KEY\"});\r\n            dispatch({type:\"RESET_PAGE\"});\r\n            dispatch({type:\"UPDATE\"});\r\n        },\r\n        switchBy: () => dispatch({type:\"SWITCH_BY\"}),\r\n        setKey: (key) => dispatch({type:\"SET_KEY\", keyWord:key}),\r\n        searchBtnClick: () => {dispatch({type:\"RESET_PAGE\"});}\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SearchBar)));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport {connect} from \"react-redux\";\r\n\r\nconst styles = theme => (\r\n    {\r\n        button:{\r\n            padding: theme.spacing.unit * 2,\r\n            textAlign: 'center',\r\n            color: theme.palette.text.secondary,\r\n            margin: theme.spacing.unit,\r\n            fontSize: '18px',\r\n        },\r\n        root:{\r\n            flexGrow: 1,\r\n        },\r\n    }\r\n);\r\n\r\nclass ChoosePage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const {classes, isManager, _id} = this.props;\r\n        return (\r\n            <div className={classes.root}>\r\n                <Grid container spacing={24} alignItems=\"center\">\r\n                    {isManager?\r\n                        <React.Fragment>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href='#/all-books'>图书管理</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href='#/manage-users'>用户管理</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href=\"#/order\">订单管理</Button>\r\n                            </Grid>\r\n                        </React.Fragment>\r\n                    :\r\n                        <React.Fragment>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} onClick={()=>this.props.update()}>所有图书</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true}>新书推荐</Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button className={classes.button} fullWidth={true} href=\"#/order\" disabled={_id===''}>我的订单</Button>\r\n                            </Grid>\r\n                        </React.Fragment>}\r\n                </Grid>\r\n                <Divider/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        _id: state.Login._id,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        update: ()=>dispatch({type:\"UPDATE\"})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(ChoosePage));","import React from 'react';\r\nimport Header from '../Header';\r\nimport SearchBar from './SearchBar';\r\nimport ChoosePage from './ChoosePage';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n//import {connect } from \"react-redux\";\r\n\r\nconst styles = theme => ({\r\n    main:{\r\n        backgroundColor:theme.palette.secondary.main,\r\n\r\n    }\r\n\r\n});\r\n\r\n\r\n\r\nclass HomePage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <React.Fragment>\r\n                <Header/>\r\n                <SearchBar/>\r\n                <ChoosePage/>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(HomePage);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {Link} from 'react-router-dom';\r\nimport {Login} from '../../agent';\r\nimport {connect} from \"react-redux\";\r\nimport {IconButton} from \"@material-ui/core\";\r\nimport {Delete} from \"@material-ui/icons\";\r\n\r\nconst styles = {\r\n    card: {\r\n        maxWidth: 170,\r\n    },\r\n    media: {\r\n        height: 250,\r\n    },\r\n    author:{\r\n        color:'gray'\r\n    },\r\n    deleteButton:{\r\n        //position:'absolute',\r\n        //float:'right',\r\n        padding: '6px',\r\n        marginLeft: '10px'\r\n    }\r\n};\r\n\r\nclass BookCard extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const { classes,book, isManager, _id, deleteBook} = this.props;\r\n        return (\r\n            <Card className={classes.card}>\r\n                <CardActionArea>\r\n                    <Link to={'book/' + book.isbn}>\r\n                        <CardMedia\r\n                            className={classes.media}\r\n                            image={book.pictureUrl}\r\n                            title=\"Contemplative Reptile\"\r\n                        />\r\n                    </Link>\r\n                    <CardContent>\r\n                        <Typography gutterBottom variant=\"h6\" component=\"h4\">\r\n                            {book.bookname}\r\n                        </Typography>\r\n                        <Typography component=\"p\" className={classes.author}>\r\n                            {book.author}\r\n                        </Typography>\r\n                    </CardContent>\r\n                </CardActionArea>\r\n                <CardActions>\r\n                    <Button size=\"small\" color=\"primary\">\r\n                        {book.price}\r\n                    </Button>\r\n                    {!isManager?\r\n                        <Link to={'book/' + book.isbn}>\r\n                            详情\r\n                        </Link>:\r\n                        <Link to={'update/' + book.isbn}>\r\n                            修改\r\n                        </Link>\r\n                    }\r\n                    {\r\n                        isManager?\r\n                            <IconButton className={classes.deleteButton} disabled\r\n                            onClick={()=>deleteBook(_id, book.bookname, book.isbn)}>\r\n                                <Delete/>\r\n                            </IconButton>\r\n                            :null\r\n                    }\r\n                </CardActions>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        _id: state.Login._id\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(BookCard));\r\n\r\n","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport DraftsIcon from '@material-ui/icons/Drafts';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport StarBorder from '@material-ui/icons/StarBorder';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '100%',\r\n        //maxWidth: 200,\r\n        height: '500px',\r\n        marginLeft: theme.spacing.unit * 3,\r\n        backgroundColor: theme.palette.secondary.elight,\r\n        float:'left',\r\n    },\r\n    nested: {\r\n        paddingLeft: theme.spacing.unit * 4,\r\n    },\r\n});\r\n\r\nclass Catalog extends React.Component {\r\n    state = {\r\n        open: true,\r\n    };\r\n\r\n    handleClick = () => {\r\n        this.setState(state => ({ open: !state.open }));\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <List\r\n                component=\"nav\"\r\n                subheader={<ListSubheader component=\"div\">类别</ListSubheader>}\r\n                className={classes.root}\r\n            >\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <SendIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"语文\" />\r\n                </ListItem>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"数学\" />\r\n                </ListItem>\r\n                <ListItem button onClick={this.handleClick}>\r\n                    <ListItemIcon>\r\n                        <InboxIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"英语\" />\r\n                    {this.state.open ? <ExpandLess /> : <ExpandMore />}\r\n                </ListItem>\r\n                <Collapse in={this.state.open} timeout=\"auto\" unmountOnExit>\r\n                    <List component=\"div\" disablePadding>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"小学\" />\r\n                        </ListItem>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"初中\" />\r\n                        </ListItem>\r\n                        <ListItem button className={classes.nested}>\r\n                            <ListItemIcon>\r\n                                <StarBorder />\r\n                            </ListItemIcon>\r\n                            <ListItemText inset primary=\"高中\" />\r\n                        </ListItem>\r\n                    </List>\r\n                </Collapse>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"物理\" />\r\n                </ListItem>\r\n                <ListItem button>\r\n                    <ListItemIcon>\r\n                        <DraftsIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText inset primary=\"化学\" />\r\n                </ListItem>\r\n            </List>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(Catalog);","import React from \"react\";\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\nimport {Button,Toolbar} from \"@material-ui/core\";\r\nimport {connect} from \"react-redux\";\r\n\r\nclass Pagination extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const {total,perPageNum,isManager,curPage} = this.props;\r\n        const allPage = Math.ceil(total / perPageNum) || 1;\r\n        return (\r\n            //allPage > 1 &&\r\n            <Toolbar>\r\n                <div>\r\n                    {\r\n                        `${(curPage - 1) * perPageNum + 1}-${curPage * perPageNum<total?curPage * perPageNum:total} of ${allPage} Pages`\r\n                    }\r\n                </div>\r\n                <div style={{marginLeft: '200px'}}>\r\n                    {\r\n                        <Button primary key=\"prev\" label=\"上一页\" disabled={curPage <= 1}\r\n                                onClick={() => this.props.lastPage()}>\r\n                            <ChevronLeft/>\r\n                            上一页\r\n                        </Button>\r\n                    }\r\n                    {\r\n                        `当前页：${curPage}`\r\n                    }\r\n                    {\r\n                        <Button primary key=\"next\" label=\"下一页\" disabled={curPage === allPage}\r\n                                onClick={() => this.props.nextPage()} labelPosition=\"before\">\r\n                            下一页\r\n                            <ChevronRight/>\r\n                        </Button>\r\n                    }\r\n                </div>\r\n                {isManager?\r\n                    <div style={{marginLeft:'400px'}}>\r\n                        <Button size=\"large\" variant=\"outlined\" href=\"#/add-new-book\">\r\n                            新增图书\r\n                        </Button>\r\n                    </div>\r\n                :null}\r\n            </Toolbar>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager: state.Login.isManager,\r\n        total: state.Page.total,\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n    }\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        nextPage: ()=>dispatch({type: \"NEXT_PAGE\"}),\r\n        lastPage: ()=>dispatch({type: \"LAST_PAGE\"}),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pagination);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport ChoosePage from '../Main/ChoosePage';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport BookCard from './BookCard';\r\nimport Catalog from '../Main/Catalog';\r\nimport Pagination from './Pagination';\r\nimport {connect} from \"react-redux\";\r\nimport {Book, Manage} from \"../../agent\";\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n      minWidth:'900px'\r\n    },\r\n    root: {\r\n        position: 'relative',\r\n        paddingTop: theme.spacing.unit,\r\n        paddingLeft: theme.spacing.unit * 5,\r\n        backgroundColor: theme.palette.common.paper,\r\n    },\r\n    bookCard:{\r\n        marginLeft: theme.spacing.unit * 4,\r\n        position: 'relative',\r\n        display: 'inline-block',\r\n        width:'200px',\r\n        height: '250px',\r\n        marginBottom: theme.spacing.unit * 15,\r\n    },\r\n\r\n});\r\n\r\nclass BooksPage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.bookPageOnChange = this.bookPageOnChange.bind(this);\r\n        this.deleteBook = this.deleteBook.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Book.showBooks(this.props.curPage,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);\r\n        return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n    }\r\n    componentWillReceiveProps(nextProps, nextContext) {\r\n        if (this.props.curPage!==nextProps.curPage || this.props.update!==nextProps.update)\r\n        {\r\n            this.bookPageOnChange(nextProps.curPage);\r\n            console.log(this.props.update!==nextProps.update);\r\n            console.log(this.props.keyWord);\r\n        }\r\n    }\r\n\r\n    bookPageOnChange(page){\r\n        if (this.props.keyWord===\"\" || this.props.keyWord===undefined)\r\n        {\r\n            Book.showBooks(page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n        }\r\n        else\r\n        {\r\n            if (this.props.by === 'isbn') {\r\n                Book.getBookByisbn(this.props.keyWord,page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n            } else {\r\n                Book.getBookByName(this.props.keyWord,page,this.props.perPageNum).then(res=>{this.props.setTotal(res.count);return this.props.storePageBooks(res)}).catch(error=>alert(error.response.body.msg));\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteBook(_id, bookname, isbn) {\r\n        Manage.deleteABook(_id, bookname, isbn).then(this, this.props.deleteBook(isbn)).catch(error=>alert(error.response.body.msg));\r\n        this.forceUpdate();\r\n    }\r\n        render() {\r\n        const {classes,books} = this.props;\r\n            return (\r\n                <div className={classes.superRoot}>\r\n                    <Header/>\r\n                    <SearchBar/>\r\n                    <ChoosePage/>\r\n                    <Grid container spacing={0}>\r\n                        <Grid item xs={2}>\r\n                            <Catalog/>\r\n                        </Grid>\r\n                        <Grid item xs={9} wrap=\"wrap\">\r\n                            {\r\n                                books!==undefined?\r\n                                    <div className={classes.root}>\r\n                                        {\r\n                                            books.map((book) => (\r\n                                                <div className={classes.bookCard}>\r\n                                                    <BookCard book={book} deleteBook={this.deleteBook}/>\r\n                                                </div>\r\n                                            ))\r\n                                        }\r\n                                    </div>:\r\n                                    <p className={classes.root}>没有符合条件的书籍</p>\r\n                            }\r\n\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Pagination/>\r\n                </div>\r\n            );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        books: state.BookDetail.books,\r\n        update: state.BookDetail.update,\r\n        curPage: state.Page.curPage,\r\n        perPageNum: state.Page.perPageNum,\r\n        keyWord: state.Search.keyWord,\r\n        by: state.Search.by,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        storePageBooks: res => dispatch({type:\"SHOW_BOOK\",result:res}),\r\n        deleteBook: isbn=>dispatch({type:\"DELETE_BOOK\",isbn:isbn}),\r\n        setTotal: total=>dispatch({type:\"SET_TOTAL\",total:total})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(BooksPage));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport {connect} from \"react-redux\";\r\nimport {Comment} from \"../../agent\";\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    content:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n        marginLeft: theme.spacing.unit * 10,\r\n    },\r\n    summary:{\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    subreply:{\r\n        marginLeft: theme.spacing.unit*10,\r\n    },\r\n    fabiao:{\r\n        marginTop: theme.spacing.unit * 5\r\n    }\r\n});\r\n\r\nclass Comments extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {comments: [],open:false,input_content:\"\",indexArr:[]};\r\n    }\r\n\r\n    componentDidMount() {\r\n        Comment.showComment(this.props.isbn).then(res=> this.setState({comments:res.comments})).catch(error=>console.log(error.response.body.msg));\r\n    }\r\n\r\n    handleClickOpen = index => () => {\r\n        this.setState({ open: true , indexArr:index.slice()});\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({ open: false , input_content:\"\", indexArr:[]});\r\n    };\r\n\r\n    handleSubmit = () => {\r\n        Comment.addComment(this.props.isbn,this.props._id,this.state.indexArr,this.props.username,this.state.input_content);\r\n        this.handleClose();\r\n        this.props.history.push('/');\r\n    };\r\n\r\n    handleContentChange = e => {\r\n        this.setState({input_content:e.target.value})\r\n    };\r\n\r\n    getTime(commentTime) {\r\n        return commentTime.replace('T',' ').substring(0,commentTime.indexOf('.'))\r\n    }\r\n\r\n    showTree(replies, parentName, indexArr) {\r\n        const {classes} = this.props;\r\n        return (\r\n            <React.Fragment>\r\n                {\r\n                    replies.map((reply,index)=>\r\n                    <div className={classes.subreply}>\r\n                        <Toolbar>\r\n                            <Avatar className={classes.avatar} alt=\"User\" children={reply.userId}/>\r\n                            <Typography variant=\"h6\">{reply.username + \" 回复 \"+parentName+\"  \" + this.getTime(reply.commentTime)}</Typography>\r\n                        </Toolbar>\r\n                        <Typography variant=\"h6\" className={classes.content}>{reply.content}</Typography>\r\n                        {this.props._id===\"\"?null:\r\n                            <Button variant=\"outlined\" color=\"primary\" onClick={this.handleClickOpen(indexArr.concat(index))}>\r\n                                回复\r\n                            </Button>}\r\n                        {\r\n                            reply.replies==null||reply.replies.length<=0?null:this.showTree(reply.replies,reply.username,indexArr.concat(index))\r\n                        }\r\n                    </div>)\r\n                }\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        const {comments} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <div className={classes.root}>\r\n                    {comments.map((comment,index) =>\r\n                        <React.Fragment key={comment.commentTime}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"User\" children={comment.userId}/>\r\n                                <Typography variant=\"h6\">{comment.username + \"  \" + this.getTime(comment.commentTime)}</Typography>\r\n                            </Toolbar>\r\n                            <Typography variant=\"h6\" className={classes.content}>{comment.content}</Typography>\r\n                            {this.props._id===\"\"?null:\r\n                                <Button variant=\"outlined\" color=\"primary\" onClick={this.handleClickOpen([index])}>\r\n                                    回复\r\n                                </Button>}\r\n                            <div className={classes.summary}>\r\n                                {\r\n                                    comment.replies==null||comment.replies.length<=0?null:this.showTree(comment.replies,comment.username,[index])\r\n                                }\r\n                            </div>\r\n                        </React.Fragment>\r\n                    )}\r\n                </div>\r\n                {this.props._id===\"\"?null:\r\n                    <Button fullWidth className={classes.fabiao} variant=\"outlined\" color=\"primary\" onClick={this.handleClickOpen([])}>\r\n                        发表评论\r\n                    </Button>}\r\n                <Dialog\r\n                    open={this.state.open}\r\n                    onClose={this.handleClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">输入回复内容</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"normal\"\r\n                            id=\"name\"\r\n                            label=\"说点啥...\"\r\n                            type=\"text\"\r\n                            rows={3}\r\n                            fullWidth\r\n                            multiline\r\n                            value={this.state.input_content}\r\n                            onChange={this.handleContentChange}\r\n                        />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"primary\">\r\n                            取消\r\n                        </Button>\r\n                        <Button onClick={this.handleSubmit} color=\"primary\">\r\n                            确定\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nComments.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        _id:state.Login._id,\r\n        username:state.Login.username,\r\n    };\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(withStyles(styles)(Comments)));","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {Button} from \"@material-ui/core\";\r\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\r\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\r\nimport RestoreIcon from '@material-ui/icons/Restore';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport {connect} from \"react-redux\";\r\nimport {Book,Order} from '../../agent';\r\nimport Comments from \"./Comments\";\r\n\r\nconst styles = theme => ({\r\n    superRoot: {\r\n        minWidth: '800px',\r\n    },\r\n    root: {\r\n        position: 'relative',\r\n        paddingTop: theme.spacing.unit * 3,\r\n        paddingLeft: '8%',\r\n        paddingRight: '3%',\r\n        height: '350px',\r\n        backgroundColor: theme.palette.common.paper,\r\n    },\r\n    left: {\r\n        height: '250px',\r\n        padding: theme.spacing.unit,\r\n        textAlign: 'center',\r\n        position: 'absolute',\r\n        width: '18%',\r\n        backgroundColor: '#ccc'\r\n    },\r\n    middle: {\r\n        height: '200px',\r\n        textAlign: 'left',\r\n        marginLeft: '21%',\r\n        width: '49%',\r\n        position: 'absolute',\r\n        whiteSpace: 'pre',\r\n    },\r\n    right: {\r\n        height: '200px',\r\n        border: '1px dashed #fab',\r\n        lineHeight: '40px',\r\n        //backgroundColor: 'purple',\r\n        width: '15%',\r\n        position: 'absolute',\r\n        marginLeft: '75%',\r\n        textAlign: 'center',\r\n        fontSize: '25px',\r\n        color: '#2aa',\r\n        padding: '10px',\r\n    },\r\n    price: {\r\n        backgroundColor: '#689',\r\n        color: '#922',\r\n        width: '90%',\r\n        fontSize: '28px',\r\n        margin: '10px 0',\r\n        padding: '30px'\r\n    },\r\n    summary: {\r\n        marginTop: theme.spacing.unit,\r\n        marginBottom: theme.spacing.unit * 2,\r\n        height: 'auto',\r\n        lineHeight: '20px',\r\n\r\n    },\r\n    summarySpan: {\r\n        width: '200px',\r\n        whiteSpace: 'normal',\r\n        wordWrap: 'break-word',\r\n        wordBreak: 'break-all',\r\n        overflow: 'hidden',\r\n    },\r\n    inputNum: {\r\n        width: '40px',\r\n        height: '30px',\r\n    },\r\n    addBtn: {\r\n        backgroundColor: '#f88',\r\n        marginLeft: theme.spacing.unit,\r\n        fontSize: '18px',\r\n        color: 'white',\r\n    },\r\n    buyBtn: {\r\n        marginLeft: theme.spacing.unit * 2,\r\n        backgroundColor: '#fee',\r\n        fontSize: '18px',\r\n        color: '#f48',\r\n        fontWeight: 'normal'\r\n    },\r\n    body: {\r\n        position: \"relative\",\r\n        marginTop: '10px',\r\n        backgroundColor: '#d39',\r\n        marginLeft: '50px',\r\n    },\r\n});\r\n\r\nclass BookDetail extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            value: 0,\r\n            book:{\r\n\r\n            }\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        let targetisbn = parseInt(this.props.match.params.isbn);\r\n        Book.getBookByisbn(targetisbn,1,1).then(res=>this.setState({book:res.books[0]})).catch(err=>alert(err.response.body.msg));\r\n    }\r\n    handleChange = (event, value) => {\r\n        this.setState({ value });\r\n    };\r\n    render() {\r\n        const {classes, books, _id} = this.props;\r\n        let targetisbn = parseInt(this.props.match.params.isbn);\r\n        const book = this.state.book;\r\n        let numValue;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <div className={classes.root}>\r\n                    <div className={classes.left}>\r\n                        <img src={book.pictureUrl} alt=\"别买了，这书连封面都没有\"\r\n                             width=\"100%\" height=\"100%\"/>\r\n                    </div>\r\n                    <div className={classes.middle}>\r\n                        <Typography variant=\"h4\">{book.bookname}</Typography>\r\n                        <Divider/>\r\n                        <Typography variant=\"body1\" color=\"inherit\">\r\n                            作者：{book.author}\r\n                            {\"       \"}\r\n                            库存：{book.stockNum}\r\n                        </Typography>\r\n                        <div className={classes.price}>\r\n                            ￥ {book.price}\r\n                        </div>\r\n                        <div className={classes.summary}>\r\n                            <span className={classes.summarySpan}>\r\n                                {book.summary}\r\n                            </span>\r\n                        </div>\r\n                        <input type=\"number\" min=\"1\" max={book.stockNum} className={classes.inputNum}\r\n                               ref={ref => numValue = ref}\r\n                        />\r\n                        <Button className={classes.addBtn} onClick={\r\n                            () => (_id === '' ? alert(\"请先登录\") :\r\n                                    (numValue.value > book.stockNum ? alert(\"库存不足\") :\r\n                                        (numValue.value <= 0 || numValue.value === 'undefined' ? alert(\"请正确填写数量\") :\r\n                                            this.props.addToCart(_id, book.bookname, numValue.value, book.isbn)))\r\n                            )\r\n                        }>\r\n                            加入购物车\r\n                        </Button>\r\n                        <Button className={classes.buyBtn} onClick={\r\n                            () => (_id === '' ? alert(\"请先登录\") :\r\n                                    (numValue.value > book.stockNum ? alert(\"库存不足\") :\r\n                                        (numValue.value <= 0 || numValue.value === 'undefined' ? alert(\"请正确填写数量\") :\r\n                                            this.props.buyNow(_id, [{\r\n                                                \"bookname\": book.bookname,\r\n                                                \"num\": numValue.value,\r\n                                                \"isbn\": book.isbn\r\n                                            }], \"buy directly\")))\r\n                            )\r\n                        }>\r\n                            立即购买\r\n                        </Button>\r\n                    </div>\r\n                    <div className={classes.right}>\r\n                        广告位招租：1元/条\r\n                        --客天涯是一个大帅b\r\n                    </div>\r\n\r\n                </div>\r\n                <div className={classes.body}>\r\n                    <BottomNavigation\r\n                        value={this.state.value}\r\n                        onChange={this.handleChange}\r\n                        showLabels\r\n                    >\r\n                        <BottomNavigationAction label=\"商品评论\" icon={<RestoreIcon/>}/>\r\n                        <BottomNavigationAction label=\"猜你喜欢\" icon={<FavoriteIcon/>}/>\r\n                        <BottomNavigationAction label=\"附近的人\" icon={<LocationOnIcon/>}/>\r\n                    </BottomNavigation>\r\n                    <Divider/>\r\n                </div>\r\n                <Comments isbn={targetisbn}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        books: state.BookDetail.books,\r\n        _id: state.Login._id,\r\n    }\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        addToCart: (_id, bookname, num, isbn) => Book.addToCart(_id, bookname, num, isbn).then(dispatch({\r\n            type: \"ADD_TO_CART\",\r\n            bookname: bookname,\r\n            num: num,\r\n            isbn: isbn\r\n        })).then(alert(\"加入购物车成功！\")).catch(error=>alert(error.response.body.msg)),\r\n        buyNow: (_id, booksArr, mode) => Order.generateAnOrder(_id,booksArr,mode)\r\n            .then(alert(\"购买成功！\")).catch(error=>alert(error.response.body.msg)),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(BookDetail));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport {Link} from 'react-router-dom';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Header from '../Header';\r\nimport {Book, Order} from \"../../agent\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ShoppingCart extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {cart: []};\r\n        this.removeButtonClick = this.removeButtonClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Book.showCart(this.props._id).then(res=> this.setState({cart:res.books})).catch(err=>alert(err.response.body.msg));\r\n    }\r\n\r\n    removeButtonClick = (_id, bookname, isbn) =>\r\n        Book.removeFromCart(_id, bookname, isbn).then(() => {\r\n                const oldCart = this.state.cart;\r\n                console.log(oldCart);\r\n                const newCart = oldCart.filter(book=>isbn!==book.isbn);\r\n                console.log(newCart);\r\n                this.setState({cart: newCart});\r\n            }\r\n        ).catch(err=>alert(\"移除书失败！\"));\r\n\r\n    render() {\r\n        const {classes/*, removeButtonClick*/} = this.props;\r\n        const {cart} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <div className={classes.root}>\r\n                    {cart.map(book =>\r\n                        <React.Fragment key={book.isbn}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"Book\" children=\"书\"/>\r\n                                <Typography variant=\"h6\">{book.isbn}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{book.bookname}</Typography>\r\n                            <Typography className={classes.summary}>{\"数量：\" + book.num}</Typography>\r\n                            <Link to={'book/' + book.isbn} className={classes.link}>详情</Link>\r\n                            <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                                    onClick={() => this.removeButtonClick(this.props._id, book.bookname, book.isbn)}>\r\n                                不要你了\r\n                                <DeleteIcon className={classes.rightIcon}/>\r\n                            </Button>\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                    )}\r\n                </div>\r\n                <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                        onClick={() => Order.generateAnOrder(this.props._id, this.state.cart, \"buy by cart\").then(this.setState({cart:[]}))\r\n                            .catch(err=>alert(err.res.body.msg))}>\r\n                    结算\r\n                    <DeleteIcon className={classes.rightIcon}/>\r\n                </Button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShoppingCart.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    const {Login/*, BookAndNum*/} = state;\r\n    return {_id: Login._id/*, cart:BookAndNum.books*/};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        /*removeButtonClick: (_id, bookname, isbn) => Book.removeFromCart(_id, bookname, isbn).then(dispatch({\r\n            type: 'REMOVE_FROM_CART',\r\n            isbn: isbn\r\n        })).catch(() => alert('delete article failed, please try again')),*/\r\n        //storeCart: res=> dispatch({type:\"SHOW_CART\",result:res})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(ShoppingCart));\r\n","import {createMuiTheme} from '@material-ui/core/styles';\r\nimport {pink, purple, lightBlue} from '@material-ui/core/colors';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            elight: pink[50],\r\n            light: pink[200],\r\n            main: pink[500],\r\n            dark: pink[800],\r\n        },\r\n        secondary: {\r\n            elight:lightBlue[50],\r\n            light: lightBlue[200],\r\n            main: lightBlue[500],\r\n            dark: lightBlue[800],\r\n        },\r\n    },\r\n    typography: {\r\n        fontFamily: \"Roboto\",\r\n    },\r\n    shape: {\r\n        borderRadius: 8,\r\n    }\r\n});\r\n\r\nexport default theme;","import React from 'react';\r\nimport Header from './Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Button from '@material-ui/core/Button';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../theme';\r\nimport {User} from \"../agent\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst styles = theme => ({\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 400,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n\r\n});\r\n\r\nclass SignUp extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {username:'',password:'',confirmPass:'',email:''};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <Header/>\r\n                <main className={this.props.classes.main}>\r\n                    <Paper className={this.props.classes.paper}>\r\n                        <AccountCircle/>\r\n                        <Typography component=\"h1\" variant=\"h5\">\r\n                            Sign up\r\n                        </Typography>\r\n                        <form onSubmit={event => {\r\n                            event.preventDefault();\r\n                            if (this.state.password === this.state.confirmPass) {\r\n                                this.props.checkAccount(this.state.username, this.state.password, this.state.email);\r\n                            } else {\r\n                                alert('前后密码不一致');\r\n                            }\r\n                        }}>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"username\">UserName</InputLabel>\r\n                                <Input\r\n                                    id=\"username\"\r\n                                    name=\"username\"\r\n                                    value={this.state.username}\r\n                                    onChange={this.handleInputChange('username')}\r\n                                    autoFocus\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    value={this.state.password}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('password')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"confirmPass\">confirm your password</InputLabel>\r\n                                <Input\r\n                                    id=\"confirmPass\"\r\n                                    name=\"confirmPass\"\r\n                                    value={this.state.confirmPass}\r\n                                    //autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('confirmPass')}\r\n                                    type=\"password\"\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"email\">email</InputLabel>\r\n                                <Input\r\n                                    id=\"email\"\r\n                                    name=\"email\"\r\n                                    value={this.state.email}\r\n                                    autoComplete=\"current-password\"\r\n                                    onChange={this.handleInputChange('email')}\r\n                                    type=\"email\"\r\n                                />\r\n                            </FormControl>\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                            >\r\n                                Sign up\r\n                            </Button>\r\n                        </form>\r\n                    </Paper>\r\n                </main>\r\n            </MuiThemeProvider>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        checkAccount: (username, password, email) => {\r\n            User.signup(username, password, email).then(res=>dispatch({type: \"SIGN_UP\"})).catch(error=>alert(error.response.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(SignUp));","import React from 'react';\r\nimport Header from '../Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../../theme';\r\nimport {connect} from \"react-redux\";\r\nimport request from 'superagent';\r\nimport {Manage} from \"../../agent\";\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport NumberFormat from 'react-number-format';\r\n\r\n\r\nconst styles = theme => ({\r\n    supermain:{\r\n        minWidth: '650px',\r\n    },\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(800 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 800,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n    submitButton:{\r\n        float:'right',\r\n    },\r\n    imgButton:{\r\n        fullWidth: 'true',\r\n        backgroundColor: '#fff',\r\n        outline: 'none',\r\n        borderWidth: '0px',\r\n        borderRadius: '3px',\r\n    },\r\n    input:{\r\n        display:'none'\r\n    },\r\n    img: {\r\n        width: '120px',\r\n        height: '170px',\r\n    },\r\n    bookname:{\r\n        display: 'block',\r\n    },\r\n    author:{\r\n\r\n    },\r\n    head:{\r\n        float: 'left',\r\n        height: '170px',\r\n    },\r\n    cover:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        float: 'right',\r\n        height: '170px',\r\n        width: '120px',\r\n        border: '1px dashed blue',\r\n    },\r\n    price:{\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing.unit,\r\n    },\r\n    pan:{\r\n        float: 'left',\r\n        height: '170px',\r\n        marginLeft: theme.spacing.unit * 4,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n});\r\n\r\n//连接cloudinary的东西\r\nconst CLOUDINARY_UPLOAD_PRESET = 'cvtoheob';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dbqbt0cli/upload';\r\n\r\n//格式化stockNum输入\r\nfunction NumberFormatCustom(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"* \"\r\n        />\r\n    );\r\n}\r\n\r\nfunction NumberFormatCustom2(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"￥\"\r\n        />\r\n    );\r\n}\r\n\r\n\r\nclass AddNewBook extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {bookname: '', summary: '', uploadImgUrl: '', price: '0', author: '', stockNum: '0'};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n        this.onImageDrop = this.onImageDrop.bind(this);\r\n        this.handleImageUpload = this.handleImageUpload.bind(this);\r\n    }\r\n\r\n    onImageDrop(files) {\r\n        this.handleImageUpload(files[0]);\r\n    }\r\n\r\n    handleImageUpload(file) {\r\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                console.log(err);\r\n            }\r\n            if (response.body.secure_url !== '') {\r\n                this.setState({\r\n                    uploadImgUrl: response.body.secure_url\r\n                });\r\n                console.log(response.body.secure_url);\r\n                //this.forceUpdate();\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <div className={this.props.classes.supermain}>\r\n                    <Header/>\r\n                    <main className={this.props.classes.main}>\r\n                        <Paper className={this.props.classes.paper}>\r\n                            <form onSubmit={\r\n                                e => {\r\n                                    e.preventDefault();\r\n                                    this.props.addNewBook(\r\n                                        {\r\n                                            \"bookname\": this.state.bookname,\r\n                                            \"stockNum\": parseInt(this.state.stockNum),\r\n                                            \"summary\": this.state.summary,\r\n                                            \"pictureUrl\": this.state.uploadImgUrl,\r\n                                            \"author\": this.state.author,\r\n                                            \"price\": parseFloat(this.state.price)\r\n                                        }\r\n                                    )\r\n                                }\r\n                            }>\r\n                                <div className={this.props.classes.head}>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.bookname}>\r\n                                        <InputLabel htmlFor=\"bookname\">Book Name</InputLabel>\r\n                                        <Input\r\n                                            id=\"bookname\"\r\n                                            name=\"bookname\"\r\n                                            value={this.state.bookname}\r\n                                            onChange={this.handleInputChange('bookname')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.author}>\r\n                                        <InputLabel htmlFor=\"author\">Author</InputLabel>\r\n                                        <Input\r\n                                            id=\"author\"\r\n                                            name=\"author\"\r\n                                            value={this.state.author}\r\n                                            onChange={this.handleInputChange('author')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                </div>\r\n                                <div className={this.props.classes.pan}>\r\n                                    <TextField\r\n                                        className={this.props.classes.price}\r\n                                        label=\"Price\"\r\n                                        value={this.state.price}\r\n                                        onChange={this.handleInputChange('price')}\r\n                                        id=\"formatted-numberformat-price\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom2,\r\n                                        }}\r\n                                    />\r\n                                    <TextField\r\n                                        //className={this.props.classes.formControl}\r\n                                        label=\"Stock Number\"\r\n                                        value={this.state.stockNum}\r\n                                        onChange={this.handleInputChange('stockNum')}\r\n                                        id=\"formatted-numberformat-stockNum\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom,\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                                <div className={this.props.classes.cover}>\r\n                                    <input accept=\".jpg,.jpeg,.png \" className={this.props.classes.input}\r\n                                           id=\"icon-button-file\" type=\"file\"\r\n                                           ref={ref => this.image = ref} onChange={event => {\r\n                                        if (event.target.files.length !== 0) {\r\n                                            this.onImageDrop(event.target.files);\r\n                                        }\r\n                                    }\r\n                                    }/>\r\n                                    <button className={this.props.classes.imgButton} onClick={() => this.image.click()}\r\n                                    type=\"button\">\r\n                                        {this.state.uploadImgUrl === '' ?\r\n                                            <p>pick cover</p> :\r\n                                            <img className={this.props.classes.img} src={this.state.uploadImgUrl}/>}\r\n                                    </button>\r\n                                </div>\r\n                                <TextField margin=\"normal\" required fullWidth multiline\r\n                                           label=\"summary\" rows={6} variant='outlined'\r\n                                           id=\"summary\" placeholder=\"summary of the book...\"\r\n                                           value={this.state.summary}\r\n                                           onChange={this.handleInputChange('summary')}\r\n                                />\r\n                                <Button type=\"submit\" variant=\"contained\" color=\"primary\"\r\n                                        className={this.props.classes.submitButton}>\r\n                                    提交\r\n                                </Button>\r\n                            </form>\r\n                        </Paper>\r\n                    </main>\r\n                </div>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n        //authToken: state.Login.token,\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        addNewBook: (book) => {\r\n            Manage.addABook(book)\r\n                .then(res=>dispatch({type:'ADD_BOOK',book:book}))\r\n                .catch(error=>alert(error.response.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(AddNewBook));","import React from 'react';\r\nimport Header from '../Header';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {MuiThemeProvider} from '@material-ui/core';\r\nimport theme from '../../theme';\r\nimport {connect} from \"react-redux\";\r\nimport request from 'superagent';\r\nimport {Manage} from \"../../agent\";\r\nimport NumberFormat from 'react-number-format';\r\n\r\n\r\nconst styles = theme => ({\r\n    supermain:{\r\n        minWidth: '650px',\r\n    },\r\n    main: {\r\n        width: 'auto',\r\n        display: 'block', // Fix IE 11 issue.\r\n        marginLeft: theme.spacing.unit * 3,\r\n        marginRight: theme.spacing.unit * 3,\r\n        [theme.breakpoints.up(800 + theme.spacing.unit * 3 * 2)]: {\r\n            width: 800,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n        },\r\n    },\r\n    paper:{\r\n        marginTop: theme.spacing.unit * 8,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    },\r\n    submitButton:{\r\n        float:'right',\r\n    },\r\n    imgButton:{\r\n        fullWidth: 'true',\r\n        backgroundColor: '#fff',\r\n        outline: 'none',\r\n        borderWidth: '0px',\r\n        borderRadius: '3px',\r\n    },\r\n    input:{\r\n        display:'none'\r\n    },\r\n    img: {\r\n        width: '120px',\r\n        height: '170px',\r\n    },\r\n    bookname:{\r\n        display: 'block',\r\n    },\r\n    author:{\r\n\r\n    },\r\n    head:{\r\n        float: 'left',\r\n        height: '170px',\r\n    },\r\n    cover:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        float: 'right',\r\n        height: '170px',\r\n        width: '120px',\r\n        border: '1px dashed blue',\r\n    },\r\n    price:{\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing.unit,\r\n    },\r\n    pan:{\r\n        float: 'left',\r\n        height: '170px',\r\n        marginLeft: theme.spacing.unit * 4,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n});\r\n\r\n//连接cloudinary的东西\r\nconst CLOUDINARY_UPLOAD_PRESET = 'cvtoheob';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dbqbt0cli/upload';\r\n\r\n//格式化stockNum输入\r\nfunction NumberFormatCustom(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"* \"\r\n        />\r\n    );\r\n}\r\n\r\nfunction NumberFormatCustom2(props) {\r\n    const { inputRef, onChange, ...other } = props;\r\n    return (\r\n        <NumberFormat\r\n            {...other}\r\n            getInputRef={inputRef}\r\n            onValueChange={values => {\r\n                onChange({\r\n                    target: {\r\n                        value: values.value,\r\n                    },\r\n                });\r\n            }}\r\n            thousandSeparator\r\n            prefix=\"￥\"\r\n        />\r\n    );\r\n}\r\n\r\n\r\nclass UpdateBook extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        const booksArr = this.props.booksArr;\r\n        let targetisbn = parseInt(this.props.match.params.isbn);\r\n        const [book] = booksArr.filter(book=>book.isbn===targetisbn);\r\n        this.state = {bookname: book.bookname, summary: book.summary, uploadImgUrl: book.pictureUrl,\r\n            price: book.price, author: book.author, stockNum: book.stockNum, isbn: targetisbn};\r\n        this.handleInputChange = field=> e => {\r\n            const state = this.state;\r\n            const newState = Object.assign({}, state, {[field]: e.target.value});\r\n            this.setState(newState);\r\n        };\r\n        this.onImageDrop = this.onImageDrop.bind(this);\r\n        this.handleImageUpload = this.handleImageUpload.bind(this);\r\n    }\r\n\r\n    onImageDrop(files) {\r\n        this.setState({\r\n            uploadedFile: files[0]\r\n        });\r\n\r\n        this.handleImageUpload(files[0]);\r\n    }\r\n\r\n    handleImageUpload(file) {\r\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                console.error(err);\r\n            }\r\n            if (response.body.secure_url !== '') {\r\n                this.setState({\r\n                    uploadImgUrl: response.body.secure_url\r\n                });\r\n                console.log(response.body.secure_url);\r\n                //this.forceUpdate();\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.redirectTo) {\r\n            this.props.history.push(nextProps.redirectTo);\r\n            this.props.onRedirect();\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <MuiThemeProvider theme={theme}>\r\n                <div className={this.props.classes.supermain}>\r\n                    <Header/>\r\n                    <main className={this.props.classes.main}>\r\n                        <Paper className={this.props.classes.paper}>\r\n                            <form onSubmit={\r\n                                e => {\r\n                                    e.preventDefault();\r\n                                    this.props.updateBook(\r\n                                        {\r\n                                            \"bookname\": this.state.bookname,\r\n                                            \"stockNum\": parseInt(this.state.stockNum),\r\n                                            \"summary\": this.state.summary,\r\n                                            \"pictureUrl\": this.state.uploadImgUrl,\r\n                                            \"author\": this.state.author,\r\n                                            \"price\": parseFloat(this.state.price),\r\n                                            \"isbn\": this.state.isbn\r\n                                        }\r\n                                    )\r\n                                }\r\n                            }>\r\n                                <div className={this.props.classes.head}>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.bookname}>\r\n                                        <InputLabel htmlFor=\"bookname\">Book Name</InputLabel>\r\n                                        <Input\r\n                                            id=\"bookname\"\r\n                                            name=\"bookname\"\r\n                                            value={this.state.bookname}\r\n                                            onChange={this.handleInputChange('bookname')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormControl margin=\"normal\" required className={this.props.classes.author}>\r\n                                        <InputLabel htmlFor=\"author\">Author</InputLabel>\r\n                                        <Input\r\n                                            id=\"author\"\r\n                                            name=\"author\"\r\n                                            value={this.state.author}\r\n                                            onChange={this.handleInputChange('author')}\r\n                                            autoFocus\r\n                                        />\r\n                                    </FormControl>\r\n                                </div>\r\n                                <div className={this.props.classes.pan}>\r\n                                    <TextField\r\n                                        className={this.props.classes.price}\r\n                                        label=\"Price\"\r\n                                        value={this.state.price}\r\n                                        onChange={this.handleInputChange('price')}\r\n                                        id=\"formatted-numberformat-price\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom2,\r\n                                        }}\r\n                                    />\r\n                                    <TextField\r\n                                        //className={this.props.classes.formControl}\r\n                                        label=\"Stock Number\"\r\n                                        value={this.state.stockNum}\r\n                                        onChange={this.handleInputChange('stockNum')}\r\n                                        id=\"formatted-numberformat-stockNum\"\r\n                                        InputProps={{\r\n                                            inputComponent: NumberFormatCustom,\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                                <div className={this.props.classes.cover}>\r\n                                    <input accept=\".jpg,.jpeg,.png \" className={this.props.classes.input}\r\n                                           id=\"icon-button-file\" type=\"file\"\r\n                                           ref={ref => this.image = ref} onChange={event => {\r\n                                        if (event.target.files.length !== 0) {\r\n                                            this.onImageDrop(event.target.files);\r\n                                        }\r\n                                    }\r\n                                    }/>\r\n                                    <button className={this.props.classes.imgButton} onClick={() => this.image.click()}\r\n                                    type=\"button\">\r\n                                        {this.state.uploadImgUrl === '' ?\r\n                                            <p>pick cover</p> :\r\n                                            <img className={this.props.classes.img} src={this.state.uploadImgUrl}/>}\r\n                                    </button>\r\n                                </div>\r\n                                <TextField margin=\"normal\" required fullWidth multiline\r\n                                           label=\"summary\" rows={6} variant='outlined'\r\n                                           id=\"summary\" placeholder=\"summary of the book...\"\r\n                                           value={this.state.summary}\r\n                                           onChange={this.handleInputChange('summary')}\r\n                                />\r\n                                <Button type=\"submit\" variant=\"contained\" color=\"primary\"\r\n                                        className={this.props.classes.submitButton}>\r\n                                    更新\r\n                                </Button>\r\n                            </form>\r\n                        </Paper>\r\n                    </main>\r\n                </div>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redirectTo: state.Redirect.redirectTo,\r\n        booksArr: state.BookDetail.books\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        updateBook: (book) => {\r\n            Manage.updateABook(book)\r\n                .then(()=>dispatch({type:'UPDATE_BOOK',book:book}))\r\n                .catch((err)=>alert(err.res.body.msg));\r\n        },\r\n        onRedirect: () => dispatch({type: 'REDIRECTED'})\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withStyles(styles)(UpdateBook));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Header from '../Header';\r\nimport {Manage} from \"../../agent\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ManageUser extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {users: []};\r\n        this.banButtonClick = this.banButtonClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        Manage.showUsers().then(res=> this.setState({users:res.users})).catch(err=>alert(err.res.body.msg));\r\n    }\r\n\r\n    banButtonClick = (_id) =>\r\n        Manage.banAUser(_id).then(() => {\r\n                const oldUsers = this.state.users;\r\n                const newUsers = oldUsers.map(user=>{\r\n                    if (user._id === _id) {\r\n                        user.isBanned = !user.isBanned;\r\n                    }\r\n                    return user;\r\n                });\r\n\r\n                this.setState({users: newUsers});\r\n            }\r\n        ).catch(err=>alert(err.res.body.msg));\r\n\r\n    render() {\r\n        const {classes/*, removeButtonClick*/} = this.props;\r\n        const {users} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <div className={classes.root}>\r\n                    {users.map(user =>\r\n                        <React.Fragment key={user._id}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"用户\" children=\"user\"/>\r\n                                <Typography variant=\"h6\">{user._id}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{user.username}</Typography>\r\n                            {\r\n                                user.isManager?\r\n                                    <React.Fragment>\r\n                                        <Typography className={classes.summary}>\r\n                                            {user._id===1?\"超级管理员大Boss\":\"一般管理员\"}\r\n                                        </Typography>\r\n                                    </React.Fragment>\r\n                                    :\r\n                                    <React.Fragment>\r\n                                        <Typography className={classes.summary}>\r\n                                            普通用户\r\n                                        </Typography>\r\n                                        <Typography>\r\n                                            状态：\r\n                                            {user.isBanned?\"被禁用\":\"正常\"}\r\n                                        </Typography>\r\n                                        <Button variant=\"contained\" color=\"secondary\" className={classes.deleteButton}\r\n                                                onClick={() => this.banButtonClick(user._id)}>\r\n                                            {user.isBanned?\"解禁\":\"禁用\"}\r\n                                            <DeleteIcon className={classes.rightIcon}/>\r\n                                        </Button>\r\n                                    </React.Fragment>\r\n                            }\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nManageUser.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    //日后可用来记录是哪个管理员操作的\r\n    return {_id: state.Login._id/*, cart:BookAndNum.books*/};\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ManageUser));","import React from 'react';\r\nimport echarts from 'echarts/lib/echarts';\r\nimport 'echarts/lib/chart/bar';\r\nimport 'echarts/lib/chart/line';\r\nimport 'echarts/lib/component/tooltip';\r\nimport 'echarts/lib/component/title';\r\nimport 'echarts/lib/component/legend';\r\nimport 'echarts/lib/component/toolbox';\r\nimport 'echarts/lib/component/markPoint';\r\nimport 'echarts/lib/component/markLine';\r\n\r\n\r\nclass Chart extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.initEchart = this.initEchart.bind(this);\r\n    }\r\n    initEchart() {\r\n        // 初始化\r\n        var myChart = echarts.init(document.getElementById(this.props.chartId));\r\n        // 绘制图表\r\n        myChart.setOption({\r\n            title: { text: this.props.text },\r\n            tooltip : {\r\n                trigger: 'axis'\r\n            },\r\n            legend: {\r\n                data:[this.props.yname,]\r\n            },\r\n            toolbox: {\r\n                show : true,\r\n                feature : {\r\n                    dataView : {show: true, readOnly: false},\r\n                    magicType : {show: true, type: ['line', 'bar']},\r\n                    restore : {show: true},\r\n                    saveAsImage : {\r\n                        show: true,\r\n                        type: 'jpg'\r\n                    }\r\n                }\r\n            },\r\n            xAxis : [\r\n                {\r\n                    name : this.props.xname,\r\n                    type : 'category',\r\n                    data : this.props.data.xdata\r\n                }\r\n            ],\r\n            yAxis : [\r\n                {\r\n                    type : 'value'\r\n                }\r\n            ],\r\n            series : [\r\n                {\r\n                    name:this.props.yname,\r\n                    type:'bar',\r\n                    data: this.props.data.ydata,\r\n                    markPoint : {\r\n                        data : [\r\n                            {type : 'max', name: '最大值'},\r\n                            {type : 'min', name: '最小值'}\r\n                        ]\r\n                    },\r\n                    markLine : {\r\n                        data : [\r\n                            {type : 'average', name: '平均值'}\r\n                        ]\r\n                    }\r\n                },\r\n            ]\r\n        });\r\n    }\r\n    componentDidMount() {\r\n        this.initEchart();\r\n    }\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        this.initEchart();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id={this.props.chartId} style={{ width: 800, height: 500 }}></div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Chart;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Header from '../Header';\r\nimport {connect} from \"react-redux\";\r\nimport {Order} from \"../../agent\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SearchBar from '../Main/SearchBar';\r\nimport Chart from './Chart';\r\nimport {Button} from \"@material-ui/core\";\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    },\r\n    price:{\r\n\r\n    },\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing.unit,\r\n        marginRight: theme.spacing.unit,\r\n        width: 200,\r\n    },\r\n});\r\n\r\n\r\n\r\nclass ShowStatistics extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            bookData:{\r\n                xdata: [],\r\n                ydata: [],\r\n                totalConsume: 0\r\n            },\r\n            userData:{\r\n                xdata:[],\r\n                ydata:[],\r\n            },\r\n            startTime:\"2017-08-01T05:20\",\r\n            endTime:\"2019-05-24T13:14\"\r\n        };\r\n        this.handleTextFieldChange = name => event =>{\r\n            this.setState({[name]:event.target.value})\r\n        };\r\n        this.checkBtnClick = this.checkBtnClick.bind(this);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.checkBtnClick()\r\n    }\r\n\r\n    checkBtnClick(){\r\n        const startTime = this.state.startTime.replace('T',' ') + ':00';\r\n        const endTime = this.state.endTime.replace('T',' ') + ':00';\r\n        Order.showStatistics(this.props._id, startTime, endTime).then(res=>{\r\n                const book = res.book;\r\n                const bookX = [];\r\n                const bookY = [];\r\n                for (var i in book){\r\n                    bookX.push(i);\r\n                    bookY.push(book[i]);\r\n                }\r\n                this.setState({bookData:{xdata: bookX,ydata: bookY,totalConsume: res.totalConsume}})\r\n                if (this.props.isManager){\r\n                    const user = res.user;\r\n                    const userX = [];\r\n                    const userY = [];\r\n                    for (var i in user){\r\n                        userX.push(i);\r\n                        userY.push(user[i]);\r\n                    }\r\n                    this.setState({userData:{xdata: userX,ydata: userY}})\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <form className={classes.container} noValidate>\r\n                    <TextField\r\n                        id=\"startTime\"\r\n                        label=\"startTime\"\r\n                        type=\"datetime-local\"\r\n                        value={this.state.startTime}\r\n                        className={classes.textField}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                        onChange={this.handleTextFieldChange('startTime')}\r\n                    />\r\n                </form>\r\n                <form className={classes.container} noValidate>\r\n                    <TextField\r\n                        id=\"endTime\"\r\n                        label=\"endTime\"\r\n                        type=\"datetime-local\"\r\n                        defaultValue={this.state.endTime}\r\n                        className={classes.textField}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                        onChange={this.handleTextFieldChange('endTime')}\r\n                    />\r\n                </form>\r\n                <Button onClick={()=>this.checkBtnClick()}>\r\n                    查询\r\n                </Button>\r\n                <Chart data={this.state.bookData} text={'书籍情况'} yname={'购买数量'} xname={'书籍isbn'} chartId={'main1'}/>\r\n                {\r\n                    this.props.isManager?\r\n                        <Chart data={this.state.userData} text={'用户情况'} yname={'花费金额'} xname={'用户id'} chartId={'main2'}/>\r\n                        :null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShowStatistics.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        isManager:state.Login.isManager,\r\n        _id:state.Login._id,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ShowStatistics));","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Header from '../Header';\r\nimport {connect} from \"react-redux\";\r\nimport {Order} from \"../../agent\";\r\nimport SearchBar from '../Main/SearchBar';\r\n\r\n\r\nconst styles = theme => ({\r\n    superRoot:{\r\n        minWidth: '650px',\r\n    },\r\n    root:{\r\n        marginTop:theme.spacing.unit * 5,\r\n        paddingLeft: '20%',\r\n        paddingRight: '10%',\r\n    },\r\n    paper:{\r\n        paddingLeft:'40%',\r\n        marginTop: theme.spacing.unit * 5,\r\n    },\r\n    date:{\r\n        marginTop: theme.spacing.unit * 2,\r\n    },\r\n    avatar:{\r\n        marginRight: theme.spacing.unit * 2,\r\n        marginLeft: -theme.spacing.unit,\r\n    },\r\n    title:{\r\n        color:theme.palette.primary.dark,\r\n        fontSize: theme.spacing.unit * 3,\r\n    },\r\n    summary:{\r\n        color: 'gray',\r\n        fontSize: theme.spacing.unit,\r\n    },\r\n    link:{\r\n        color: 'purple',\r\n    },\r\n    divider: {\r\n        marginTop: theme.spacing.unit * 2,\r\n        marginBottom: theme.spacing.unit * 5,\r\n    },\r\n    deleteButton: {\r\n        marginLeft: '70%',\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    },\r\n    price:{\r\n\r\n    }\r\n});\r\n\r\n\r\n\r\nclass ShowOrder extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {orders: []};\r\n    }\r\n\r\n    componentDidMount() {\r\n        Order.showOrder(this.props._id).then(res=> this.setState({orders:res.orders})).catch(error=>alert(error.response.body.msg));\r\n    }\r\n\r\n    orderFilter(order, keyWord) {\r\n        if (order.orderId.toString().indexOf(keyWord)!==-1\r\n            ||order.createTime.indexOf(keyWord)!==-1\r\n            ||order.totalPrice.toString().indexOf(keyWord)!==-1\r\n            )\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        const {orders} = this.state;\r\n        return (\r\n            <div className={classes.superRoot}>\r\n                <Header/>\r\n                <SearchBar/>\r\n                <div className={classes.root}>\r\n                    {orders.map(order => this.orderFilter(order, this.props.keyWord)?\r\n                        <React.Fragment key={order.orderId}>\r\n                            <Toolbar>\r\n                                <Avatar className={classes.avatar} alt=\"Order\" children=\"订单\"/>\r\n                                <Typography variant=\"h6\">{order.orderId}</Typography>\r\n                            </Toolbar>\r\n                            <Typography className={classes.title}>{order.createTime}</Typography>\r\n                            <div className={classes.summary}>\r\n                                {\r\n                                    JSON.parse(order.books).map(book=> {\r\n                                        return <Typography>\r\n                                                {book.bookname + \" * \" + book.num}\r\n                                        </Typography>;\r\n                                    })\r\n                                }\r\n                            </div>\r\n                            <Typography className={classes.price}>{\"总价：\" + order.totalPrice}</Typography>\r\n                            <Divider className={classes.divider}/>\r\n                        </React.Fragment>\r\n                        :null\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nShowOrder.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        _id: state.Login._id/*, cart:BookAndNum.books*/,\r\n        keyWord: state.Search.keyWord,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(ShowOrder));","import React from 'react';\r\nimport {HashRouter, Redirect, Route, Switch} from 'react-router-dom';\r\nimport HomePage from './components/Main/HomePage';\r\nimport BooksPage from './components/Book/BooksPage';\r\nimport BookDetail from \"./components/Book/BookDetail\";\r\nimport ShoppingCart from \"./components/Shopping/ShoppingCart\";\r\nimport SignUp from './components/SignUp';\r\nimport Login from './components/Login';\r\nimport AddNewBook from './components/Book/AddNewBook';\r\nimport UpdateBook from './components/Book/UpdateBook';\r\nimport ManageUser from './components/Manage/ManageUser';\r\nimport ShowStatistics from './components/Shopping/ShowStatistics';\r\nimport ShowOrder from './components/Shopping/ShowOrder';\r\n\r\nconst BasicRoute = () => {\r\n    return (\r\n        <HashRouter>\r\n            <Switch>\r\n                <Route exact path=\"/\" component={/*HomePage*/BooksPage}/>\r\n                <Route exact path=\"/all-books\" component={BooksPage}/>\r\n                <Route exact path=\"/book/:isbn\" component={BookDetail}/>\r\n                <Route exact path=\"/cart\" component={ShoppingCart}/>\r\n                <Route exact path=\"/login\" component={Login}/>\r\n                <Route exact path=\"/signup\" component={SignUp}/>\r\n                <Route exact path=\"/add-new-book\" component={AddNewBook}/>\r\n                <Route exact path=\"/update/:isbn\" component={UpdateBook}/>\r\n                <Route exact path=\"/manage-users\" component={ManageUser}/>\r\n                <Route exact path=\"/order\" component={ShowOrder}/>\r\n                <Route exact path=\"/statistics\" component={ShowStatistics}/>\r\n                <Redirect to={{pathname:'/'}}/>\r\n            </Switch>\r\n        </HashRouter>\r\n    );\r\n};\r\n\r\nexport default BasicRoute;","import {combineReducers} from \"redux/es/redux\";\r\n\r\nfunction Login(state={_id:'',username:'',isManager:0},action) {\r\n    switch (action.type) {\r\n        case \"LOGIN\":\r\n            return action.result;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Redirect(state={redirectTo:null},action) {\r\n    switch (action.type) {\r\n        case 'REDIRECTED':\r\n            return {redirectTo: null};\r\n        case 'SIGN_UP':\r\n        case 'ADD_BOOK':\r\n        case 'LOGIN':\r\n        case \"UPDATE_BOOK\":\r\n            return {redirectTo: '/'};\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\nfunction BookDetail(state={books: [], update:false},action) {\r\n    switch (action.type) {\r\n        case \"UPDATE\":\r\n            const update = state.update;\r\n            return Object.assign({},{books:state.books, update: !update});\r\n        case \"SHOW_BOOK\":\r\n            //只存当前页的书\r\n            return Object.assign({},{books: action.result.books,update:state.update});\r\n        case \"ADD_BOOK\":\r\n            //action.book {\"bookname\":  ,\"stockNum\":  , \"summary\":  ,\"pictureUrl\":  ,\"price\":  ,\"author\":  ,\"isbn\":  }\r\n            const newState = Object.assign({}, state);\r\n            newState.books.push(action.book);\r\n            return newState;\r\n        case \"DELETE_BOOK\":\r\n            //action.isbn\r\n            const newState2 = Object.assign({}, state);\r\n            for (let i = 0; i < newState2.books.length; i++) {\r\n                if (newState2.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    newState2.books.splice(i, 1);\r\n                    return newState2;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            return state;\r\n        case \"UPDATE_BOOK\":\r\n            //action.book\r\n            const newState3 = Object.assign({}, state);\r\n            for (let i = 0; i < newState3.books.length; i++) {\r\n                if (newState3.books[i].bookname === action.book.bookname) {\r\n                    //book exits\r\n                    Object.assign(newState3.books[i],action.book);\r\n                    return newState3;\r\n                }\r\n            }\r\n            //book not exit\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction BookAndNum(state={books: []},action) {\r\n    switch (action.type) {\r\n        case \"SHOW_CART\":\r\n            return {books: action.result.books};\r\n        case \"ADD_TO_CART\":\r\n            //action.bookname action.num\r\n            const newState = Object.assign({}, state);\r\n            for (let i = 0; i < newState.books.length; i++) {\r\n                if (newState.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    newState.books[i].num += action.num;\r\n                    return newState;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            newState.books.push({\"bookname\": action.bookname, \"num\": action.num,\"isbn\":action.isbn});\r\n            return newState;\r\n        case \"REMOVE_FROM_CART\":\r\n            const nState = Object.assign({}, state);\r\n            //action.isbn\r\n            for (var i = 0; i < nState.books.length; i++) {\r\n                if (nState.books[i].isbn === action.isbn) {\r\n                    //cart has this book\r\n                    nState.books.splice(i, 1);\r\n                    return nState;\r\n                }\r\n            }\r\n            //cart doesn't have this book\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Order(state={orders:[]},action) {\r\n    switch (action.type) {\r\n        case \"SHOW_ORDER\":\r\n            //action.result {orders:[{\"userId\":.....}]}\r\n            return {orders: action.result.orders};\r\n        case \"GENERATE_ORDER\":\r\n            //action.order {\"userId\":...}\r\n            const newState = Object.assign({}, state);\r\n            newState.orders.push(action.order);\r\n            return newState;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Page(state={curPage:1, perPageNum: 10, total: 0}, action) {\r\n    switch (action.type) {\r\n        case \"NEXT_PAGE\":\r\n            return Object.assign({}, state, {curPage: state.curPage + 1});\r\n        case \"LAST_PAGE\":\r\n            return Object.assign({}, state, {curPage: state.curPage - 1});\r\n        case \"RESET_PAGE\":\r\n            return Object.assign({}, state, {curPage: 1});\r\n        case \"SET_PPN\":\r\n            return Object.assign({}, state, {perPageNum: action.PPN});\r\n        case \"SET_TOTAL\":\r\n            return Object.assign({}, state, {total: action.total});\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction Search(state={keyWord:'', by: 'isbn'}, action) {\r\n    switch (action.type) {\r\n        case \"SWITCH_BY\":\r\n            if (state.by === 'isbn') {\r\n                return Object.assign({}, state, {by: 'bookname'});\r\n            } else {\r\n                return Object.assign({}, state, {by: 'isbn'});\r\n            }\r\n        case \"SET_KEY\":\r\n            const newState = Object.assign({}, state, {keyWord: action.keyWord});\r\n            return newState;\r\n        case \"RESET_KEY\":\r\n            return Object.assign({}, state, {keyWord: ''});\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers(\r\n    {Login, Redirect, BookDetail, Order, Page, Search}\r\n);","import {createStore/*,applyMiddleware*/} from \"redux\";\r\nimport Reducers from './reducers';\r\n\r\nconst store = createStore(Reducers/*, applyMiddleware()*/);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport BasicRoute from './Routers';\r\nimport {Provider} from 'react-redux';\r\nimport theme from './theme';\r\nimport {MuiThemeProvider} from \"@material-ui/core/styles\";\r\nimport store from './configureStore';\r\n\r\ndocument.title = \"客天涯购书网\";\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <MuiThemeProvider theme={theme}>\r\n            <BasicRoute/>\r\n        </MuiThemeProvider>\r\n    </Provider>\r\n    , document.getElementById('root')\r\n);"],"sourceRoot":""}